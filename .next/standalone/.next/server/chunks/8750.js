exports.id=8750,exports.ids=[8750],exports.modules={72052:()=>{},6065:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},64447:(e,s,a)=>{"use strict";a.d(s,{Z:()=>u});var t=a(10326),r=a(17577),i=a(90434),n=a(35047),l=a(87888),c=a(48998),o=a(2179),d=a(6507),m=a(67269);function h(){let[e,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(0),[n,h]=(0,r.useState)(!1),[u,x]=(0,r.useState)(!1);async function g(){try{x(!0);let e=await m.L.authenticatedFetch("/api/notifications"),a=await e.json();a.ok&&(s(a.notifications),i(a.unreadCount))}catch(e){console.error("Error loading notifications:",e)}finally{x(!1)}}async function f(e){try{await m.L.authenticatedFetch("/api/notifications/mark-read",{method:"POST",body:JSON.stringify({notificationIds:e})}),s(s=>s.map(s=>e.includes(s.id)?{...s,read:!0}:s)),i(s=>Math.max(0,s-e.length))}catch(e){console.error("Error marking notifications as read:",e)}}return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>{h(!n),n||g()},className:"relative p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[t.jsx(d.Z,{className:"w-5 h-5"}),a>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:a>99?"99+":a})]}),n&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>h(!1)}),(0,t.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-96 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 bg-gray-50",children:[(0,t.jsxs)("h3",{className:"font-medium text-gray-800 flex items-center gap-2",children:[t.jsx(d.Z,{className:"w-4 h-4"}),"Notificaciones",a>0&&t.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:a})]}),a>0&&t.jsx("button",{onClick:()=>f(e.filter(e=>!e.read).map(e=>e.id)),className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Marcar todas como le\xeddas"})]}),t.jsx("div",{className:"max-h-64 overflow-y-auto",children:u?(0,t.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),"Cargando..."]}):0===e.length?(0,t.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[t.jsx(d.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{className:"text-sm",children:"No hay notificaciones"})]}):e.map(e=>t.jsx("div",{className:`p-3 border-l-4 border-b border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer ${function(e){switch(e){case"high":return"border-l-red-400 bg-red-50";case"medium":return"border-l-yellow-400 bg-yellow-50";case"low":return"border-l-gray-400 bg-gray-50";default:return"border-l-gray-300 bg-white"}}(e.priority)} ${e.read?"":"bg-blue-50"}`,onClick:()=>{e.read||f([e.id])},children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0 mt-1",children:function(e,s){switch(e){case"apa_uploaded":return t.jsx(l.Z,{className:`w-4 h-4 ${"high"===s?"text-red-500":"text-blue-500"}`});case"apa_required":return t.jsx(c.Z,{className:"w-4 h-4 text-yellow-500"});case"apa_status_change":return t.jsx(o.Z,{className:"w-4 h-4 text-green-500"});default:return t.jsx(d.Z,{className:"w-4 h-4 text-gray-500"})}}(e.type,e.priority)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[t.jsx("p",{className:"text-sm font-medium text-gray-800 leading-tight",children:e.title}),!e.read&&t.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full ml-2 mt-1"})]}),t.jsx("p",{className:"text-xs text-gray-600 mt-1 leading-relaxed",children:e.message}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:function(e){let s=new Date,a=new Date(e),t=s.getTime()-a.getTime(),r=Math.floor(t/6e4),i=Math.floor(t/36e5),n=Math.floor(t/864e5);return r<1?"Ahora mismo":r<60?`Hace ${r} min`:i<24?`Hace ${i} h`:n<7?`Hace ${n} d\xeda${n>1?"s":""}`:a.toLocaleDateString("es-ES")}(e.date)})]})]})},e.id))}),e.length>0&&t.jsx("div",{className:"p-2 border-t border-gray-200 bg-gray-50",children:t.jsx("button",{onClick:()=>{h(!1)},className:"w-full text-xs text-gray-600 hover:text-gray-800 py-2 text-center",children:"Ver todas las notificaciones"})})]})]})]})}let u=({children:e})=>{let[s,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!0),m=(0,n.useRouter)(),u=(0,n.usePathname)();(0,r.useEffect)(()=>{(async function(){try{let e=await fetch("/api/auth/profile",{cache:"no-store"}),s=await e.json();if(s.ok)a(s.user),c(s.setup||!1);else{m.push("/login");return}}catch(e){console.error("Error loading profile:",e),m.push("/login");return}finally{d(!1)}})()},[m]);let x=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),m.push("/login")}catch(e){console.error("Logout error:",e),m.push("/login")}};return o?t.jsx("div",{className:"min-h-screen grid place-items-center",children:t.jsx("div",{className:"text-gray-700 text-sm",children:"Cargando..."})}):s?(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsxs)("header",{className:"bg-white shadow-sm border-b",children:[t.jsx("div",{className:"px-6 py-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Garden Club Paraguayo"}),t.jsx("span",{className:"text-sm text-gray-500",children:"|"}),t.jsx("span",{className:"text-sm text-gray-600",children:s.nombre})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(h,{}),t.jsx(i.default,{href:"/admin/configuracion-sistema",className:"flex items-center",children:t.jsx("span",{className:"material-icons text-gray-600 hover:text-blue-600 cursor-pointer text-2xl",style:{fontSize:24},title:"Configuraci\xf3n",children:"⚙"})}),t.jsx("button",{onClick:x,className:"text-sm text-gray-600 hover:text-gray-800 px-3 py-1 rounded hover:bg-gray-100",children:"Cerrar Sesi\xf3n"})]})]})}),t.jsx("nav",{className:"px-6 py-2 bg-gray-50 border-t",children:(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsxs)(i.default,{className:"menu-item",href:"/admin/dashboard",children:[t.jsx("span",{children:"\uD83D\uDCCA"}),"Dashboard"]}),(0,t.jsxs)(i.default,{className:"menu-item",href:"/admin/socios",children:[t.jsx("span",{children:"\uD83D\uDC65"}),"Socios"]}),(0,t.jsxs)(i.default,{className:"menu-item",href:"/admin/reservas",children:[t.jsx("span",{children:"\uD83D\uDDD3️"}),"Reservas"]}),(0,t.jsxs)(i.default,{className:"menu-item",href:"/admin/servicios",children:[t.jsx("span",{children:"\uD83D\uDECE️"}),"Servicios"]}),(0,t.jsxs)(i.default,{className:"menu-item",href:"/admin/cobradores",children:[t.jsx("span",{children:"\uD83D\uDC64"}),"Cobradores"]}),(0,t.jsxs)(i.default,{className:"menu-item",href:"/admin/cobranzas",children:[t.jsx("span",{children:"\uD83D\uDCB0"}),"Cobranzas"]}),(0,t.jsxs)(i.default,{className:"menu-item",href:"/admin/usuarios",children:[t.jsx("span",{children:"\uD83D\uDD10"}),"Usuarios"]}),(0,t.jsxs)(i.default,{className:"menu-item",href:"/porteria",children:[t.jsx("span",{children:"\uD83D\uDEAA"}),"Porter\xeda"]})]})})]}),t.jsx("main",{className:"flex-1 min-h-screen",style:"/admin/dashboard"===u?{backgroundImage:"url(/fondoapp.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}:{backgroundColor:"#f9fafb"},children:(0,t.jsxs)("div",{className:"p-6",children:[l&&(0,t.jsxs)("div",{className:"mb-4 p-3 rounded bg-yellow-100 border border-yellow-300 text-sm",children:[t.jsx("b",{children:"Modo configuraci\xf3n:"})," No hay usuarios creados. Crea el primer usuario en"," ",t.jsx(i.default,{href:"/admin/usuarios",className:"underline",children:"Usuarios"})," para habilitar el login."]}),e]})})]}):t.jsx("div",{className:"min-h-screen grid place-items-center",children:t.jsx("div",{className:"text-red-600 text-sm",children:"No autenticado. Redirigiendo..."})})}},67269:(e,s,a)=>{"use strict";a.d(s,{L:()=>i});var t=a(66562);let r="gcp_token";class i{static async authenticatedFetch(e,s={}){let a=t.Z.get(r),i=new Headers(s.headers||{}),n=s.body,l="undefined"!=typeof FormData&&n instanceof FormData,c="undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams;return l||c?i.has("Content-Type")&&i.delete("Content-Type"):i.has("Content-Type")||i.set("Content-Type","application/json"),a&&i.set("Authorization",`Bearer ${a}`),fetch(e,{...s,headers:i,credentials:s.credentials??"include"})}static getToken(){return t.Z.get(r)}static removeToken(){t.Z.remove(r)}static isAuthenticated(){return!!this.getToken()}}},11506:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i,metadata:()=>r});var t=a(19510);a(67272);let r={title:"Garden Club Paraguayo",description:"Sistema de Gesti\xf3n"};function i({children:e}){return t.jsx("html",{lang:"es",children:t.jsx("body",{children:e})})}},67272:()=>{}};