(()=>{var e={};e.id=4060,e.ids=[4060],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},64921:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(46875),r(11506),r(35866);var i=r(23191),a=r(88716),s=r(37922),n=r.n(s),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["admin",{children:["servicios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,46875)),"C:\\Garden\\app\\admin\\servicios\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Garden\\app\\admin\\servicios\\page.tsx"],m="/admin/servicios/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/servicios/page",pathname:"/admin/servicios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},76769:(e,t,r)=>{Promise.resolve().then(r.bind(r,71708))},71708:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var i=r(10326),a=r(64447),s=r(67269),n=r(17577),o=r(35047),l=r(77863),c=r(99102),d=r(36283),m=r(83855),x=r(88307),p=r(231),u=r(90434);function h(){let e=(0,o.useRouter)(),[t,h]=(0,n.useState)([]),[g,y]=(0,n.useState)(!0),[f,v]=(0,n.useState)(""),[b,j]=(0,n.useState)(""),[w,N]=(0,n.useState)(""),[S,k]=(0,n.useState)(null);async function C(){try{let e=await s.L.authenticatedFetch("/api/services"),t=await e.json();h(Array.isArray(t)?t:[])}catch(e){console.error("Error loading services:",e),h([])}finally{y(!1)}}async function P(e,t){if(confirm(`\xbfEst\xe1s seguro de que quieres eliminar el servicio "${t}"?`))try{let t=await s.L.authenticatedFetch(`/api/services/${e}`,{method:"DELETE"}),r=await t.json();t.ok?(await C(),k(null),alert("Servicio eliminado correctamente")):alert(r.msg||"Error al eliminar el servicio")}catch(e){console.error("Error deleting service:",e),alert("Error al eliminar el servicio")}}let D=t.filter(e=>{let t=e.nombre.toLowerCase().includes(f.toLowerCase())||e.descripcion&&e.descripcion.toLowerCase().includes(f.toLowerCase()),r=!b||e.tipo===b,i=!w||"activo"===w&&e.activo||"inactivo"===w&&!e.activo;return t&&r&&i}),A=e=>i.jsx("span",{className:"text-sm text-gray-900",children:e});async function E(){try{let e=await r.e(5603).then(r.bind(r,25603)),t=e=>e.toLocaleString("es-PY",{minimumFractionDigits:0,maximumFractionDigits:0}),i=D.map(e=>({Servicio:e.nombre,Precio:t(e.precio),Tipo:e.tipo,Socios:e.socios?"S\xcd":"NO","No Socios":e.noSocios?"S\xcd":"NO",Agendamiento:e.permiteAgendamiento?"S\xcd":"NO",ComisiÃ³n:e.comisionCobrador?`${e.comisionCobrador}%`:"-"})),a=e.utils.book_new(),s=e.utils.json_to_sheet(i);s["!cols"]=[{wch:30},{wch:12},{wch:10},{wch:10},{wch:12},{wch:15},{wch:12}],e.utils.book_append_sheet(a,s,"Servicios");let n=`servicios-${new Date().toISOString().slice(0,10)}.xlsx`;e.writeFile(a,n)}catch(e){console.error("Error al exportar a Excel:",e),alert("Error al exportar a Excel")}}async function F(){try{let e=await r.e(6180).then(r.t.bind(r,16180,23)),t=await r.e(3240).then(r.t.bind(r,53240,23)),i=e.default||e,a=t.default||t;i.vfs=a.vfs;let s=[[{text:"Servicio",style:"tableHeader",bold:!0},{text:"Precio",style:"tableHeader",bold:!0,alignment:"right"},{text:"Tipo",style:"tableHeader",bold:!0},{text:"Socios",style:"tableHeader",bold:!0,alignment:"center"},{text:"No Socios",style:"tableHeader",bold:!0,alignment:"center"},{text:"Agendamiento",style:"tableHeader",bold:!0,alignment:"center"},{text:"Comisi\xf3n",style:"tableHeader",bold:!0,alignment:"center"}]];D.forEach(e=>{s.push([{text:e.nombre,fontSize:9},{text:(0,l.xG)(e.precio),fontSize:9,alignment:"right"},{text:e.tipo,fontSize:9},{text:e.socios?"S\xcd":"NO",fontSize:9,alignment:"center"},{text:e.noSocios?"S\xcd":"NO",fontSize:9,alignment:"center"},{text:e.permiteAgendamiento?"S\xcd":"NO",fontSize:9,alignment:"center"},{text:e.comisionCobrador?`${e.comisionCobrador}%`:"-",fontSize:9,alignment:"center"}])});let n={pageSize:"A4",pageOrientation:"landscape",pageMargins:[30,60,30,40],header:{margin:[30,20,30,0],columns:[{text:"Reporte de Servicios",style:"header",fontSize:16,bold:!0},{text:new Date().toLocaleDateString("es-PY"),alignment:"right",fontSize:10,margin:[0,5,0,0]}]},content:[{text:`Total de servicios: ${D.length}`,margin:[0,0,0,10],fontSize:10},{table:{headerRows:1,widths:["*","auto","auto","auto","auto","auto","auto"],body:s},layout:{fillColor:function(e){return 0===e?"#f3f4f6":e%2==0?"#f9fafb":null},hLineWidth:function(){return .5},vLineWidth:function(){return .5},hLineColor:function(){return"#e5e7eb"},vLineColor:function(){return"#e5e7eb"}}}],styles:{header:{fontSize:16,bold:!0,margin:[0,0,0,10]},tableHeader:{fontSize:10,bold:!0,fillColor:"#f3f4f6"}},defaultStyle:{fontSize:9}},o=`servicios-${new Date().toISOString().slice(0,10)}.pdf`;i.createPdf(n).download(o)}catch(e){console.error("Error al exportar a PDF:",e),alert("Error al exportar a PDF")}}return g?i.jsx(a.Z,{children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):i.jsx(a.Z,{children:(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gesti\xf3n de Servicios"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Administra los servicios disponibles en el club"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)("button",{onClick:E,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Exportar a Excel",children:[i.jsx(c.Z,{className:"w-5 h-5"}),"Excel"]}),(0,i.jsxs)("button",{onClick:F,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",title:"Exportar a PDF",children:[i.jsx(d.Z,{className:"w-5 h-5"}),"PDF"]}),(0,i.jsxs)("button",{onClick:()=>e.push("/admin/servicios/nuevo"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[i.jsx(m.Z,{className:"w-5 h-5"}),"Nuevo Servicio"]})]})]}),"        ",i.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),(0,i.jsxs)("div",{className:"relative",children:[i.jsx(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Nombre o descripci\xf3n...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:f,onChange:e=>v(e.target.value)})]})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),(0,i.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b,onChange:e=>j(e.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"MENSUAL",children:"Mensual"}),i.jsx("option",{value:"ANUAL",children:"Anual"}),i.jsx("option",{value:"UNICO",children:"\xdanico"})]})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,i.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:w,onChange:e=>N(e.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"activo",children:"Activos"}),i.jsx("option",{value:"inactivo",children:"Inactivos"})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{onClick:()=>{v(""),j(""),N("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Limpiar Filtros"})})]})}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Servicio"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Socios"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No Socios"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agendamiento"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Comisi\xf3n"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[e.nombre,e.obligatorio&&i.jsx("span",{className:"text-gray-900 text-xs",children:"Obligatorio"})]}),e.descripcion&&i.jsx("div",{className:"text-sm text-gray-500",children:e.descripcion}),e.aplicaA&&e.aplicaA.length>0&&(0,i.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Aplica a: ",e.aplicaA.join(", ")]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm font-medium text-gray-900",children:(0,l.xG)(e.precio)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A(e.tipo)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsx("span",{className:"text-sm text-gray-900",children:e.socios?"S\xcd":"NO"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsx("span",{className:"text-sm text-gray-900",children:e.noSocios?"S\xcd":"NO"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsx("span",{className:"text-sm text-gray-900",children:e.permiteAgendamiento?"S\xcd":"NO"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.comisionCobrador?`${e.comisionCobrador}%`:"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,i.jsxs)("div",{className:"relative","data-menu-container":!0,children:[i.jsx("button",{onClick:t=>{var r;t.preventDefault(),t.stopPropagation(),console.log("Toggling menu for service:",e.id),console.log("toggleMenu called with:",r=e.id,"current openMenuId:",S),k(S===r?null:r)},className:"p-2 hover:bg-gray-50 rounded-full transition-colors border border-transparent hover:border-gray-200",title:"M\xe1s opciones",children:i.jsx(p.Z,{className:"w-4 h-4 text-gray-500"})}),S===e.id&&i.jsx("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50 overflow-hidden",children:(0,i.jsxs)("div",{className:"py-1",children:[i.jsx(u.default,{href:`/admin/servicios/${e.id}`,className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>k(null),children:"Ver Detalles"}),i.jsx(u.default,{href:`/admin/servicios/${e.id}/editar`,className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>k(null),children:"Editar"}),i.jsx("div",{className:"border-t border-gray-100 my-1"}),i.jsx("button",{onClick:t=>{t.stopPropagation(),P(e.id,e.nombre)},className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors text-left",children:"Eliminar"})]})})]})})]},e.id))})]})}),0===D.length&&(0,i.jsxs)("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-gray-500",children:f||b||w?"No se encontraron servicios con los filtros aplicados":"No hay servicios registrados"}),!f&&!b&&!w&&(0,i.jsxs)(u.default,{href:"/admin/servicios/nuevo",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-600 bg-primary-100 hover:bg-primary-200",children:[i.jsx(m.Z,{className:"w-4 h-4 mr-2"}),"Crear primer servicio"]})]})]})]})})}},60068:(e,t,r)=>{"use strict";r.d(t,{D2:()=>i,LJ:()=>s,_4:()=>n,tF:()=>a});let i={name:"America/Asuncion",offsetHours:-3,description:"Paraguay (UTC-3)"};function a(){let e=new Date,t=Object.fromEntries(new Intl.DateTimeFormat("en-CA",{timeZone:i.name,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(e).map(e=>[e.type,e.value]));return new Date(parseInt(t.year),parseInt(t.month)-1,parseInt(t.day),parseInt(t.hour),parseInt(t.minute),parseInt(t.second))}function s(e){if(e){let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${i}`}{let e=new Date;return new Intl.DateTimeFormat("en-CA",{timeZone:i.name,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}}function n(e,t=!1){let r;if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){let[t,i,a]=e.split("-").map(Number);r=new Date(t,i-1,a)}else r=new Date(e)}else r=e;if(t)return r.toLocaleString("es-PY",{timeZone:i.name,day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});if(!("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)))return r.toLocaleDateString("es-PY",{timeZone:i.name,day:"2-digit",month:"2-digit",year:"numeric"});{let[t,r,i]=e.split("-");return`${i.padStart(2,"0")}/${r.padStart(2,"0")}/${t}`}}},77863:(e,t,r)=>{"use strict";r.d(t,{Fw:()=>n,Ji:()=>o,m9:()=>l,p6:()=>s,sQ:()=>d,sU:()=>c,xG:()=>a});var i=r(60068);function a(e){return new Intl.NumberFormat("es-PY",{style:"currency",currency:"PYG",minimumFractionDigits:0}).format(e)}function s(e){return(0,i._4)(e,!1)}function n(e){let t=(0,i.tF)(),r=new Date(new Date(e).getTime()+108e5),a=t.getUTCFullYear()-r.getUTCFullYear(),s=t.getUTCMonth()-r.getUTCMonth();return(s<0||0===s&&t.getUTCDate()<r.getUTCDate())&&a--,a}function o(){return(0,i.LJ)()}function l(e){let t=e.replace(/\D/g,"");return t?t.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function c(e){return parseInt(e.replace(/\./g,""))||0}function d(e){return Math.round(e)}},99102:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(76557).Z)("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]])},36283:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(76557).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},231:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(76557).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},83855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88307:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(76557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},46875:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(68570).createProxy)(String.raw`C:\Garden\app\admin\servicios\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[8948,4471,6837,8750],()=>r(64921));module.exports=i})();