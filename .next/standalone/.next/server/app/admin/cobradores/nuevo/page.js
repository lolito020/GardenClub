(()=>{var e={};e.id=2375,e.ids=[2375],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25891:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d}),a(22207),a(11506),a(35866);var o=a(23191),s=a(88716),t=a(37922),n=a.n(t),l=a(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);a.d(r,i);let d=["",{children:["admin",{children:["cobradores",{children:["nuevo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,22207)),"C:\\Garden\\app\\admin\\cobradores\\nuevo\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Garden\\app\\admin\\cobradores\\nuevo\\page.tsx"],m="/admin/cobradores/nuevo/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new o.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/cobradores/nuevo/page",pathname:"/admin/cobradores/nuevo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},36889:(e,r,a)=>{Promise.resolve().then(a.bind(a,77031))},77031:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>c});var o=a(10326),s=a(64447),t=a(67269),n=a(17577),l=a(35047),i=a(86333),d=a(90434);function c(){let e=(0,l.useRouter)(),[r,a]=(0,n.useState)(!1),[c,m]=(0,n.useState)(""),[u,x]=(0,n.useState)([]),[p,g]=(0,n.useState)(!0),[b,h]=(0,n.useState)({nombres:"",apellidos:"",ci:"",telefono:"",celular:"",direccion:"",email:"",tipoCobrador:"EXTERNO",comisionPorDefecto:"12.5",formasPago:["efectivo"],cuentaBanco:""}),f=u.some(e=>"CLUB"===e.tipoCobrador),y=e=>{"CLUB"===e?h(r=>({...r,tipoCobrador:e,nombres:"Garden Club",apellidos:"",ci:"",telefono:"",celular:"",direccion:"",email:"",formasPago:["efectivo","transferencia","cheque"],comisionPorDefecto:"0"})):h(r=>({...r,tipoCobrador:e,nombres:"CLUB"===r.tipoCobrador?"":r.nombres,formasPago:"CLUB"===r.tipoCobrador?["efectivo"]:r.formasPago}))},j=e=>{h(r=>{let a=r.formasPago;return a.includes(e)?{...r,formasPago:a.length>1?a.filter(r=>r!==e):a}:{...r,formasPago:[...a,e]}})},v=async r=>{r.preventDefault(),m(""),a(!0);try{let r={...b,comisionPorDefecto:"EXTERNO"===b.tipoCobrador||"PROFESOR"===b.tipoCobrador?parseFloat(b.comisionPorDefecto):void 0},a=await t.L.authenticatedFetch("/api/collectors",{method:"POST",body:JSON.stringify(r)}),o=await a.json();a.ok?e.push("/admin/cobradores"):m(o.msg||"Error al crear cobrador")}catch(e){m("Error de conexi\xf3n")}finally{a(!1)}};return o.jsx(s.Z,{children:(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[o.jsx(d.default,{href:"/admin/cobradores",className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(i.Z,{className:"w-5 h-5"})}),(0,o.jsxs)("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Nuevo Cobrador"}),o.jsx("p",{className:"text-gray-600",children:"Registra un nuevo cobrador externo"})]})]}),c&&o.jsx("div",{className:`p-4 rounded-lg ${c.includes("Error")?"bg-red-50 text-red-800 border border-red-200":"bg-green-50 text-green-800 border border-green-200"}`,children:c}),o.jsx("div",{className:"bg-white rounded-lg shadow",children:(0,o.jsxs)("form",{onSubmit:v,className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n Personal"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombres *"}),o.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b.nombres,onChange:e=>h(r=>({...r,nombres:e.target.value})),placeholder:"Mar\xeda",disabled:"CLUB"===b.tipoCobrador}),"CLUB"===b.tipoCobrador&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"\uD83D\uDCCC Nombre predeterminado para cobrador institucional"})]}),"CLUB"!==b.tipoCobrador&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellidos *"}),o.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b.apellidos,onChange:e=>h(r=>({...r,apellidos:e.target.value})),placeholder:"Gonz\xe1lez"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C\xe9dula de Identidad *"}),o.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b.ci,onChange:e=>h(r=>({...r,ci:e.target.value})),placeholder:"3456789"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b.email,onChange:e=>h(r=>({...r,email:e.target.value})),placeholder:"maria.gonzalez@email.com"})]})]})]})]}),"CLUB"!==b.tipoCobrador&&(0,o.jsxs)("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n de Contacto"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono"}),o.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b.telefono,onChange:e=>h(r=>({...r,telefono:e.target.value})),placeholder:"0981-123456"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Celular"}),o.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b.celular,onChange:e=>h(r=>({...r,celular:e.target.value})),placeholder:"0981-123456"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direcci\xf3n"}),o.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b.direccion,onChange:e=>h(r=>({...r,direccion:e.target.value})),placeholder:"Asunci\xf3n"})]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tipo de Cobrador y Comisiones"}),o.jsx("div",{className:"space-y-4",children:(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Cobrador *"}),(0,o.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b.tipoCobrador,onChange:e=>y(e.target.value),disabled:p,children:[o.jsx("option",{value:"EXTERNO",children:"Externo"}),o.jsx("option",{value:"PROFESOR",children:"Profesor"}),!f&&o.jsx("option",{value:"CLUB",children:"Garden Club"})]})]}),("EXTERNO"===b.tipoCobrador||"PROFESOR"===b.tipoCobrador)&&(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comisi\xf3n % *"}),o.jsx("input",{type:"number",required:"EXTERNO"===b.tipoCobrador||"PROFESOR"===b.tipoCobrador,min:"0",max:"100",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b.comisionPorDefecto,onChange:e=>h(r=>({...r,comisionPorDefecto:e.target.value})),placeholder:"12.5"})]})]})})]}),"CLUB"!==b.tipoCobrador&&(0,o.jsxs)("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n de Pago"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Formas de Pago Aceptadas * ",o.jsx("span",{className:"text-xs text-gray-500",children:"(Seleccione al menos una)"})]}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,o.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:b.formasPago.includes("efectivo"),onChange:()=>j("efectivo"),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Efectivo"})]}),(0,o.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:b.formasPago.includes("transferencia"),onChange:()=>j("transferencia"),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Transferencia"})]}),(0,o.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:b.formasPago.includes("cheque"),onChange:()=>j("cheque"),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Cheque"})]})]}),0===b.formasPago.length&&o.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Debe seleccionar al menos una forma de pago"})]}),b.formasPago.includes("transferencia")&&(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cuenta Bancaria"}),o.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b.cuentaBanco,onChange:e=>h(r=>({...r,cuentaBanco:e.target.value})),placeholder:"1234567890"})]})]})]}),"CLUB"===b.tipoCobrador&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,o.jsxs)("p",{className:"text-sm text-blue-800",children:["\uD83D\uDCB3 ",o.jsx("strong",{children:"Garden Club"})," acepta autom\xe1ticamente todos los m\xe9todos de pago: Efectivo, Transferencia y Cheque."]})})]}),(0,o.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[o.jsx(d.default,{href:"/admin/cobradores",className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50",children:r?"Creando...":"Crear Cobrador"})]})]})})]})})}},86333:(e,r,a)=>{"use strict";a.d(r,{Z:()=>o});let o=(0,a(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},22207:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});let o=(0,a(68570).createProxy)(String.raw`C:\Garden\app\admin\cobradores\nuevo\page.tsx#default`)}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),o=r.X(0,[8948,4471,6837,8750],()=>a(25891));module.exports=o})();