(()=>{var e={};e.id=2217,e.ids=[2217],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},59232:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d}),t(70068),t(11506),t(35866);var a=t(23191),r=t(88716),i=t(37922),n=t.n(i),o=t(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let d=["",{children:["admin",{children:["cobradores",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,70068)),"C:\\Garden\\app\\admin\\cobradores\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Garden\\app\\admin\\cobradores\\[id]\\page.tsx"],x="/admin/cobradores/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/cobradores/[id]/page",pathname:"/admin/cobradores/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},96280:(e,s,t)=>{Promise.resolve().then(t.bind(t,40155))},40155:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var a=t(10326),r=t(64447),i=t(67269),n=t(17577),o=t(35047),l=t(77863),d=t(86333),c=t(85571),x=t(13027),m=t(70003),h=t(79635),g=t(41137),p=t(88307),u=t(99102),b=t(36283),y=t(76557);let j=(0,y.Z)("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),f=(0,y.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),v=(0,y.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),N=(0,y.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var w=t(94019),C=t(90434),P=t(25603);function k(){var e,s;let y=(0,o.useParams)(),[k,S]=(0,n.useState)(null),[F,Z]=(0,n.useState)(null),[D,T]=(0,n.useState)(!0),[$,E]=(0,n.useState)(new Set),[L,M]=(0,n.useState)(!1),[_,q]=(0,n.useState)("pendientes"),[G,O]=(0,n.useState)({formaPago:"efectivo",numeroRecibo:"",observaciones:""}),[I,R]=(0,n.useState)(!1),[A,z]=(0,n.useState)(""),[U,Y]=(0,n.useState)(""),[H,B]=(0,n.useState)(""),[J,X]=(0,n.useState)(""),[V,Q]=(0,n.useState)(1),[K,W]=(0,n.useState)(50);async function ee(){try{let[e,s]=await Promise.all([i.L.authenticatedFetch(`/api/collectors/${y.id}`),i.L.authenticatedFetch(`/api/collectors/${y.id}/commissions`)]),[t,a]=await Promise.all([e.json(),s.json()]);e.ok&&S(t),s.ok&&Z(a)}catch(e){console.error("Error loading collector data:",e)}finally{T(!1)}}async function es(){if(0===$.size){z("Selecciona al menos un pago");return}R(!0),z("");try{let e=await i.L.authenticatedFetch("/api/commission-payments",{method:"POST",body:JSON.stringify({cobradorId:y.id,paymentIds:Array.from($),formaPago:G.formaPago,numeroRecibo:G.numeroRecibo||void 0,observaciones:G.observaciones||void 0})}),s=await e.json();e.ok?(M(!1),E(new Set),O({formaPago:"efectivo",numeroRecibo:"",observaciones:""}),await ee()):z(s.error||s.msg||"Error al procesar liquidaci\xf3n")}catch(e){z("Error de conexi\xf3n")}finally{R(!1)}}async function et(){if(k)try{(await i.L.authenticatedFetch(`/api/collectors/${k.id}`,{method:"PATCH",body:JSON.stringify({activo:!k.activo})})).ok&&S(e=>e?{...e,activo:!e.activo}:null)}catch(e){console.error("Error toggling collector:",e)}}let ea=e=>{let s=(V-1)*K;return e.slice(s,s+K)},er=e=>Math.ceil(e/K)||1,ei=async()=>{if(!F||!k)return;let e="pendientes"===_?en(F.pagosPendientes):en(F.pagosPagados||[]);if(0===e.length){alert("No hay datos para exportar");return}let s=await t.e(6180).then(t.t.bind(t,16180,23)),a=await t.e(3240).then(t.t.bind(t,53240,23));s.default.vfs=a.default.vfs;let r=e=>e.toLocaleString("de-DE",{minimumFractionDigits:0}),i=e.map(e=>[(0,l.p6)(e.fecha),e.socio.codigo,`${e.socio.nombres} ${e.socio.apellidos}`,e.concepto,r(e.monto),r(e.comisionCobrador)]);i.push(["","","","TOTAL",r(e.reduce((e,s)=>e+s.monto,0)),r(e.reduce((e,s)=>e+s.comisionCobrador,0))]);let n={pageOrientation:"landscape",pageSize:"A4",content:[{text:"Reporte de Comisiones",style:"header",alignment:"center",margin:[0,0,0,10]},{text:`Cobrador: ${k.nombres} ${k.apellidos}`,style:"subheader",margin:[0,0,0,2]},{text:`C\xf3digo: ${k.codigo}`,style:"subheader",margin:[0,0,0,2]},{text:`Estado: ${"pendientes"===_?"Comisiones Pendientes":"Comisiones Pagadas"}`,style:"subheader",margin:[0,0,0,2]},{text:`Fecha: ${new Date().toLocaleDateString("es-PY")}`,style:"subheader",margin:[0,0,0,10]},{table:{headerRows:1,widths:["auto","auto","*","*","auto","auto"],body:[["Fecha","C\xf3digo Socio","Socio","Concepto","Monto","Comisi\xf3n"],...i]},layout:"lightHorizontalLines"}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:10,margin:[0,2,0,2]}},defaultStyle:{fontSize:8}},o=`Comisiones_${k.nombres}_${k.apellidos}_${_}_${new Date().toISOString().split("T")[0]}.pdf`;s.default.createPdf(n).download(o)},en=e=>e.filter(e=>{if(U.trim()){let s=U.toLowerCase();if(!(e.concepto?.toLowerCase().includes(s)||e.socio?.nombres?.toLowerCase().includes(s)||e.socio?.apellidos?.toLowerCase().includes(s)||e.socio?.codigo?.toLowerCase().includes(s)||e.monto?.toString().includes(s)||e.comisionCobrador?.toString().includes(s)))return!1}if(H&&new Date(e.fecha)<new Date(H))return!1;if(J){let s=new Date(e.fecha),t=new Date(J);if(t.setHours(23,59,59,999),s>t)return!1}return!0}),eo=F?.pagosPendientes.filter(e=>$.has(e.id)).reduce((e,s)=>e+s.comisionCobrador,0)||0;return D?a.jsx(r.Z,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):k?a.jsx(r.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(C.default,{href:"/admin/cobradores",className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(d.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900",children:[k.nombres," ",k.apellidos]}),a.jsx("p",{className:"text-gray-600",children:k.codigo})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:et,className:`px-4 py-2 rounded-lg flex items-center gap-2 ${k.activo?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:[k.activo?a.jsx(c.Z,{className:"w-4 h-4"}):a.jsx(x.Z,{className:"w-4 h-4"}),k.activo?"Desactivar":"Activar"]}),(0,a.jsxs)(C.default,{href:`/admin/cobradores/${k.id}/editar`,className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4"}),"Editar"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${k.activo?"bg-green-500":"bg-gray-500"}`}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Estado"}),a.jsx("div",{className:"font-medium",children:k.activo?"Activo":"Inactivo"})]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xl font-bold text-green-600",children:(0,l.xG)(F?.totales.generados||0)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Generado"})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xl font-bold text-orange-600",children:(0,l.xG)(F?.totales.pendientes||0)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Pendiente"})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xl font-bold text-blue-600",children:(0,l.xG)(F?.totales.pagados||0)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Pagado"})]})})]}),a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[a.jsx("div",{className:"lg:col-span-4 bg-white rounded-lg shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(h.Z,{className:"w-5 h-5 mr-2"}),"Datos Personales"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Nombres"}),a.jsx("div",{className:"font-medium",children:k.nombres})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Apellidos"}),a.jsx("div",{className:"font-medium",children:k.apellidos})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"C\xe9dula"}),a.jsx("div",{className:"font-medium",children:k.ci})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Tipo de Cobrador"}),a.jsx("div",{className:"font-medium",children:(e=k.tipoCobrador,a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{CLUB:"bg-gray-100 text-gray-800",EXTERNO:"bg-purple-100 text-purple-800",PROFESOR:"bg-blue-100 text-blue-800"}[e]}`,children:{CLUB:"Garden Club",EXTERNO:"Externo",PROFESOR:"Profesor"}[e]}))})]}),("EXTERNO"===k.tipoCobrador||"PROFESOR"===k.tipoCobrador)&&k.comisionPorDefecto&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Comisi\xf3n por Defecto"}),(0,a.jsxs)("div",{className:"font-medium",children:[k.comisionPorDefecto,"%"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Fecha de Ingreso"}),a.jsx("div",{className:"font-medium",children:(0,l.p6)(k.fechaIngreso)})]}),k.telefono&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Tel\xe9fono"}),a.jsx("div",{className:"font-medium",children:k.telefono})]}),k.celular&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Celular"}),a.jsx("div",{className:"font-medium",children:k.celular})]}),k.email&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("div",{className:"font-medium",children:k.email})]}),k.direccion&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Direcci\xf3n"}),a.jsx("div",{className:"font-medium",children:k.direccion})]})]})]})]})}),a.jsx("div",{className:"lg:col-span-1 bg-white rounded-lg shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:"Informaci\xf3n de Pago"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm text-gray-600 block mb-1",children:"Forma de Pago"}),(s=k.formaPago,a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{efectivo:"bg-green-100 text-green-800",transferencia:"bg-blue-100 text-blue-800",cheque:"bg-orange-100 text-orange-800"}[s]||"bg-gray-100 text-gray-800"}`,children:{efectivo:"Efectivo",transferencia:"Transferencia",cheque:"Cheque"}[s]||s}))]}),k.cuentaBanco&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm text-gray-600 block mb-1",children:"Cuenta Bancaria"}),a.jsx("span",{className:"font-medium text-sm break-all",children:k.cuentaBanco})]})]})]})})]})}),"CLUB"!==k.tipoCobrador&&a.jsx("div",{className:"bg-white rounded-lg shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold flex items-center",children:"Gesti\xf3n de Comisiones"}),F&&F.pagosPendientes.length>0&&"pendientes"===_&&(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:function(){F&&E(new Set(F.pagosPendientes.map(e=>e.id)))},className:"text-sm text-primary-600 hover:text-primary-800",children:"Seleccionar Todos"}),$.size>0&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{className:"text-gray-300",children:"|"}),a.jsx("button",{onClick:function(){E(new Set)},className:"text-sm text-gray-600 hover:text-gray-800",children:"Limpiar"}),a.jsx("span",{className:"text-gray-300",children:"|"}),(0,a.jsxs)("button",{onClick:()=>M(!0),className:"text-sm bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:["Liquidar Seleccionados (",$.size,") - ",(0,l.xG)(eo)]})]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6",children:(0,a.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,a.jsxs)("button",{onClick:()=>q("pendientes"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"pendientes"===_?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Comisiones Pendientes",F&&F.pagosPendientes.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:F.pagosPendientes.length})]}),(0,a.jsxs)("button",{onClick:()=>q("pagadas"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"pagadas"===_?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Comisiones Pagadas",F&&F.pagosPagados&&F.pagosPagados.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:F.pagosPagados.length})]})]})}),(0,a.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[a.jsx(g.Z,{className:"w-4 h-4 text-gray-400"}),a.jsx("input",{type:"date",value:H,onChange:e=>B(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Desde"}),a.jsx("span",{className:"text-gray-400",children:"-"}),a.jsx("input",{type:"date",value:J,onChange:e=>X(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Hasta"}),a.jsx("button",{onClick:()=>{let e=new Date,s=new Date(e.getFullYear(),e.getMonth(),1),t=new Date(e.getFullYear(),e.getMonth()+1,0);B(s.toISOString().split("T")[0]),X(t.toISOString().split("T")[0])},className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs",children:"Mes actual"}),a.jsx("button",{onClick:()=>{let e=new Date,s=new Date(e.getFullYear(),0,1),t=new Date(e.getFullYear(),11,31);B(s.toISOString().split("T")[0]),X(t.toISOString().split("T")[0])},className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs",children:"Este a\xf1o"}),a.jsx("button",{onClick:()=>{Y(""),B(""),X(""),Q(1)},className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs text-gray-600",children:"Limpiar filtros"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",value:U,onChange:e=>Y(e.target.value),placeholder:"Buscar por concepto, socio o monto...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm"})]}),(0,a.jsxs)("button",{onClick:()=>{if(!F||!k)return;let e="pendientes"===_?en(F.pagosPendientes):en(F.pagosPagados||[]);if(0===e.length){alert("No hay datos para exportar");return}let s=e.map(e=>({Fecha:(0,l.p6)(e.fecha),"C\xf3digo Socio":e.socio.codigo,Socio:`${e.socio.nombres} ${e.socio.apellidos}`,Concepto:e.concepto,Monto:e.monto,Comisión:e.comisionCobrador,Estado:"pendientes"===_?"Pendiente":"Pagada"}));s.push({Fecha:"","C\xf3digo Socio":"",Socio:"",Concepto:"TOTAL",Monto:e.reduce((e,s)=>e+s.monto,0),Comisión:e.reduce((e,s)=>e+s.comisionCobrador,0),Estado:""});let t=P.utils.json_to_sheet(s),a=P.utils.book_new();P.utils.book_append_sheet(a,t,`Comisiones ${_}`),t["!cols"]=[{wch:12},{wch:12},{wch:30},{wch:25},{wch:15},{wch:15},{wch:12}];let r=`Comisiones_${k.nombres}_${k.apellidos}_${_}_${new Date().toISOString().split("T")[0]}.xlsx`;P.writeFile(a,r)},className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm whitespace-nowrap",title:"Exportar a Excel",children:[a.jsx(u.Z,{className:"w-4 h-4"}),"Excel"]}),(0,a.jsxs)("button",{onClick:ei,className:"flex items-center gap-1 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm whitespace-nowrap",title:"Exportar a PDF",children:[a.jsx(b.Z,{className:"w-4 h-4"}),"PDF"]})]})]}),"pendientes"===_&&a.jsx(a.Fragment,{children:(()=>{let e=F?en(F.pagosPendientes):[],s=ea(e),t=er(e.length);return e.length>0?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-2 px-2 w-8"}),a.jsx("th",{className:"text-left py-2 px-3",children:"Fecha"}),a.jsx("th",{className:"text-left py-2 px-3",children:"Socio"}),a.jsx("th",{className:"text-left py-2 px-3",children:"Concepto"}),a.jsx("th",{className:"text-right py-2 px-3",children:"Monto"}),a.jsx("th",{className:"text-right py-2 px-3",children:"Comisi\xf3n"})]})}),a.jsx("tbody",{children:s.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"py-2 px-2",children:a.jsx("button",{onClick:()=>{var s;return s=e.id,void E(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},className:"text-primary-600 hover:text-primary-800",children:$.has(e.id)?a.jsx(j,{className:"w-5 h-5"}):a.jsx(f,{className:"w-5 h-5"})})}),a.jsx("td",{className:"py-2 px-3",children:(0,l.p6)(e.fecha)}),(0,a.jsxs)("td",{className:"py-2 px-3",children:[e.socio.codigo," - ",e.socio.nombres," ",e.socio.apellidos]}),a.jsx("td",{className:"py-2 px-3",children:e.concepto}),a.jsx("td",{className:"py-2 px-3 text-right font-medium",children:(0,l.xG)(e.monto)}),a.jsx("td",{className:"py-2 px-3 text-right font-medium text-green-600",children:(0,l.xG)(e.comisionCobrador)})]},e.id))}),a.jsx("tfoot",{children:(0,a.jsxs)("tr",{className:"border-t-2 bg-gray-50",children:[a.jsx("td",{className:"py-3 px-2"}),(0,a.jsxs)("td",{className:"py-3 px-3 font-semibold text-gray-700",colSpan:3,children:["Total (",e.length," pago",1!==e.length?"s":"",")",U&&F&&e.length!==F.pagosPendientes.length&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(filtrado de ",F.pagosPendientes.length,")"]})]}),a.jsx("td",{className:"py-3 px-3 text-right font-bold",children:(0,l.xG)(e.reduce((e,s)=>e+s.monto,0))}),a.jsx("td",{className:"py-3 px-3 text-right font-bold text-green-600",children:(0,l.xG)(e.reduce((e,s)=>e+s.comisionCobrador,0))})]})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["P\xe1gina ",V," de ",t," • ",e.length," comisiones"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Filas:"}),(0,a.jsxs)("select",{value:K,onChange:e=>{W(Number(e.target.value)),Q(1)},className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-primary-500",children:[a.jsx("option",{value:20,children:"20"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"}),a.jsx("option",{value:200,children:"200"})]}),a.jsx("button",{onClick:()=>Q(e=>Math.max(1,e-1)),disabled:V<=1,className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(v,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Q(e=>Math.min(t,e+1)),disabled:V>=t,className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(N,{className:"w-4 h-4"})})]})]})]}):a.jsx("div",{className:"text-gray-500 text-center py-8",children:U?`No se encontraron comisiones pendientes que coincidan con "${U}"`:"No hay comisiones pendientes"})})()}),"pagadas"===_&&a.jsx(a.Fragment,{children:(()=>{let e=F&&F.pagosPagados?en(F.pagosPagados):[],s=ea(e),t=er(e.length);return e.length>0?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-2 px-3",children:"Fecha"}),a.jsx("th",{className:"text-left py-2 px-3",children:"Socio"}),a.jsx("th",{className:"text-left py-2 px-3",children:"Concepto"}),a.jsx("th",{className:"text-right py-2 px-3",children:"Monto"}),a.jsx("th",{className:"text-right py-2 px-3",children:"Comisi\xf3n"}),a.jsx("th",{className:"text-center py-2 px-3",children:"Estado"})]})}),a.jsx("tbody",{children:s.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"py-2 px-3",children:(0,l.p6)(e.fecha)}),(0,a.jsxs)("td",{className:"py-2 px-3",children:[e.socio.codigo," - ",e.socio.nombres," ",e.socio.apellidos]}),a.jsx("td",{className:"py-2 px-3",children:e.concepto}),a.jsx("td",{className:"py-2 px-3 text-right font-medium",children:(0,l.xG)(e.monto)}),a.jsx("td",{className:"py-2 px-3 text-right font-medium text-blue-600",children:(0,l.xG)(e.comisionCobrador)}),a.jsx("td",{className:"py-2 px-3 text-center",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Pagada"})})]},e.id))}),a.jsx("tfoot",{children:(0,a.jsxs)("tr",{className:"border-t-2 bg-gray-50",children:[(0,a.jsxs)("td",{className:"py-3 px-3 font-semibold text-gray-700",colSpan:3,children:["Total (",e.length," pago",1!==e.length?"s":"",")",U&&F&&F.pagosPagados&&e.length!==F.pagosPagados.length&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(filtrado de ",F.pagosPagados.length,")"]})]}),a.jsx("td",{className:"py-3 px-3 text-right font-bold",children:(0,l.xG)(e.reduce((e,s)=>e+s.monto,0))}),a.jsx("td",{className:"py-3 px-3 text-right font-bold text-blue-600",children:(0,l.xG)(e.reduce((e,s)=>e+s.comisionCobrador,0))}),a.jsx("td",{className:"py-3 px-3"})]})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["P\xe1gina ",V," de ",t," • ",e.length," comisiones"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Filas:"}),(0,a.jsxs)("select",{value:K,onChange:e=>{W(Number(e.target.value)),Q(1)},className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-primary-500",children:[a.jsx("option",{value:20,children:"20"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"}),a.jsx("option",{value:200,children:"200"})]}),a.jsx("button",{onClick:()=>Q(e=>Math.max(1,e-1)),disabled:V<=1,className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(v,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Q(e=>Math.min(t,e+1)),disabled:V>=t,className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(N,{className:"w-4 h-4"})})]})]})]}):a.jsx("div",{className:"text-gray-500 text-center py-8",children:U?`No se encontraron comisiones pagadas que coincidan con "${U}"`:"No hay comisiones pagadas registradas"})})()})]})}),L&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Liquidar Comisiones"}),a.jsx("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(w.Z,{className:"w-5 h-5"})})]}),A&&a.jsx("div",{className:`mb-4 p-3 rounded ${A.includes("Error")?"bg-red-50 text-red-800 border border-red-200":"bg-green-50 text-green-800 border border-green-200"}`,children:A}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-gray-600",children:"Pagos seleccionados:"}),a.jsx("span",{className:"font-medium",children:$.size})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Total a liquidar:"}),a.jsx("span",{className:"font-bold text-green-600",children:(0,l.xG)(eo)})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forma de Pago *"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:G.formaPago,onChange:e=>O(s=>({...s,formaPago:e.target.value})),children:[a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"cheque",children:"Cheque"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero de Recibo"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:G.numeroRecibo,onChange:e=>O(s=>({...s,numeroRecibo:e.target.value})),placeholder:"Ej: REC-001"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),a.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,value:G.observaciones,onChange:e=>O(s=>({...s,observaciones:e.target.value})),placeholder:"Notas adicionales..."})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:()=>M(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:I,children:"Cancelar"}),a.jsx("button",{onClick:es,disabled:I,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:I?"Procesando...":"Confirmar Liquidaci\xf3n"})]})]})]})})]})}):a.jsx(r.Z,{children:(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-500",children:"Cobrador no encontrado"}),a.jsx(C.default,{href:"/admin/cobradores",className:"text-primary-600 hover:text-primary-800 mt-4 inline-block",children:"← Volver a Cobradores"})]})})}},60068:(e,s,t)=>{"use strict";t.d(s,{D2:()=>a,LJ:()=>i,_4:()=>n,tF:()=>r});let a={name:"America/Asuncion",offsetHours:-3,description:"Paraguay (UTC-3)"};function r(){let e=new Date,s=Object.fromEntries(new Intl.DateTimeFormat("en-CA",{timeZone:a.name,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(e).map(e=>[e.type,e.value]));return new Date(parseInt(s.year),parseInt(s.month)-1,parseInt(s.day),parseInt(s.hour),parseInt(s.minute),parseInt(s.second))}function i(e){if(e){let s=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${s}-${t}-${a}`}{let e=new Date;return new Intl.DateTimeFormat("en-CA",{timeZone:a.name,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}}function n(e,s=!1){let t;if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){let[s,a,r]=e.split("-").map(Number);t=new Date(s,a-1,r)}else t=new Date(e)}else t=e;if(s)return t.toLocaleString("es-PY",{timeZone:a.name,day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});if(!("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)))return t.toLocaleDateString("es-PY",{timeZone:a.name,day:"2-digit",month:"2-digit",year:"numeric"});{let[s,t,a]=e.split("-");return`${a.padStart(2,"0")}/${t.padStart(2,"0")}/${s}`}}},77863:(e,s,t)=>{"use strict";t.d(s,{Fw:()=>n,Ji:()=>o,m9:()=>l,p6:()=>i,sQ:()=>c,sU:()=>d,xG:()=>r});var a=t(60068);function r(e){return new Intl.NumberFormat("es-PY",{style:"currency",currency:"PYG",minimumFractionDigits:0}).format(e)}function i(e){return(0,a._4)(e,!1)}function n(e){let s=(0,a.tF)(),t=new Date(new Date(e).getTime()+108e5),r=s.getUTCFullYear()-t.getUTCFullYear(),i=s.getUTCMonth()-t.getUTCMonth();return(i<0||0===i&&s.getUTCDate()<t.getUTCDate())&&r--,r}function o(){return(0,a.LJ)()}function l(e){let s=e.replace(/\D/g,"");return s?s.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function d(e){return parseInt(e.replace(/\./g,""))||0}function c(e){return Math.round(e)}},86333:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},99102:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]])},36283:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},41137:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},70003:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},88307:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},85571:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]])},13027:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]])},79635:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},94019:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},70068:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`C:\Garden\app\admin\cobradores\[id]\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,4471,6837,5603,8750],()=>t(59232));module.exports=a})();