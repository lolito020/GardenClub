(()=>{var e={};e.id=7798,e.ids=[7798],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16593:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),a(34672),a(11506),a(35866);var s=a(23191),t=a(88716),i=a(37922),n=a.n(i),l=a(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(r,o);let d=["",{children:["admin",{children:["usuarios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,34672)),"C:\\Garden\\app\\admin\\usuarios\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Garden\\app\\admin\\usuarios\\page.tsx"],u="/admin/usuarios/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/admin/usuarios/page",pathname:"/admin/usuarios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},50055:(e,r,a)=>{Promise.resolve().then(a.bind(a,97412))},97412:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>l});var s=a(10326),t=a(64447),i=a(17577),n=a(35047);function l(){let e=(0,n.useRouter)(),[r,a]=(0,i.useState)([]),[l,o]=(0,i.useState)(""),[d,c]=(0,i.useState)(""),[u,m]=(0,i.useState)("admin"),[p,x]=(0,i.useState)(""),[h,g]=(0,i.useState)(""),[b,j]=(0,i.useState)(!1);async function y(){try{let e=await fetch("/api/users"),r=await e.json();a(Array.isArray(r)?r:[])}catch(e){console.error("Error loading users:",e),a([])}}async function f(a){a.preventDefault(),g(""),j(!0);try{let a=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,nombre:d,rol:u,password:p})}),s=await a.json();s.ok?(o(""),c(""),x(""),await y(),g("Usuario creado exitosamente"),0===r.length&&setTimeout(()=>{g("Primer usuario creado. Redirigiendo al login..."),setTimeout(()=>{e.push("/login")},1500)},1e3)):g(s.msg||"Error al crear usuario")}catch(e){g("Error de conexi\xf3n")}finally{j(!1)}}return s.jsx(t.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Gesti\xf3n de Usuarios"}),0===r.length&&(0,s.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"\xa1Bienvenido!"}),s.jsx("p",{className:"text-blue-700",children:"No hay usuarios registrados. Crea el primer usuario (Administrador) para activar el sistema de login."})]}),h&&s.jsx("div",{className:`p-4 rounded-lg ${h.includes("exitosamente")||h.includes("creado")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:h}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:0===r.length?"Crear Primer Usuario (Administrador)":"Crear Nuevo Usuario"}),(0,s.jsxs)("form",{onSubmit:f,className:"space-y-4 max-w-lg",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),s.jsx("input",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ej: Juan P\xe9rez",value:d,onChange:e=>c(e.target.value),required:!0,disabled:b})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"admin@club.py",type:"email",value:l,onChange:e=>o(e.target.value),required:!0,disabled:b})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),(0,s.jsxs)("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:u,onChange:e=>m(e.target.value),disabled:b,children:[s.jsx("option",{value:"admin",children:"Administrador"}),s.jsx("option",{value:"caja",children:"Caja"}),s.jsx("option",{value:"cobranzas",children:"Cobranzas"}),s.jsx("option",{value:"consulta",children:"Consulta"}),s.jsx("option",{value:"porteria",children:"Porter\xeda"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a"}),s.jsx("input",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"M\xednimo 6 caracteres",type:"password",value:p,onChange:e=>x(e.target.value),required:!0,minLength:6,disabled:b})]}),s.jsx("button",{type:"submit",disabled:b,className:"bg-primary-500 text-white px-6 py-2 rounded-lg hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Creando...":"Crear Usuario"})]})]}),r.length>0&&s.jsx("div",{className:"bg-white rounded-lg shadow",children:(0,s.jsxs)("div",{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Usuarios Registrados"}),s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2",children:"Nombre"}),s.jsx("th",{className:"text-left py-2",children:"Email"}),s.jsx("th",{className:"text-center py-2",children:"Rol"})]})}),s.jsx("tbody",{children:r.map(e=>(0,s.jsxs)("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2",children:e.nombre}),s.jsx("td",{className:"py-2",children:e.email}),s.jsx("td",{className:"py-2 text-center",children:s.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm",children:e.rol})})]},e.id))})]})})]})})]})})}},34672:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`C:\Garden\app\admin\usuarios\page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),s=r.X(0,[8948,4471,6837,8750],()=>a(16593));module.exports=s})();