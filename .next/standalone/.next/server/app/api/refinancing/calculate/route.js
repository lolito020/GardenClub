"use strict";(()=>{var e={};e.id=3849,e.ids=[3849],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},31216:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>d,staticGenerationAsyncStorage:()=>p});var n={};r.r(n),r.d(n,{POST:()=>u});var a=r(49303),o=r(88716),i=r(60670),s=r(87070);async function u(e){try{let{principal:t,downPaymentPercent:r,installments:n,startDueDate:a}=await e.json();if(!t||!n||!a)return s.NextResponse.json({error:"Faltan par\xe1metros requeridos"},{status:400});let o=Math.round(r/100*t),i=t-o,u=Math.round(i/n),l=[],c=new Date(a);for(let e=1;e<=n;e++){let t=e===n?i-u*(n-1):u;l.push({number:e,amount:t,dueDate:c.toISOString().split("T")[0],status:"PENDING"}),c=function(e,t){let r=new Date(e);return r.setMonth(r.getMonth()+1),r}(c,0)}return s.NextResponse.json({principal:t,downPaymentPercent:r,downPaymentAmount:o,totalInInstallments:i,installmentAmount:u,installments:n,schedule:l,totalFinanced:t,startDueDate:a})}catch(e){return console.error("Error in refinancing calculation:",e),s.NextResponse.json({error:"Error interno del servidor"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/refinancing/calculate/route",pathname:"/api/refinancing/calculate",filename:"route",bundlePath:"app/api/refinancing/calculate/route"},resolvedPagePath:"C:\\Garden\\app\\api\\refinancing\\calculate\\route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:p,serverHooks:d}=l,g="/api/refinancing/calculate/route";function f(){return(0,i.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:p})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[8948,5972],()=>r(31216));module.exports=n})();