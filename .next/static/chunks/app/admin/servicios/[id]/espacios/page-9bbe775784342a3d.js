(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6488],{12435:function(e,t,a){Promise.resolve().then(a.bind(a,24573))},24573:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(57437),i=a(69690),s=a(17985),n=a(2265),c=a(99376),o=a(94508),l=a(32660),d=a(99397),u=a(26034),m=a(38866),x=a(94630),p=a(18930),h=a(27648);function g(){let e=(0,c.useParams)(),t=(0,c.useRouter)(),a=e.id,[g,y]=(0,n.useState)(null),[f,v]=(0,n.useState)([]),[b,j]=(0,n.useState)(!0),[N,w]=(0,n.useState)(!1),[k,C]=(0,n.useState)(null),[E,Z]=(0,n.useState)(!1),[S,T]=(0,n.useState)({nombre:"",descripcion:"",precioBaseHora:"",garantia:"",capacidad:"",activo:!0});async function D(){try{let e=await s.L.authenticatedFetch("/api/services/".concat(a)),r=await e.json();if(!e.ok||!r.permiteAgendamiento){t.push("/admin/servicios");return}y(r);let i=await s.L.authenticatedFetch("/api/venues"),n=await i.json();v(Array.isArray(n)?n:[])}catch(e){console.error("Error loading data:",e)}finally{j(!1)}}function H(e){e?(C(e),T({nombre:e.nombre,descripcion:e.descripcion||"",precioBaseHora:e.precioBaseHora.toString(),garantia:e.garantia.toString(),capacidad:e.capacidad.toString(),activo:e.activo})):(C(null),T({nombre:"",descripcion:"",precioBaseHora:"",garantia:"0",capacidad:"1",activo:!0})),w(!0)}function F(){w(!1),C(null),T({nombre:"",descripcion:"",precioBaseHora:"",garantia:"0",capacidad:"1",activo:!0})}async function P(){if(!S.nombre||!S.precioBaseHora){alert("Nombre y precio por hora son obligatorios");return}Z(!0);try{let e={nombre:S.nombre,descripcion:S.descripcion,precioBaseHora:Number(S.precioBaseHora),garantia:Number(S.garantia)||0,capacidad:Number(S.capacidad)||1,activo:S.activo},t=k?"/api/venues/".concat(k.id):"/api/venues",a=await s.L.authenticatedFetch(t,{method:k?"PATCH":"POST",body:JSON.stringify(e)}),r=await a.json();a.ok?(F(),await D()):alert(r.msg||"Error al guardar el espacio")}catch(e){console.error("Error saving venue:",e),alert("Error al guardar el espacio")}finally{Z(!1)}}async function A(e,t){try{(await s.L.authenticatedFetch("/api/venues/".concat(e),{method:"PATCH",body:JSON.stringify({activo:!t})})).ok&&await D()}catch(e){console.error("Error toggling venue:",e)}}async function L(e,t){if(confirm('\xbfEst\xe1s seguro de que quieres eliminar el espacio "'.concat(t,'"?')))try{let t=await s.L.authenticatedFetch("/api/venues/".concat(e),{method:"DELETE"});if(t.ok)await D(),alert("Espacio eliminado correctamente");else{let e=await t.json();alert(e.msg||"Error al eliminar el espacio")}}catch(e){console.error("Error deleting venue:",e),alert("Error al eliminar el espacio")}}return((0,n.useEffect)(()=>{D()},[a]),b)?(0,r.jsx)(i.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):g?(0,r.jsxs)(i.Z,{children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[(0,r.jsx)(h.default,{href:"/admin/servicios",className:"hover:text-primary-600",children:"Servicios"}),(0,r.jsx)("span",{children:"/"}),(0,r.jsx)("span",{className:"font-medium",children:g.nombre}),(0,r.jsx)("span",{children:"/"}),(0,r.jsx)("span",{children:"Espacios"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900",children:["Espacios para ",g.nombre]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Administra los espacios f\xedsicos donde se puede reservar este servicio"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)(h.default,{href:"/admin/servicios",className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"}),"Volver"]}),(0,r.jsxs)("button",{onClick:()=>H(),className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4"}),"Nuevo Espacio"]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:f.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Espacios"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:f.filter(e=>e.activo).length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Espacios Activos"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:f.reduce((e,t)=>e+t.capacidad,0)}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Capacidad Total"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Espacio"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio/Hora"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Garant\xeda"}),(0,r.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacidad"}),(0,r.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.nombre}),e.descripcion&&(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.descripcion})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(0,o.xG)(e.precioBaseHora)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:(0,o.xG)(e.garantia)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,r.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200",children:[e.capacidad," ",1===e.capacidad?"persona":"personas"]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,r.jsx)("button",{onClick:()=>A(e.id,e.activo),className:"p-1 rounded transition-colors ".concat(e.activo?"text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"),children:e.activo?(0,r.jsx)(u.Z,{className:"w-6 h-6"}):(0,r.jsx)(m.Z,{className:"w-6 h-6"})})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>H(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar espacio",children:(0,r.jsx)(x.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>L(e.id,e.nombre),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar espacio",children:(0,r.jsx)(p.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})}),0===f.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-500 mb-4",children:"No hay espacios configurados para este servicio"}),(0,r.jsxs)("button",{onClick:()=>H(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-600 bg-primary-100 hover:bg-primary-200",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Crear primer espacio"]})]})]})]}),N&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-lg bg-white rounded-lg shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:k?"Editar Espacio":"Nuevo Espacio"}),(0,r.jsx)("button",{onClick:F,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Espacio *"}),(0,r.jsx)("input",{type:"text",value:S.nombre,onChange:e=>T(t=>({...t,nombre:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ej: Cancha de Tenis 1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,r.jsx)("textarea",{value:S.descripcion,onChange:e=>T(t=>({...t,descripcion:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Descripci\xf3n opcional del espacio"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio por Hora (Gs.) *"}),(0,r.jsx)("input",{type:"number",value:S.precioBaseHora,onChange:e=>T(t=>({...t,precioBaseHora:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"50000"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Garant\xeda (Gs.)"}),(0,r.jsx)("input",{type:"number",value:S.garantia,onChange:e=>T(t=>({...t,garantia:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"100000"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacidad (personas)"}),(0,r.jsx)("input",{type:"number",min:"1",value:S.capacidad,onChange:e=>T(t=>({...t,capacidad:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"4"})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:S.activo,onChange:e=>T(t=>({...t,activo:e.target.checked})),className:"w-4 h-4 text-primary-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Espacio activo"})]})})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 p-6 border-t",children:[(0,r.jsx)("button",{onClick:F,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,r.jsx)("button",{onClick:P,disabled:E,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50",children:E?"Guardando...":k?"Actualizar":"Crear"})]})]})})]}):(0,r.jsx)(i.Z,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-500",children:"Servicio no encontrado o no permite agendamiento"}),(0,r.jsx)(h.default,{href:"/admin/servicios",className:"mt-4 text-primary-600 hover:underline",children:"Volver a Servicios"})]})})}},45365:function(e,t,a){"use strict";a.d(t,{D2:function(){return r},LJ:function(){return s},_4:function(){return n},tF:function(){return i}});let r={name:"America/Asuncion",offsetHours:-3,description:"Paraguay (UTC-3)"};function i(){let e=new Date,t=Object.fromEntries(new Intl.DateTimeFormat("en-CA",{timeZone:r.name,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(e).map(e=>[e.type,e.value]));return new Date(parseInt(t.year),parseInt(t.month)-1,parseInt(t.day),parseInt(t.hour),parseInt(t.minute),parseInt(t.second))}function s(e){if(e){let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r)}{let e=new Date;return new Intl.DateTimeFormat("en-CA",{timeZone:r.name,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}}function n(e){let t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){let[a,r,i]=e.split("-").map(Number);t=new Date(a,r-1,i)}else t=new Date(e)}else t=e;if(a)return t.toLocaleString("es-PY",{timeZone:r.name,day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});if(!("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)))return t.toLocaleDateString("es-PY",{timeZone:r.name,day:"2-digit",month:"2-digit",year:"numeric"});{let[t,a,r]=e.split("-");return"".concat(r.padStart(2,"0"),"/").concat(a.padStart(2,"0"),"/").concat(t)}}},94508:function(e,t,a){"use strict";a.d(t,{Fw:function(){return n},Ji:function(){return c},m9:function(){return o},p6:function(){return s},sQ:function(){return d},sU:function(){return l},xG:function(){return i}});var r=a(45365);function i(e){return new Intl.NumberFormat("es-PY",{style:"currency",currency:"PYG",minimumFractionDigits:0}).format(e)}function s(e){return(0,r._4)(e,!1)}function n(e){let t=(0,r.tF)(),a=new Date(new Date(e).getTime()+108e5),i=t.getUTCFullYear()-a.getUTCFullYear(),s=t.getUTCMonth()-a.getUTCMonth();return(s<0||0===s&&t.getUTCDate()<a.getUTCDate())&&i--,i}function c(){return(0,r.LJ)()}function o(e){let t=e.replace(/\D/g,"");return t?t.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function l(e){return parseInt(e.replace(/\./g,""))||0}function d(e){return Math.round(e)}},32660:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},94630:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},99397:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},38866:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]])},26034:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]])},18930:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[3643,9690,2971,2117,1744],function(){return e(e.s=12435)}),_N_E=e.O()}]);