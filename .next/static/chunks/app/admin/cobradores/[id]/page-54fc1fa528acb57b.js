(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2217,6919],{20067:function(){},72061:function(){},2769:function(e,t,s){Promise.resolve().then(s.bind(s,68838))},68838:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var a=s(57437),n=s(69690),r=s(17985),i=s(2265),o=s(99376),l=s(94508),c=s(32660),d=s(38866),x=s(26034),m=s(94630),h=s(92369),u=s(90740),g=s(73247),p=s(61649),y=s(48736),b=s(39763);let f=(0,b.Z)("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),j=(0,b.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),v=(0,b.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),N=(0,b.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var w=s(32489),C=s(27648),k=s(2093);function S(){var e,t;let b=(0,o.useParams)(),[S,P]=(0,i.useState)(null),[F,Z]=(0,i.useState)(null),[D,E]=(0,i.useState)(!0),[T,L]=(0,i.useState)(new Set),[M,O]=(0,i.useState)(!1),[I,R]=(0,i.useState)("pendientes"),[_,q]=(0,i.useState)({formaPago:"efectivo",numeroRecibo:"",observaciones:""}),[G,z]=(0,i.useState)(!1),[A,U]=(0,i.useState)(""),[Y,H]=(0,i.useState)(""),[B,J]=(0,i.useState)(""),[V,X]=(0,i.useState)(""),[$,Q]=(0,i.useState)(1),[K,W]=(0,i.useState)(50);async function ee(){try{let[e,t]=await Promise.all([r.L.authenticatedFetch("/api/collectors/".concat(b.id)),r.L.authenticatedFetch("/api/collectors/".concat(b.id,"/commissions"))]),[s,a]=await Promise.all([e.json(),t.json()]);e.ok&&P(s),t.ok&&Z(a)}catch(e){console.error("Error loading collector data:",e)}finally{E(!1)}}async function et(){if(0===T.size){U("Selecciona al menos un pago");return}z(!0),U("");try{let e=await r.L.authenticatedFetch("/api/commission-payments",{method:"POST",body:JSON.stringify({cobradorId:b.id,paymentIds:Array.from(T),formaPago:_.formaPago,numeroRecibo:_.numeroRecibo||void 0,observaciones:_.observaciones||void 0})}),t=await e.json();e.ok?(O(!1),L(new Set),q({formaPago:"efectivo",numeroRecibo:"",observaciones:""}),await ee()):U(t.error||t.msg||"Error al procesar liquidaci\xf3n")}catch(e){U("Error de conexi\xf3n")}finally{z(!1)}}async function es(){if(S)try{(await r.L.authenticatedFetch("/api/collectors/".concat(S.id),{method:"PATCH",body:JSON.stringify({activo:!S.activo})})).ok&&P(e=>e?{...e,activo:!e.activo}:null)}catch(e){console.error("Error toggling collector:",e)}}(0,i.useEffect)(()=>{b.id&&ee()},[b.id]),(0,i.useEffect)(()=>{Q(1)},[Y,B,V,I]);let ea=e=>{let t=($-1)*K;return e.slice(t,t+K)},en=e=>Math.ceil(e/K)||1,er=async()=>{if(!F||!S)return;let e="pendientes"===I?ei(F.pagosPendientes):ei(F.pagosPagados||[]);if(0===e.length){alert("No hay datos para exportar");return}let t=await s.e(4346).then(s.t.bind(s,62271,23)),a=await s.e(5950).then(s.t.bind(s,29,23));t.default.vfs=a.default.vfs;let n=e=>e.toLocaleString("de-DE",{minimumFractionDigits:0}),r=e.map(e=>[(0,l.p6)(e.fecha),e.socio.codigo,"".concat(e.socio.nombres," ").concat(e.socio.apellidos),e.concepto,n(e.monto),n(e.comisionCobrador)]);r.push(["","","","TOTAL",n(e.reduce((e,t)=>e+t.monto,0)),n(e.reduce((e,t)=>e+t.comisionCobrador,0))]);let i={pageOrientation:"landscape",pageSize:"A4",content:[{text:"Reporte de Comisiones",style:"header",alignment:"center",margin:[0,0,0,10]},{text:"Cobrador: ".concat(S.nombres," ").concat(S.apellidos),style:"subheader",margin:[0,0,0,2]},{text:"C\xf3digo: ".concat(S.codigo),style:"subheader",margin:[0,0,0,2]},{text:"Estado: ".concat("pendientes"===I?"Comisiones Pendientes":"Comisiones Pagadas"),style:"subheader",margin:[0,0,0,2]},{text:"Fecha: ".concat(new Date().toLocaleDateString("es-PY")),style:"subheader",margin:[0,0,0,10]},{table:{headerRows:1,widths:["auto","auto","*","*","auto","auto"],body:[["Fecha","C\xf3digo Socio","Socio","Concepto","Monto","Comisi\xf3n"],...r]},layout:"lightHorizontalLines"}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:10,margin:[0,2,0,2]}},defaultStyle:{fontSize:8}},o="Comisiones_".concat(S.nombres,"_").concat(S.apellidos,"_").concat(I,"_").concat(new Date().toISOString().split("T")[0],".pdf");t.default.createPdf(i).download(o)},ei=e=>e.filter(e=>{if(Y.trim()){var t,s,a,n,r,i,o,l,c;let d=Y.toLowerCase();if(!((null===(t=e.concepto)||void 0===t?void 0:t.toLowerCase().includes(d))||(null===(a=e.socio)||void 0===a?void 0:null===(s=a.nombres)||void 0===s?void 0:s.toLowerCase().includes(d))||(null===(r=e.socio)||void 0===r?void 0:null===(n=r.apellidos)||void 0===n?void 0:n.toLowerCase().includes(d))||(null===(o=e.socio)||void 0===o?void 0:null===(i=o.codigo)||void 0===i?void 0:i.toLowerCase().includes(d))||(null===(l=e.monto)||void 0===l?void 0:l.toString().includes(d))||(null===(c=e.comisionCobrador)||void 0===c?void 0:c.toString().includes(d))))return!1}if(B&&new Date(e.fecha)<new Date(B))return!1;if(V){let t=new Date(e.fecha),s=new Date(V);if(s.setHours(23,59,59,999),t>s)return!1}return!0}),eo=(null==F?void 0:F.pagosPendientes.filter(e=>T.has(e.id)).reduce((e,t)=>e+t.comisionCobrador,0))||0;return D?(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):S?(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(C.default,{href:"/admin/cobradores",className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(c.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900",children:[S.nombres," ",S.apellidos]}),(0,a.jsx)("p",{className:"text-gray-600",children:S.codigo})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:es,className:"px-4 py-2 rounded-lg flex items-center gap-2 ".concat(S.activo?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"),children:[S.activo?(0,a.jsx)(d.Z,{className:"w-4 h-4"}):(0,a.jsx)(x.Z,{className:"w-4 h-4"}),S.activo?"Desactivar":"Activar"]}),(0,a.jsxs)(C.default,{href:"/admin/cobradores/".concat(S.id,"/editar"),className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"Editar"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat(S.activo?"bg-green-500":"bg-gray-500")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Estado"}),(0,a.jsx)("div",{className:"font-medium",children:S.activo?"Activo":"Inactivo"})]})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xl font-bold text-green-600",children:(0,l.xG)((null==F?void 0:F.totales.generados)||0)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Generado"})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xl font-bold text-orange-600",children:(0,l.xG)((null==F?void 0:F.totales.pendientes)||0)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pendiente"})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xl font-bold text-blue-600",children:(0,l.xG)((null==F?void 0:F.totales.pagados)||0)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pagado"})]})})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-4 bg-white rounded-lg shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 mr-2"}),"Datos Personales"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Nombres"}),(0,a.jsx)("div",{className:"font-medium",children:S.nombres})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Apellidos"}),(0,a.jsx)("div",{className:"font-medium",children:S.apellidos})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"C\xe9dula"}),(0,a.jsx)("div",{className:"font-medium",children:S.ci})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Tipo de Cobrador"}),(0,a.jsx)("div",{className:"font-medium",children:(e=S.tipoCobrador,(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({CLUB:"bg-gray-100 text-gray-800",EXTERNO:"bg-purple-100 text-purple-800",PROFESOR:"bg-blue-100 text-blue-800"}[e]),children:{CLUB:"Garden Club",EXTERNO:"Externo",PROFESOR:"Profesor"}[e]}))})]}),("EXTERNO"===S.tipoCobrador||"PROFESOR"===S.tipoCobrador)&&S.comisionPorDefecto&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Comisi\xf3n por Defecto"}),(0,a.jsxs)("div",{className:"font-medium",children:[S.comisionPorDefecto,"%"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Fecha de Ingreso"}),(0,a.jsx)("div",{className:"font-medium",children:(0,l.p6)(S.fechaIngreso)})]}),S.telefono&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Tel\xe9fono"}),(0,a.jsx)("div",{className:"font-medium",children:S.telefono})]}),S.celular&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Celular"}),(0,a.jsx)("div",{className:"font-medium",children:S.celular})]}),S.email&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Email"}),(0,a.jsx)("div",{className:"font-medium",children:S.email})]}),S.direccion&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Direcci\xf3n"}),(0,a.jsx)("div",{className:"font-medium",children:S.direccion})]})]})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-1 bg-white rounded-lg shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:"Informaci\xf3n de Pago"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 block mb-1",children:"Forma de Pago"}),(t=S.formaPago,(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({efectivo:"bg-green-100 text-green-800",transferencia:"bg-blue-100 text-blue-800",cheque:"bg-orange-100 text-orange-800"}[t]||"bg-gray-100 text-gray-800"),children:{efectivo:"Efectivo",transferencia:"Transferencia",cheque:"Cheque"}[t]||t}))]}),S.cuentaBanco&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 block mb-1",children:"Cuenta Bancaria"}),(0,a.jsx)("span",{className:"font-medium text-sm break-all",children:S.cuentaBanco})]})]})]})})]})}),"CLUB"!==S.tipoCobrador&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold flex items-center",children:"Gesti\xf3n de Comisiones"}),F&&F.pagosPendientes.length>0&&"pendientes"===I&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:function(){F&&L(new Set(F.pagosPendientes.map(e=>e.id)))},className:"text-sm text-primary-600 hover:text-primary-800",children:"Seleccionar Todos"}),T.size>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-gray-300",children:"|"}),(0,a.jsx)("button",{onClick:function(){L(new Set)},className:"text-sm text-gray-600 hover:text-gray-800",children:"Limpiar"}),(0,a.jsx)("span",{className:"text-gray-300",children:"|"}),(0,a.jsxs)("button",{onClick:()=>O(!0),className:"text-sm bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:["Liquidar Seleccionados (",T.size,") - ",(0,l.xG)(eo)]})]})]})]}),(0,a.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,a.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,a.jsxs)("button",{onClick:()=>R("pendientes"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("pendientes"===I?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Comisiones Pendientes",F&&F.pagosPendientes.length>0&&(0,a.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:F.pagosPendientes.length})]}),(0,a.jsxs)("button",{onClick:()=>R("pagadas"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("pagadas"===I?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Comisiones Pagadas",F&&F.pagosPagados&&F.pagosPagados.length>0&&(0,a.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:F.pagosPagados.length})]})]})}),(0,a.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"date",value:B,onChange:e=>J(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Desde"}),(0,a.jsx)("span",{className:"text-gray-400",children:"-"}),(0,a.jsx)("input",{type:"date",value:V,onChange:e=>X(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Hasta"}),(0,a.jsx)("button",{onClick:()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),s=new Date(e.getFullYear(),e.getMonth()+1,0);J(t.toISOString().split("T")[0]),X(s.toISOString().split("T")[0])},className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs",children:"Mes actual"}),(0,a.jsx)("button",{onClick:()=>{let e=new Date,t=new Date(e.getFullYear(),0,1),s=new Date(e.getFullYear(),11,31);J(t.toISOString().split("T")[0]),X(s.toISOString().split("T")[0])},className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs",children:"Este a\xf1o"}),(0,a.jsx)("button",{onClick:()=>{H(""),J(""),X(""),Q(1)},className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs text-gray-600",children:"Limpiar filtros"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",value:Y,onChange:e=>H(e.target.value),placeholder:"Buscar por concepto, socio o monto...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm"})]}),(0,a.jsxs)("button",{onClick:()=>{if(!F||!S)return;let e="pendientes"===I?ei(F.pagosPendientes):ei(F.pagosPagados||[]);if(0===e.length){alert("No hay datos para exportar");return}let t=e.map(e=>({Fecha:(0,l.p6)(e.fecha),"C\xf3digo Socio":e.socio.codigo,Socio:"".concat(e.socio.nombres," ").concat(e.socio.apellidos),Concepto:e.concepto,Monto:e.monto,Comisión:e.comisionCobrador,Estado:"pendientes"===I?"Pendiente":"Pagada"}));t.push({Fecha:"","C\xf3digo Socio":"",Socio:"",Concepto:"TOTAL",Monto:e.reduce((e,t)=>e+t.monto,0),Comisión:e.reduce((e,t)=>e+t.comisionCobrador,0),Estado:""});let s=k.utils.json_to_sheet(t),a=k.utils.book_new();k.utils.book_append_sheet(a,s,"Comisiones ".concat(I)),s["!cols"]=[{wch:12},{wch:12},{wch:30},{wch:25},{wch:15},{wch:15},{wch:12}];let n="Comisiones_".concat(S.nombres,"_").concat(S.apellidos,"_").concat(I,"_").concat(new Date().toISOString().split("T")[0],".xlsx");k.writeFile(a,n)},className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm whitespace-nowrap",title:"Exportar a Excel",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),"Excel"]}),(0,a.jsxs)("button",{onClick:er,className:"flex items-center gap-1 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm whitespace-nowrap",title:"Exportar a PDF",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),"PDF"]})]})]}),"pendientes"===I&&(0,a.jsx)(a.Fragment,{children:(()=>{let e=F?ei(F.pagosPendientes):[],t=ea(e),s=en(e.length);return e.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left py-2 px-2 w-8"}),(0,a.jsx)("th",{className:"text-left py-2 px-3",children:"Fecha"}),(0,a.jsx)("th",{className:"text-left py-2 px-3",children:"Socio"}),(0,a.jsx)("th",{className:"text-left py-2 px-3",children:"Concepto"}),(0,a.jsx)("th",{className:"text-right py-2 px-3",children:"Monto"}),(0,a.jsx)("th",{className:"text-right py-2 px-3",children:"Comisi\xf3n"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-2 px-2",children:(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void L(e=>{let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s})},className:"text-primary-600 hover:text-primary-800",children:T.has(e.id)?(0,a.jsx)(f,{className:"w-5 h-5"}):(0,a.jsx)(j,{className:"w-5 h-5"})})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,l.p6)(e.fecha)}),(0,a.jsxs)("td",{className:"py-2 px-3",children:[e.socio.codigo," - ",e.socio.nombres," ",e.socio.apellidos]}),(0,a.jsx)("td",{className:"py-2 px-3",children:e.concepto}),(0,a.jsx)("td",{className:"py-2 px-3 text-right font-medium",children:(0,l.xG)(e.monto)}),(0,a.jsx)("td",{className:"py-2 px-3 text-right font-medium text-green-600",children:(0,l.xG)(e.comisionCobrador)})]},e.id))}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{className:"border-t-2 bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-2"}),(0,a.jsxs)("td",{className:"py-3 px-3 font-semibold text-gray-700",colSpan:3,children:["Total (",e.length," pago",1!==e.length?"s":"",")",Y&&F&&e.length!==F.pagosPendientes.length&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(filtrado de ",F.pagosPendientes.length,")"]})]}),(0,a.jsx)("td",{className:"py-3 px-3 text-right font-bold",children:(0,l.xG)(e.reduce((e,t)=>e+t.monto,0))}),(0,a.jsx)("td",{className:"py-3 px-3 text-right font-bold text-green-600",children:(0,l.xG)(e.reduce((e,t)=>e+t.comisionCobrador,0))})]})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["P\xe1gina ",$," de ",s," • ",e.length," comisiones"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-xs text-gray-600",children:"Filas:"}),(0,a.jsxs)("select",{value:K,onChange:e=>{W(Number(e.target.value)),Q(1)},className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:20,children:"20"}),(0,a.jsx)("option",{value:50,children:"50"}),(0,a.jsx)("option",{value:100,children:"100"}),(0,a.jsx)("option",{value:200,children:"200"})]}),(0,a.jsx)("button",{onClick:()=>Q(e=>Math.max(1,e-1)),disabled:$<=1,className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(v,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>Q(e=>Math.min(s,e+1)),disabled:$>=s,className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(N,{className:"w-4 h-4"})})]})]})]}):(0,a.jsx)("div",{className:"text-gray-500 text-center py-8",children:Y?'No se encontraron comisiones pendientes que coincidan con "'.concat(Y,'"'):"No hay comisiones pendientes"})})()}),"pagadas"===I&&(0,a.jsx)(a.Fragment,{children:(()=>{let e=F&&F.pagosPagados?ei(F.pagosPagados):[],t=ea(e),s=en(e.length);return e.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left py-2 px-3",children:"Fecha"}),(0,a.jsx)("th",{className:"text-left py-2 px-3",children:"Socio"}),(0,a.jsx)("th",{className:"text-left py-2 px-3",children:"Concepto"}),(0,a.jsx)("th",{className:"text-right py-2 px-3",children:"Monto"}),(0,a.jsx)("th",{className:"text-right py-2 px-3",children:"Comisi\xf3n"}),(0,a.jsx)("th",{className:"text-center py-2 px-3",children:"Estado"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-2 px-3",children:(0,l.p6)(e.fecha)}),(0,a.jsxs)("td",{className:"py-2 px-3",children:[e.socio.codigo," - ",e.socio.nombres," ",e.socio.apellidos]}),(0,a.jsx)("td",{className:"py-2 px-3",children:e.concepto}),(0,a.jsx)("td",{className:"py-2 px-3 text-right font-medium",children:(0,l.xG)(e.monto)}),(0,a.jsx)("td",{className:"py-2 px-3 text-right font-medium text-blue-600",children:(0,l.xG)(e.comisionCobrador)}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Pagada"})})]},e.id))}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{className:"border-t-2 bg-gray-50",children:[(0,a.jsxs)("td",{className:"py-3 px-3 font-semibold text-gray-700",colSpan:3,children:["Total (",e.length," pago",1!==e.length?"s":"",")",Y&&F&&F.pagosPagados&&e.length!==F.pagosPagados.length&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(filtrado de ",F.pagosPagados.length,")"]})]}),(0,a.jsx)("td",{className:"py-3 px-3 text-right font-bold",children:(0,l.xG)(e.reduce((e,t)=>e+t.monto,0))}),(0,a.jsx)("td",{className:"py-3 px-3 text-right font-bold text-blue-600",children:(0,l.xG)(e.reduce((e,t)=>e+t.comisionCobrador,0))}),(0,a.jsx)("td",{className:"py-3 px-3"})]})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["P\xe1gina ",$," de ",s," • ",e.length," comisiones"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-xs text-gray-600",children:"Filas:"}),(0,a.jsxs)("select",{value:K,onChange:e=>{W(Number(e.target.value)),Q(1)},className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:20,children:"20"}),(0,a.jsx)("option",{value:50,children:"50"}),(0,a.jsx)("option",{value:100,children:"100"}),(0,a.jsx)("option",{value:200,children:"200"})]}),(0,a.jsx)("button",{onClick:()=>Q(e=>Math.max(1,e-1)),disabled:$<=1,className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(v,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>Q(e=>Math.min(s,e+1)),disabled:$>=s,className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(N,{className:"w-4 h-4"})})]})]})]}):(0,a.jsx)("div",{className:"text-gray-500 text-center py-8",children:Y?'No se encontraron comisiones pagadas que coincidan con "'.concat(Y,'"'):"No hay comisiones pagadas registradas"})})()})]})}),M&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Liquidar Comisiones"}),(0,a.jsx)("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(w.Z,{className:"w-5 h-5"})})]}),A&&(0,a.jsx)("div",{className:"mb-4 p-3 rounded ".concat(A.includes("Error")?"bg-red-50 text-red-800 border border-red-200":"bg-green-50 text-green-800 border border-green-200"),children:A}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Pagos seleccionados:"}),(0,a.jsx)("span",{className:"font-medium",children:T.size})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total a liquidar:"}),(0,a.jsx)("span",{className:"font-bold text-green-600",children:(0,l.xG)(eo)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forma de Pago *"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:_.formaPago,onChange:e=>q(t=>({...t,formaPago:e.target.value})),children:[(0,a.jsx)("option",{value:"efectivo",children:"Efectivo"}),(0,a.jsx)("option",{value:"transferencia",children:"Transferencia"}),(0,a.jsx)("option",{value:"cheque",children:"Cheque"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero de Recibo"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:_.numeroRecibo,onChange:e=>q(t=>({...t,numeroRecibo:e.target.value})),placeholder:"Ej: REC-001"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),(0,a.jsx)("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,value:_.observaciones,onChange:e=>q(t=>({...t,observaciones:e.target.value})),placeholder:"Notas adicionales..."})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:G,children:"Cancelar"}),(0,a.jsx)("button",{onClick:et,disabled:G,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:G?"Procesando...":"Confirmar Liquidaci\xf3n"})]})]})]})})]})}):(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"Cobrador no encontrado"}),(0,a.jsx)(C.default,{href:"/admin/cobradores",className:"text-primary-600 hover:text-primary-800 mt-4 inline-block",children:"← Volver a Cobradores"})]})})}},45365:function(e,t,s){"use strict";s.d(t,{D2:function(){return a},LJ:function(){return r},_4:function(){return i},tF:function(){return n}});let a={name:"America/Asuncion",offsetHours:-3,description:"Paraguay (UTC-3)"};function n(){let e=new Date,t=Object.fromEntries(new Intl.DateTimeFormat("en-CA",{timeZone:a.name,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(e).map(e=>[e.type,e.value]));return new Date(parseInt(t.year),parseInt(t.month)-1,parseInt(t.day),parseInt(t.hour),parseInt(t.minute),parseInt(t.second))}function r(e){if(e){let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(a)}{let e=new Date;return new Intl.DateTimeFormat("en-CA",{timeZone:a.name,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}}function i(e){let t,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){let[s,a,n]=e.split("-").map(Number);t=new Date(s,a-1,n)}else t=new Date(e)}else t=e;if(s)return t.toLocaleString("es-PY",{timeZone:a.name,day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});if(!("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)))return t.toLocaleDateString("es-PY",{timeZone:a.name,day:"2-digit",month:"2-digit",year:"numeric"});{let[t,s,a]=e.split("-");return"".concat(a.padStart(2,"0"),"/").concat(s.padStart(2,"0"),"/").concat(t)}}},94508:function(e,t,s){"use strict";s.d(t,{Fw:function(){return i},Ji:function(){return o},m9:function(){return l},p6:function(){return r},sQ:function(){return d},sU:function(){return c},xG:function(){return n}});var a=s(45365);function n(e){return new Intl.NumberFormat("es-PY",{style:"currency",currency:"PYG",minimumFractionDigits:0}).format(e)}function r(e){return(0,a._4)(e,!1)}function i(e){let t=(0,a.tF)(),s=new Date(new Date(e).getTime()+108e5),n=t.getUTCFullYear()-s.getUTCFullYear(),r=t.getUTCMonth()-s.getUTCMonth();return(r<0||0===r&&t.getUTCDate()<s.getUTCDate())&&n--,n}function o(){return(0,a.LJ)()}function l(e){let t=e.replace(/\D/g,"");return t?t.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function c(e){return parseInt(e.replace(/\./g,""))||0}function d(e){return Math.round(e)}},32660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},61649:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]])},48736:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},90740:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},94630:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},73247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},38866:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]])},26034:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]])},92369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},32489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[1425,3643,9690,2971,2117,1744],function(){return e(e.s=2769)}),_N_E=e.O()}]);