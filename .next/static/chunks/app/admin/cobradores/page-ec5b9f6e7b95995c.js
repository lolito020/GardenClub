(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9573],{44857:function(e,t,r){Promise.resolve().then(r.bind(r,68847))},68847:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var s=r(57437),a=r(69690),i=r(17985),c=r(2265),o=r(99397),n=r(73247),l=r(13041),d=r(89345),x=r(26034),h=r(38866),m=r(42208),u=r(94630),p=r(27648);function f(){let[e,t]=(0,c.useState)([]),[r,f]=(0,c.useState)(!0),[g,y]=(0,c.useState)(""),[j,v]=(0,c.useState)(""),[N,b]=(0,c.useState)(""),[w,C]=(0,c.useState)("");async function k(){try{let e=await i.L.authenticatedFetch("/api/collectors"),r=await e.json();t(Array.isArray(r)?r:[])}catch(e){console.error("Error loading collectors:",e),t([])}finally{f(!1)}}async function Z(e,t){try{(await i.L.authenticatedFetch("/api/collectors/".concat(e),{method:"PATCH",body:JSON.stringify({activo:!t})})).ok&&await k()}catch(e){console.error("Error toggling collector:",e)}}(0,c.useEffect)(()=>{k()},[]);let E=e.filter(e=>{let t=e.nombres.toLowerCase().includes(g.toLowerCase())||e.apellidos.toLowerCase().includes(g.toLowerCase())||e.codigo.toLowerCase().includes(g.toLowerCase())||e.ci.includes(g),r=!j||"activo"===j&&e.activo||"inactivo"===j&&!e.activo,s=!N||e.formaPago===N,a=!w||e.tipoCobrador===w;return t&&r&&s&&a});return r?(0,s.jsx)(a.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):(0,s.jsx)(a.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gesti\xf3n de Cobradores"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Administra los cobradores externos del club"})]}),(0,s.jsxs)(p.default,{href:"/admin/cobradores/nuevo",className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4"}),"Nuevo Cobrador"]})]}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,s.jsx)("input",{type:"text",placeholder:"Nombre, c\xf3digo o CI...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:g,onChange:e=>y(e.target.value)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:w,onChange:e=>C(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Todos"}),(0,s.jsx)("option",{value:"EXTERNO",children:"Externos"}),(0,s.jsx)("option",{value:"PROFESOR",children:"Profesores"}),(0,s.jsx)("option",{value:"CLUB",children:"Club"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:j,onChange:e=>v(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Todos"}),(0,s.jsx)("option",{value:"activo",children:"Activos"}),(0,s.jsx)("option",{value:"inactivo",children:"Inactivos"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forma de Pago"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:N,onChange:e=>b(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Todas"}),(0,s.jsx)("option",{value:"efectivo",children:"Efectivo"}),(0,s.jsx)("option",{value:"transferencia",children:"Transferencia"}),(0,s.jsx)("option",{value:"cheque",children:"Cheque"})]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{onClick:()=>{y(""),v(""),b(""),C("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Limpiar Filtros"})})]})}),(0,s.jsx)("div",{className:"bg-white px-4 py-2 rounded-lg shadow",children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["Total Cobradores: ",(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:e.length})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cobrador"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Forma de Pago"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Ingreso"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.nombres," ",e.apellidos]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.codigo," â€¢ CI: ",e.ci]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:"CLUB"===e.tipoCobrador?"Garden Club":"EXTERNO"===e.tipoCobrador?"Externo":"PROFESOR"===e.tipoCobrador?"Profesor":e.tipoCobrador||"EXTERNO"}),"EXTERNO"===e.tipoCobrador&&e.comisionPorDefecto&&(0,s.jsxs)("div",{className:"text-xs text-gray-900 mt-1",children:[e.comisionPorDefecto,"% comisi\xf3n"]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"space-y-1",children:[e.celular&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,s.jsx)(l.Z,{className:"w-3 h-3 mr-1"}),e.celular]}),e.email&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,s.jsx)(d.Z,{className:"w-3 h-3 mr-1"}),e.email]}),e.direccion&&(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.direccion})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:(()=>{if("CLUB"===e.tipoCobrador)return"Todos los m\xe9todos";if(Array.isArray(e.formaPago)){let t={efectivo:"Efectivo",transferencia:"Transferencia",cheque:"Cheque"};return e.formaPago.map(e=>t[e]||e).join(", ")}return"efectivo"===e.formaPago?"Efectivo":"transferencia"===e.formaPago?"Transferencia":"cheque"===e.formaPago?"Cheque":e.formaPago})()}),e.cuentaBanco&&(0,s.jsx)("div",{className:"text-xs text-gray-900 mt-1",children:e.cuentaBanco})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.fechaIngreso).toLocaleDateString("es-PY")}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,s.jsx)("button",{onClick:()=>Z(e.id,e.activo),className:"p-1 rounded ".concat(e.activo?"text-green-600 hover:text-green-800":"text-gray-400 hover:text-gray-600"),children:e.activo?(0,s.jsx)(x.Z,{className:"w-6 h-6"}):(0,s.jsx)(h.Z,{className:"w-6 h-6"})})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(p.default,{href:"/admin/cobradores/".concat(e.id),className:"text-primary-600 hover:text-primary-900 p-1",title:"Ver detalles",children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})}),(0,s.jsx)(p.default,{href:"/admin/cobradores/".concat(e.id,"/editar"),className:"text-gray-600 hover:text-gray-900 p-1",title:"Editar",children:(0,s.jsx)(u.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})}),0===E.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-gray-500",children:g||j||N?"No se encontraron cobradores con los filtros aplicados":"No hay cobradores registrados"}),!g&&!j&&!N&&(0,s.jsxs)(p.default,{href:"/admin/cobradores/nuevo",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-600 bg-primary-100 hover:bg-primary-200",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Crear primer cobrador"]})]})]})]})})}},42208:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},89345:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},94630:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},13041:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},99397:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},73247:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},38866:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]])},26034:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]])}},function(e){e.O(0,[3643,9690,2971,2117,1744],function(){return e(e.s=44857)}),_N_E=e.O()}]);