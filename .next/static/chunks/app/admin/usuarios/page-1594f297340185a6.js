(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7798],{79298:function(e,r,s){Promise.resolve().then(s.bind(s,53334))},53334:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return n}});var a=s(57437),l=s(69690),t=s(2265),i=s(99376);function n(){let e=(0,i.useRouter)(),[r,s]=(0,t.useState)([]),[n,o]=(0,t.useState)(""),[d,c]=(0,t.useState)(""),[u,m]=(0,t.useState)("admin"),[h,x]=(0,t.useState)(""),[b,p]=(0,t.useState)(""),[g,j]=(0,t.useState)(!1);async function f(){try{let e=await fetch("/api/users"),r=await e.json();s(Array.isArray(r)?r:[])}catch(e){console.error("Error loading users:",e),s([])}}async function y(s){s.preventDefault(),p(""),j(!0);try{let s=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,nombre:d,rol:u,password:h})}),a=await s.json();a.ok?(o(""),c(""),x(""),await f(),p("Usuario creado exitosamente"),0===r.length&&setTimeout(()=>{p("Primer usuario creado. Redirigiendo al login..."),setTimeout(()=>{e.push("/login")},1500)},1e3)):p(a.msg||"Error al crear usuario")}catch(e){p("Error de conexi\xf3n")}finally{j(!1)}}return(0,t.useEffect)(()=>{f()},[]),(0,a.jsx)(l.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Gesti\xf3n de Usuarios"}),0===r.length&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"\xa1Bienvenido!"}),(0,a.jsx)("p",{className:"text-blue-700",children:"No hay usuarios registrados. Crea el primer usuario (Administrador) para activar el sistema de login."})]}),b&&(0,a.jsx)("div",{className:"p-4 rounded-lg ".concat(b.includes("exitosamente")||b.includes("creado")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:b}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:0===r.length?"Crear Primer Usuario (Administrador)":"Crear Nuevo Usuario"}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-4 max-w-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),(0,a.jsx)("input",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ej: Juan P\xe9rez",value:d,onChange:e=>c(e.target.value),required:!0,disabled:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"admin@club.py",type:"email",value:n,onChange:e=>o(e.target.value),required:!0,disabled:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),(0,a.jsxs)("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:u,onChange:e=>m(e.target.value),disabled:g,children:[(0,a.jsx)("option",{value:"admin",children:"Administrador"}),(0,a.jsx)("option",{value:"caja",children:"Caja"}),(0,a.jsx)("option",{value:"cobranzas",children:"Cobranzas"}),(0,a.jsx)("option",{value:"consulta",children:"Consulta"}),(0,a.jsx)("option",{value:"porteria",children:"Porter\xeda"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a"}),(0,a.jsx)("input",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"M\xednimo 6 caracteres",type:"password",value:h,onChange:e=>x(e.target.value),required:!0,minLength:6,disabled:g})]}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"bg-primary-500 text-white px-6 py-2 rounded-lg hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Creando...":"Crear Usuario"})]})]}),r.length>0&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Usuarios Registrados"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left py-2",children:"Nombre"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Email"}),(0,a.jsx)("th",{className:"text-center py-2",children:"Rol"})]})}),(0,a.jsx)("tbody",{children:r.map(e=>(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"py-2",children:e.nombre}),(0,a.jsx)("td",{className:"py-2",children:e.email}),(0,a.jsx)("td",{className:"py-2 text-center",children:(0,a.jsx)("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm",children:e.rol})})]},e.id))})]})})]})})]})})}}},function(e){e.O(0,[3643,9690,2971,2117,1744],function(){return e(e.s=79298)}),_N_E=e.O()}]);