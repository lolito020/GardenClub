(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6104],{62155:function(e,t,a){Promise.resolve().then(a.bind(a,96927))},96927:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(57437),i=a(69690),s=a(17985),n=a(2265),c=a(94508),l=a(99397),o=a(73247),d=a(95805),m=a(43745),u=a(42208),x=a(94630),h=a(27648);function p(){async function e(e){if(window.confirm("\xbfSeguro que deseas eliminar este familiar?"))try{(await s.L.authenticatedFetch("/api/families/".concat(e),{method:"DELETE"})).ok?await b():alert("No se pudo eliminar el familiar")}catch(e){alert("Error al eliminar familiar"),console.error("Error deleting family:",e)}}let[t,a]=(0,n.useState)([]),[p,f]=(0,n.useState)(!0),[y,g]=(0,n.useState)(""),[j,v]=(0,n.useState)(""),[N,w]=(0,n.useState)("");async function b(){try{let e=await s.L.authenticatedFetch("/api/families"),t=await e.json();a(Array.isArray(t)?t:[])}catch(e){console.error("Error loading families:",e),a([])}finally{f(!1)}}async function k(e,t){try{(await s.L.authenticatedFetch("/api/families/".concat(e),{method:"PATCH",body:JSON.stringify({activo:!t})})).ok&&await b()}catch(e){console.error("Error toggling family member:",e)}}(0,n.useEffect)(()=>{b()},[]);let C=t.filter(e=>{var t,a;let r=e.nombres.toLowerCase().includes(y.toLowerCase())||e.apellidos.toLowerCase().includes(y.toLowerCase())||(null===(t=e.socioTitularName)||void 0===t?void 0:t.toLowerCase().includes(y.toLowerCase()))||(null===(a=e.socioTitularCode)||void 0===a?void 0:a.toLowerCase().includes(y.toLowerCase()))||e.ci&&e.ci.includes(y),i=!j||e.parentesco===j,s=!N||"activo"===N&&e.activo||"inactivo"===N&&!e.activo;return r&&i&&s}),Z=[...new Set(t.map(e=>e.parentesco))];return p?(0,r.jsx)(i.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):(0,r.jsx)(i.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gesti\xf3n de Familiares"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Administra los familiares de los socios del club"})]}),(0,r.jsxs)(h.default,{href:"/admin/familiares/nuevo",className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 flex items-center gap-2",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"}),"Nuevo Familiar"]})]}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Nombre, socio titular o CI...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y,onChange:e=>g(e.target.value)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parentesco"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:j,onChange:e=>v(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todos"}),Z.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:N,onChange:e=>w(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todos"}),(0,r.jsx)("option",{value:"activo",children:"Activos"}),(0,r.jsx)("option",{value:"inactivo",children:"Inactivos"})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{onClick:()=>{g(""),v(""),w("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Limpiar Filtros"})})]})}),(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-4",children:(0,r.jsxs)("span",{className:"text-base font-semibold text-gray-900",children:["Total Familiares: ",t.length]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Familiar"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Socio Titular"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parentesco"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nacimiento"}),(0,r.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(t=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:t.foto?(0,r.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:t.foto,alt:"".concat(t.nombres," ").concat(t.apellidos)}):(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[t.nombres.charAt(0),t.apellidos.charAt(0)]})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[t.nombres," ",t.apellidos]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:t.ci?"CI: ".concat(t.ci):"Sin CI"})]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.socioTitularName||"N/A"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:t.socioTitularCode||"N/A"})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.parentesco})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:t.telefono||"-"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:t.email||"-"})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.nacimiento?(0,c.p6)(t.nacimiento):"-"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,r.jsx)("button",{onClick:()=>k(t.id,t.activo),className:"p-1 rounded ".concat(t.activo?"text-green-600 hover:text-green-800":"text-gray-400 hover:text-gray-600"),children:t.activo?(0,r.jsx)(d.Z,{className:"w-5 h-5"}):(0,r.jsx)(m.Z,{className:"w-5 h-5"})})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(h.default,{href:"/admin/familiares/".concat(t.id),className:"text-primary-600 hover:text-primary-900 p-1",title:"Ver detalles",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})}),(0,r.jsx)(h.default,{href:"/admin/familiares/".concat(t.id,"/editar"),className:"text-gray-600 hover:text-gray-900 p-1",title:"Editar",children:(0,r.jsx)(x.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>e(t.id),className:"text-red-600 hover:text-red-900 p-1",title:"Eliminar",children:(0,r.jsx)(m.Z,{className:"w-4 h-4"})})]})})]},t.id))})]})}),0===C.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-500",children:y||j||N?"No se encontraron familiares con los filtros aplicados":"No hay familiares registrados"}),!y&&!j&&!N&&(0,r.jsxs)(h.default,{href:"/admin/familiares/nuevo",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-600 bg-primary-100 hover:bg-primary-200",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 mr-2"}),"Registrar primer familiar"]})]})]})]})})}},45365:function(e,t,a){"use strict";a.d(t,{D2:function(){return r},LJ:function(){return s},_4:function(){return n},tF:function(){return i}});let r={name:"America/Asuncion",offsetHours:-3,description:"Paraguay (UTC-3)"};function i(){let e=new Date,t=Object.fromEntries(new Intl.DateTimeFormat("en-CA",{timeZone:r.name,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(e).map(e=>[e.type,e.value]));return new Date(parseInt(t.year),parseInt(t.month)-1,parseInt(t.day),parseInt(t.hour),parseInt(t.minute),parseInt(t.second))}function s(e){if(e){let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r)}{let e=new Date;return new Intl.DateTimeFormat("en-CA",{timeZone:r.name,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}}function n(e){let t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){let[a,r,i]=e.split("-").map(Number);t=new Date(a,r-1,i)}else t=new Date(e)}else t=e;if(a)return t.toLocaleString("es-PY",{timeZone:r.name,day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});if(!("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)))return t.toLocaleDateString("es-PY",{timeZone:r.name,day:"2-digit",month:"2-digit",year:"numeric"});{let[t,a,r]=e.split("-");return"".concat(r.padStart(2,"0"),"/").concat(a.padStart(2,"0"),"/").concat(t)}}},94508:function(e,t,a){"use strict";a.d(t,{Fw:function(){return n},Ji:function(){return c},m9:function(){return l},p6:function(){return s},sQ:function(){return d},sU:function(){return o},xG:function(){return i}});var r=a(45365);function i(e){return new Intl.NumberFormat("es-PY",{style:"currency",currency:"PYG",minimumFractionDigits:0}).format(e)}function s(e){return(0,r._4)(e,!1)}function n(e){let t=(0,r.tF)(),a=new Date(new Date(e).getTime()+108e5),i=t.getUTCFullYear()-a.getUTCFullYear(),s=t.getUTCMonth()-a.getUTCMonth();return(s<0||0===s&&t.getUTCDate()<a.getUTCDate())&&i--,i}function c(){return(0,r.LJ)()}function l(e){let t=e.replace(/\D/g,"");return t?t.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function o(e){return parseInt(e.replace(/\./g,""))||0}function d(e){return Math.round(e)}},42208:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},94630:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},99397:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},73247:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},43745:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},95805:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[3643,9690,2971,2117,1744],function(){return e(e.s=62155)}),_N_E=e.O()}]);