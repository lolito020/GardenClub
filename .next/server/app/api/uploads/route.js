"use strict";(()=>{var e={};e.id=8198,e.ids=[8198],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},20629:e=>{e.exports=require("fs/promises")},55315:e=>{e.exports=require("path")},849:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>v,requestAsyncStorage:()=>j,routeModule:()=>x,serverHooks:()=>h,staticGenerationAsyncStorage:()=>w});var a={};r.r(a),r.d(a,{POST:()=>f,dynamic:()=>m,maxDuration:()=>c,runtime:()=>g});var o=r(49303),s=r(88716),n=r(60670),i=r(87070),p=r(20629),u=r(55315),l=r.n(u),d=r(40259);let m="force-dynamic",g="nodejs",c=60;async function f(e){try{let t=(await e.formData()).get("file");if(!t)return i.NextResponse.json({ok:!1,msg:"No file uploaded"},{status:400});if(!["image/jpeg","image/png","image/webp","image/gif"].includes(t.type))return i.NextResponse.json({ok:!1,msg:"Tipo no permitido"},{status:400});if(t.size>8388608)return i.NextResponse.json({ok:!1,msg:"La imagen supera 8MB"},{status:400});let r=l().join(process.cwd(),"public","uploads");await (0,p.mkdir)(r,{recursive:!0});let a={"image/jpeg":".jpg","image/png":".png","image/webp":".webp","image/gif":".gif"}[t.type]||t.name&&l().extname(t.name)||".bin",o=`${Date.now()}-${(0,d.x0)(8)}${a}`,s=l().join(r,o),n=Buffer.from(await t.arrayBuffer());await (0,p.writeFile)(s,n);let u=`/uploads/${o}`;return i.NextResponse.json({ok:!0,path:u},{status:201})}catch(e){return console.error("Upload error:",e),i.NextResponse.json({ok:!1,error:"Upload failed"},{status:500})}}let x=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/uploads/route",pathname:"/api/uploads",filename:"route",bundlePath:"app/api/uploads/route"},resolvedPagePath:"C:\\Garden\\app\\api\\uploads\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:j,staticGenerationAsyncStorage:w,serverHooks:h}=x,y="/api/uploads/route";function v(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:w})}},40259:(e,t,r)=>{let a,o;r.d(t,{x0:()=>n});let s=require("node:crypto");function n(e=21){var t;t=e-=0,!a||a.length<t?(a=Buffer.allocUnsafe(128*t),s.webcrypto.getRandomValues(a),o=0):o+t>a.length&&(s.webcrypto.getRandomValues(a),o=0),o+=t;let r="";for(let t=o-e;t<o;t++)r+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&a[t]];return r}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5972],()=>r(849));module.exports=a})();