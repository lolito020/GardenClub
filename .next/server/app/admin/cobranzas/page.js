(()=>{var e={};e.id=5113,e.ids=[5113],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},80037:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),a(51606),a(11506),a(35866);var s=a(23191),r=a(88716),n=a(37922),i=a.n(n),l=a(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["admin",{children:["cobranzas",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,51606)),"C:\\Garden\\app\\admin\\cobranzas\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Garden\\app\\admin\\cobranzas\\page.tsx"],x="/admin/cobranzas/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/cobranzas/page",pathname:"/admin/cobranzas",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},95418:(e,t,a)=>{Promise.resolve().then(a.bind(a,77493))},77493:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(10326),r=a(64447),n=a(67269),i=a(17577),l=a(77863),o=a(17069),d=a(31540),c=a(83855),x=a(41137),m=a(88307),u=a(71821),p=a(90434);function g(){let[e,t]=(0,i.useState)([]),[a,g]=(0,i.useState)(!0),[h,f]=(0,i.useState)(""),[y,j]=(0,i.useState)(""),[b,v]=(0,i.useState)(""),[N,w]=(0,i.useState)(""),[C,k]=(0,i.useState)(!1),[P,Z]=(0,i.useState)(""),[S,T]=(0,i.useState)(""),D=e.filter(e=>{let t=e.concepto.toLowerCase().includes(h.toLowerCase())||e.memberName?.toLowerCase().includes(h.toLowerCase())||e.memberCode?.toLowerCase().includes(h.toLowerCase())||e.numeroRecibo?.toLowerCase().includes(h.toLowerCase()),a=!y||e.formaPago===y,s=!b||e.fecha.startsWith(b),r=!N||e.cobradorId===N,n=!P||e.fecha>=P,i=!S||e.fecha<=S;return t&&a&&s&&r&&n&&i}),F=async e=>{try{let t=await n.L.authenticatedFetch(`/api/payments/export?format=${e}`),a=await t.blob(),s=window.URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=`cobranzas-${new Date().toISOString().split("T")[0]}.${"excel"===e?"csv":"pdf"}`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s),document.body.removeChild(r)}catch(e){console.error("Error exporting payments:",e)}},L=e=>s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{efectivo:"bg-green-100 text-green-800",transferencia:"bg-blue-100 text-blue-800",tarjeta:"bg-purple-100 text-purple-800",cheque:"bg-orange-100 text-orange-800"}[e]||"bg-gray-100 text-gray-800"}`,children:{efectivo:"Efectivo",transferencia:"Transferencia",tarjeta:"Tarjeta",cheque:"Cheque"}[e]||e}),q=D.reduce((e,t)=>e+t.monto,0),_=D.reduce((e,t)=>e+(t.comisionCobrador||0),0);return a?s.jsx(r.Z,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):s.jsx(r.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gesti\xf3n de Cobranzas"}),s.jsx("p",{className:"text-gray-600",children:"Administra los pagos y cobranzas del club"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(p.default,{href:"/admin/reportes",className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 flex items-center gap-2",children:[s.jsx(o.Z,{className:"w-4 h-4"}),"Reportes"]}),(0,s.jsxs)("button",{onClick:()=>F("excel"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[s.jsx(d.Z,{className:"w-4 h-4"}),"Excel"]}),(0,s.jsxs)(p.default,{href:"/admin/cobranzas/nuevo",className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 flex items-center gap-2",children:[s.jsx(c.Z,{className:"w-4 h-4"}),"Nuevo Pago"]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Filtros de B\xfasqueda"}),(0,s.jsxs)("button",{onClick:()=>k(!C),className:"flex items-center gap-2 text-primary-600 hover:text-primary-800",children:[s.jsx(x.Z,{className:"w-4 h-4"}),C?"Ocultar Filtros":"Filtros Avanzados"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Concepto, socio, recibo...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:h,onChange:e=>f(e.target.value)})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forma de Pago"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y,onChange:e=>j(e.target.value),children:[s.jsx("option",{value:"",children:"Todas"}),s.jsx("option",{value:"efectivo",children:"Efectivo"}),s.jsx("option",{value:"transferencia",children:"Transferencia"}),s.jsx("option",{value:"tarjeta",children:"Tarjeta"}),s.jsx("option",{value:"cheque",children:"Cheque"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cobrador"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:N,onChange:e=>w(e.target.value),children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"interno",children:"Caja Interna"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{f(""),j(""),v(""),w(""),Z(""),T("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Limpiar Filtros"})})]}),C&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Desde"}),s.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:P,onChange:e=>Z(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Hasta"}),s.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:S,onChange:e=>T(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mes/A\xf1o"}),s.jsx("input",{type:"month",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:b,onChange:e=>v(e.target.value)})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"An\xe1lisis de Cobranzas"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:D.filter(e=>"efectivo"===e.formaPago).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Pagos en Efectivo"})]})}),s.jsx("div",{children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:D.filter(e=>"transferencia"===e.formaPago).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Transferencias"})]})}),s.jsx("div",{children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:D.filter(e=>e.cobradorId).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Por Cobradores"})]})}),s.jsx("div",{children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[(_/q*100).toFixed(1),"%"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"% Comisiones"})]})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(u.Z,{className:"w-8 h-8 text-green-600 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(0,l.xG)(q)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Cobrado"})]})]})}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Pagos"})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(0,l.xG)(_)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Comisiones"})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:D.filter(e=>"efectivo"===e.formaPago).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Pagos Efectivo"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Socio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Concepto"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Forma Pago"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cobrador"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recibo"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.fecha).toLocaleDateString("es-PY")}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.memberName||"N/A"}),s.jsx("div",{className:"text-sm text-gray-500",children:e.memberCode||"N/A"})]}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm text-gray-900",children:e.concepto}),e.observaciones&&s.jsx("div",{className:"text-sm text-gray-500",children:e.observaciones})]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:(0,l.xG)(e.monto)}),e.comisionCobrador&&(0,s.jsxs)("div",{className:"text-xs text-orange-600",children:["Comisi\xf3n: ",(0,l.xG)(e.comisionCobrador)]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L(e.formaPago)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.cobradorName||"Caja Interna"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.numeroRecibo||"-"})]},e.id))})]})}),0===D.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-500",children:h||y||b||N?"No se encontraron pagos con los filtros aplicados":"No hay pagos registrados"}),!h&&!y&&!b&&!N&&(0,s.jsxs)(p.default,{href:"/admin/cobranzas/nuevo",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-600 bg-primary-100 hover:bg-primary-200",children:[s.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Registrar primer pago"]})]})]})]})})}},60068:(e,t,a)=>{"use strict";a.d(t,{D2:()=>s,LJ:()=>n,_4:()=>i,tF:()=>r});let s={name:"America/Asuncion",offsetHours:-3,description:"Paraguay (UTC-3)"};function r(){let e=new Date,t=Object.fromEntries(new Intl.DateTimeFormat("en-CA",{timeZone:s.name,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(e).map(e=>[e.type,e.value]));return new Date(parseInt(t.year),parseInt(t.month)-1,parseInt(t.day),parseInt(t.hour),parseInt(t.minute),parseInt(t.second))}function n(e){if(e){let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${s}`}{let e=new Date;return new Intl.DateTimeFormat("en-CA",{timeZone:s.name,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}}function i(e,t=!1){let a;if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){let[t,s,r]=e.split("-").map(Number);a=new Date(t,s-1,r)}else a=new Date(e)}else a=e;if(t)return a.toLocaleString("es-PY",{timeZone:s.name,day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});if(!("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)))return a.toLocaleDateString("es-PY",{timeZone:s.name,day:"2-digit",month:"2-digit",year:"numeric"});{let[t,a,s]=e.split("-");return`${s.padStart(2,"0")}/${a.padStart(2,"0")}/${t}`}}},77863:(e,t,a)=>{"use strict";a.d(t,{Fw:()=>i,Ji:()=>l,m9:()=>o,p6:()=>n,sQ:()=>c,sU:()=>d,xG:()=>r});var s=a(60068);function r(e){return new Intl.NumberFormat("es-PY",{style:"currency",currency:"PYG",minimumFractionDigits:0}).format(e)}function n(e){return(0,s._4)(e,!1)}function i(e){let t=(0,s.tF)(),a=new Date(new Date(e).getTime()+108e5),r=t.getUTCFullYear()-a.getUTCFullYear(),n=t.getUTCMonth()-a.getUTCMonth();return(n<0||0===n&&t.getUTCDate()<a.getUTCDate())&&r--,r}function l(){return(0,s.LJ)()}function o(e){let t=e.replace(/\D/g,"");return t?t.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function d(e){return parseInt(e.replace(/\./g,""))||0}function c(e){return Math.round(e)}},71821:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},31540:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},41137:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},83855:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88307:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},17069:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},51606:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`C:\Garden\app\admin\cobranzas\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,4471,6837,8750],()=>a(80037));module.exports=s})();