(()=>{var e={};e.id=2852,e.ids=[2852],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},46783:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>d}),r(99505),r(11506),r(35866);var t=r(23191),o=r(88716),s=r(37922),i=r.n(s),n=r(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(a,l);let d=["",{children:["admin",{children:["socios",{children:["nuevo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,99505)),"C:\\Garden\\app\\admin\\socios\\nuevo\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Garden\\app\\admin\\socios\\nuevo\\page.tsx"],u="/admin/socios/nuevo/page",m={require:r,loadChunk:()=>Promise.resolve()},g=new t.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/admin/socios/nuevo/page",pathname:"/admin/socios/nuevo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3810:(e,a,r)=>{Promise.resolve().then(r.bind(r,20833))},20833:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>m});var t=r(10326),o=r(64447),s=r(67269),i=r(60068),n=r(17577),l=r(35047),d=r(86333),c=r(63685),u=r(90434);function m(){let e=(0,l.useRouter)(),[a,r]=(0,n.useState)(!1),[m,g]=(0,n.useState)(""),[p,x]=(0,n.useState)(!1),[h,b]=(0,n.useState)(""),[f,y]=(0,n.useState)({nombres:"",apellidos:"",ci:"",ruc:"",categoria:"Individual",subcategoria:"Socio",direccion:"",telefono:"",celular:"",email:"",nacimiento:"",nacionalidad:"Paraguaya",datosLaborales:"",alta:(0,i.LJ)(),estado:"AL_DIA",foto:"",observaciones:"",aplicarCuotaIngreso:!1}),v=async e=>{if(!e||0===e.trim().length){b("");return}try{let a=await s.L.authenticatedFetch(`/api/members?ci=${encodeURIComponent(e.trim())}`),r=await a.json();if(a.ok&&Array.isArray(r)&&r.length>0){let a=r[0];b(`Ya existe un ${"NO SOCIO"===a.subcategoria?"no-socio":"socio"} registrado con la CI ${e}: ${a.nombres} ${a.apellidos} (${a.codigo})`)}else b("")}catch(e){console.error("Error validating CI:",e),b("")}},j=async a=>{if(a.preventDefault(),g(""),h){g("Por favor, corrija los errores antes de continuar.");return}r(!0);try{let a=await s.L.authenticatedFetch("/api/members",{method:"POST",body:JSON.stringify(f)}),r=await a.json();if(a.ok){if(f.aplicarCuotaIngreso&&r.member?.id)try{let a=f.alta,t=await s.L.authenticatedFetch("/api/movements",{method:"POST",body:JSON.stringify({memberId:r.member.id,fecha:a,concepto:"Cuota de Ingreso",tipo:"DEBIT",monto:15e6,origen:"SERVICIO",refId:"s2",observaciones:"Cuota de ingreso aplicada autom\xe1ticamente al crear el socio",vencimiento:a})});if(!t.ok){let a=await t.json();console.error("Error al crear d\xe9bito de cuota de ingreso:",a),g("Socio creado exitosamente, pero hubo un error al crear la cuota de ingreso. Puede agregarla manualmente."),setTimeout(()=>e.push("/admin/socios"),2e3);return}}catch(a){console.error("Error al crear d\xe9bito:",a),g("Socio creado exitosamente, pero hubo un error al crear la cuota de ingreso. Puede agregarla manualmente."),setTimeout(()=>e.push("/admin/socios"),2e3);return}e.push("/admin/socios")}else g(r.msg||"Error al crear socio")}catch(e){g("Error de conexi\xf3n")}finally{r(!1)}},N=async e=>{let a=e.target.files?.[0];if(a){x(!0);try{let e=new FormData;e.append("file",a);let r=await fetch("/api/uploads",{method:"POST",body:e}),t=await r.json();t.ok?y(e=>({...e,foto:t.path})):g("Error al subir la foto")}catch(e){g("Error al subir la foto")}finally{x(!1)}}};return t.jsx(o.Z,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx(u.default,{href:"/admin/socios",className:"p-2 hover:bg-gray-100 rounded-lg",children:t.jsx(d.Z,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Nuevo Socio"}),t.jsx("p",{className:"text-gray-600",children:"Registra un nuevo socio en el club"})]})]}),m&&t.jsx("div",{className:`p-4 rounded-lg ${m.includes("Error")?"bg-red-50 text-red-800 border border-red-200":"bg-green-50 text-green-800 border border-green-200"}`,children:m}),t.jsx("div",{className:"bg-white rounded-lg shadow",children:(0,t.jsxs)("form",{onSubmit:j,className:"p-6 space-y-8",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n Personal"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombres *"}),t.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.nombres,onChange:e=>y(a=>({...a,nombres:e.target.value})),placeholder:"Juan Carlos"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellidos *"}),t.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.apellidos,onChange:e=>y(a=>({...a,apellidos:e.target.value})),placeholder:"P\xe9rez L\xf3pez"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C\xe9dula de Identidad *"}),t.jsx("input",{type:"text",required:!0,className:`w-full px-3 py-1.5 border rounded-md focus:outline-none focus:ring-2 ${h?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500"}`,value:f.ci,onChange:e=>{let a=e.target.value;y(e=>({...e,ci:a})),setTimeout(()=>v(a),500)},onBlur:e=>v(e.target.value),placeholder:"1234567"}),h&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RUC"}),t.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.ruc,onChange:e=>y(a=>({...a,ruc:e.target.value})),placeholder:"1234567-8"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Nacimiento"}),t.jsx("input",{type:"date",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.nacimiento,onChange:e=>y(a=>({...a,nacimiento:e.target.value}))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nacionalidad"}),t.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.nacionalidad,onChange:e=>y(a=>({...a,nacionalidad:e.target.value})),placeholder:"Paraguaya"})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Categorizaci\xf3n"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categor\xeda *"}),(0,t.jsxs)("select",{required:!0,className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.categoria,onChange:e=>y(a=>({...a,categoria:e.target.value})),children:[t.jsx("option",{value:"Individual",children:"Individual"}),t.jsx("option",{value:"Familiar",children:"Familiar"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategor\xeda *"}),(0,t.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.subcategoria,onChange:e=>y(a=>({...a,subcategoria:e.target.value})),children:[t.jsx("option",{value:"Socio",children:"Socio"}),t.jsx("option",{value:"Socio Patrimonial",children:"Socio Patrimonial"}),t.jsx("option",{value:"Socio Vitalicio",children:"Socio Vitalicio"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado *"}),(0,t.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.estado,onChange:e=>y(a=>({...a,estado:e.target.value})),children:[t.jsx("option",{value:"AL_DIA",children:"Al D\xeda"}),t.jsx("option",{value:"ATRASADO",children:"Atrasado"}),t.jsx("option",{value:"SUSPENDIDO",children:"Suspendido"})]})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n de Contacto"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direcci\xf3n"}),t.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.direccion,onChange:e=>y(a=>({...a,direccion:e.target.value})),placeholder:"Av. Espa\xf1a 1234, Asunci\xf3n"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono"}),t.jsx("input",{type:"tel",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.telefono,onChange:e=>y(a=>({...a,telefono:e.target.value})),placeholder:"021-123456"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Celular"}),t.jsx("input",{type:"tel",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.celular,onChange:e=>y(a=>({...a,celular:e.target.value})),placeholder:"0981-123456"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.email,onChange:e=>y(a=>({...a,email:e.target.value})),placeholder:"juan.perez@email.com"})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n Adicional"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-start",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Alta *"}),t.jsx("input",{type:"date",required:!0,className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.alta,onChange:e=>y(a=>({...a,alta:e.target.value}))})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Datos Laborales"}),t.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.datosLaborales,onChange:e=>y(a=>({...a,datosLaborales:e.target.value})),placeholder:"Contador - Empresa ABC"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),t.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f.observaciones,onChange:e=>y(a=>({...a,observaciones:e.target.value})),placeholder:"Notas adicionales sobre el socio..."})]}),(0,t.jsxs)("div",{className:"md:col-span-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Foto"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"hidden",id:"photo-upload",disabled:p}),(0,t.jsxs)("label",{htmlFor:"photo-upload",className:"flex items-center gap-2 px-3 py-1.5 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50 disabled:opacity-50 text-sm",children:[t.jsx(c.Z,{className:"w-4 h-4"}),p?"Subiendo...":"Subir Foto"]})]}),f.foto&&t.jsx("img",{src:f.foto,alt:"Preview",className:"w-10 h-10 rounded-full object-cover mt-2"})]}),(0,t.jsxs)("div",{className:"md:col-span-6",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[t.jsx("input",{type:"checkbox",checked:f.aplicarCuotaIngreso,onChange:e=>y(a=>({...a,aplicarCuotaIngreso:e.target.checked})),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Aplicar Cuota de Ingreso (Gs. 15.000.000)"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Se crear\xe1 autom\xe1ticamente un d\xe9bito por la cuota de ingreso al crear el socio"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[t.jsx(u.default,{href:"/admin/socios",className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),t.jsx("button",{type:"submit",disabled:a||!!h,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Creando...":"Crear Socio"})]})]})})]})})}},60068:(e,a,r)=>{"use strict";r.d(a,{D2:()=>t,LJ:()=>s,_4:()=>i,tF:()=>o});let t={name:"America/Asuncion",offsetHours:-3,description:"Paraguay (UTC-3)"};function o(){let e=new Date,a=Object.fromEntries(new Intl.DateTimeFormat("en-CA",{timeZone:t.name,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(e).map(e=>[e.type,e.value]));return new Date(parseInt(a.year),parseInt(a.month)-1,parseInt(a.day),parseInt(a.hour),parseInt(a.minute),parseInt(a.second))}function s(e){if(e){let a=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return`${a}-${r}-${t}`}{let e=new Date;return new Intl.DateTimeFormat("en-CA",{timeZone:t.name,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}}function i(e,a=!1){let r;if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){let[a,t,o]=e.split("-").map(Number);r=new Date(a,t-1,o)}else r=new Date(e)}else r=e;if(a)return r.toLocaleString("es-PY",{timeZone:t.name,day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});if(!("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)))return r.toLocaleDateString("es-PY",{timeZone:t.name,day:"2-digit",month:"2-digit",year:"numeric"});{let[a,r,t]=e.split("-");return`${t.padStart(2,"0")}/${r.padStart(2,"0")}/${a}`}}},86333:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},63685:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(76557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},99505:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`C:\Garden\app\admin\socios\nuevo\page.tsx#default`)}};var a=require("../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[8948,4471,6837,8750],()=>r(46783));module.exports=t})();