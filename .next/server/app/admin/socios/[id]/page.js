(()=>{var e={};e.id=3137,e.ids=[3137],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57298:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d}),s(10343),s(11506),s(35866);var a=s(23191),r=s(88716),i=s(37922),l=s.n(i),n=s(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["admin",{children:["socios",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,10343)),"C:\\Garden\\app\\admin\\socios\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Garden\\app\\admin\\socios\\[id]\\page.tsx"],x="/admin/socios/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/socios/[id]/page",pathname:"/admin/socios/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8465:(e,t,s)=>{Promise.resolve().then(s.bind(s,24547))},24547:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var a=s(10326),r=s(64447),i=s(67269),l=s(17577),n=s(35047),o=s(77863),d=s(86333),c=s(70003),x=s(79635),m=s(28916),h=s(76557);let u=(0,h.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var p=s(24061),g=s(83855),b=s(36283),y=s(94019),j=s(90434);s(60068);var f=s(87888),N=s(2179),v=s(37358);function w({open:e,onClose:t,memberId:s,memberName:r,memberCode:n,onSuccess:d}){let c=new Date().getFullYear(),[x,m]=(0,l.useState)(c),[h,u]=(0,l.useState)(!1),[p,g]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),[w,C]=(0,l.useState)(null),[E,D]=(0,l.useState)(""),[S,A]=(0,l.useState)("");async function k(){if(w&&w.canGenerate){j(!0),D(""),A("");try{let e=await i.L.authenticatedFetch(`/api/members/${s}/generate-annual-quotas`,{method:"POST",body:JSON.stringify({year:x})}),a=await e.json();e.ok?(A(a.msg),setTimeout(()=>{d(),t()},1500)):D(a.msg||"Error al generar cuotas")}catch(e){D("Error de conexi\xf3n al generar cuotas"),console.error(e)}finally{j(!1)}}}function I(){b||(t(),D(""),A(""),C(null))}return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white z-10",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Generar Cuotas Sociales Anuales"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[r," (",n,")"]})]}),a.jsx("button",{onClick:I,disabled:b,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:a.jsx(y.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"px-6 py-4 space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"A\xf1o"}),a.jsx("input",{type:"number",value:x,onChange:e=>m(parseInt(e.target.value)||c),disabled:b,min:2e3,max:2099,step:1,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ej: 2025"})]}),p&&(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Analizando..."})]}),E&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(f.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:E})]})]}),S&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(N.Z,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-green-800",children:"\xa1\xc9xito!"}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:S})]})]}),w&&!p&&(0,a.jsxs)(a.Fragment,{children:[w.warnings.length>0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(f.Z,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Advertencias"}),a.jsx("ul",{className:"mt-2 space-y-1",children:w.warnings.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm text-yellow-700",children:["• ",e]},t))})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:["Estado de meses - ",x]}),a.jsx("div",{className:"grid grid-cols-6 gap-2",children:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"].map((e,t)=>{let s=t+1,r=w.existingDebits.find(e=>e.month===s),i=w.missingMonths.includes(s),l="bg-gray-100 text-gray-400 border-gray-200",n=null,o="N/A";return r?"CANCELADO"===r.status?(l="bg-green-100 text-green-700 border-green-300",n=a.jsx(N.Z,{className:"w-3 h-3"}),o="Pagado"):"PARCIAL"===r.status?(l="bg-yellow-100 text-yellow-700 border-yellow-300",n=a.jsx(f.Z,{className:"w-3 h-3"}),o="Parcial"):(l="bg-orange-100 text-orange-700 border-orange-300",n=a.jsx(f.Z,{className:"w-3 h-3"}),o="Pendiente"):i&&(l="bg-blue-50 text-blue-700 border-blue-200",n=a.jsx(v.Z,{className:"w-3 h-3"}),o="A crear"),(0,a.jsxs)("div",{className:`border rounded-lg p-2 text-center ${l}`,title:o,children:[a.jsx("div",{className:"text-xs font-medium",children:e}),n&&a.jsx("div",{className:"flex justify-center mt-1",children:n})]},t)})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Resumen"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Meses con d\xe9bitos"}),a.jsx("p",{className:"font-semibold text-gray-900",children:w.existingDebits.length})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Meses a generar"}),a.jsx("p",{className:"font-semibold text-blue-700",children:w.monthsToGenerate})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Monto por mes"}),a.jsx("p",{className:"font-semibold text-gray-900",children:(0,o.xG)(w.totalAmountToGenerate/Math.max(w.monthsToGenerate,1))})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Total a generar"}),a.jsx("p",{className:"font-semibold text-blue-700",children:(0,o.xG)(w.totalAmountToGenerate)})]})]})]}),!w.canGenerate&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(f.Z,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Informaci\xf3n"}),(0,a.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["Ya existen d\xe9bitos para todos los meses de ",x,". No hay nada que generar."]})]})]})]})]}),(0,a.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3 bg-gray-50",children:[a.jsx("button",{onClick:I,disabled:b,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancelar"}),a.jsx("button",{onClick:k,disabled:!w||!w.canGenerate||b||p,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:b?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Generando..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(v.Z,{className:"w-4 h-4"}),"Generar ",w?.monthsToGenerate||0," Cuotas"]})})]})]})}):null}let C=(0,h.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var E=s(98091);function D({open:e,onClose:t,memberId:s,memberName:r,memberCode:n,onSuccess:d}){let c=new Date().getFullYear(),[x,m]=(0,l.useState)(c),[h,u]=(0,l.useState)(!1),[p,g]=(0,l.useState)(null),[b,j]=(0,l.useState)(""),[f,v]=(0,l.useState)("");async function w(){if(confirm(`\xbfEst\xe1 seguro de revertir las cuotas generadas para ${x}?

Solo se eliminar\xe1n d\xe9bitos PENDIENTES. Los d\xe9bitos con pagos o refinanciados no se eliminar\xe1n.`)){u(!0),j(""),v(""),g(null);try{let e=await i.L.authenticatedFetch(`/api/members/${s}/generate-annual-quotas?year=${x}`,{method:"DELETE"}),a=await e.json();e.ok?(v(a.msg),g(a.result),setTimeout(()=>{d(),t()},2e3)):j(a.msg||"Error al revertir cuotas")}catch(e){j("Error de conexi\xf3n al revertir cuotas"),console.error(e)}finally{u(!1)}}}function D(){h||(t(),j(""),v(""),g(null))}return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white z-10",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Revertir Cuotas Anuales"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[r," (",n,")"]})]}),a.jsx("button",{onClick:D,disabled:h,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:a.jsx(y.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"px-6 py-4 space-y-4",children:[!p&&!f&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"A\xf1o a revertir"}),a.jsx("input",{type:"number",value:x,onChange:e=>m(parseInt(e.target.value)||c),disabled:h,min:2e3,max:2099,step:1,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Ej: 2025"})]}),!p&&!f&&(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(C,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Advertencia"}),(0,a.jsxs)("p",{className:"text-sm text-yellow-700 mt-1",children:["Esta acci\xf3n eliminar\xe1 todos los d\xe9bitos de cuota social PENDIENTES generados para el a\xf1o ",x,"."]}),(0,a.jsxs)("ul",{className:"mt-2 text-sm text-yellow-700 space-y-1",children:[a.jsx("li",{children:"• Los d\xe9bitos con pagos (PARCIAL o CANCELADO) no se eliminar\xe1n"}),a.jsx("li",{children:"• Los d\xe9bitos refinanciados no se eliminar\xe1n"}),a.jsx("li",{children:"• Esta acci\xf3n no se puede deshacer"})]})]})]}),b&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(C,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:b})]})]}),f&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(N.Z,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-green-800",children:"\xa1\xc9xito!"}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:f})]})]}),p&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Resumen"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-600",children:"D\xe9bitos eliminados"}),a.jsx("p",{className:"font-semibold text-green-700",children:p.deleted})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-600",children:"D\xe9bitos omitidos"}),a.jsx("p",{className:"font-semibold text-yellow-700",children:p.skipped})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("p",{className:"text-gray-600",children:"Total revertido"}),a.jsx("p",{className:"font-semibold text-gray-900",children:(0,o.xG)(p.totalReverted)})]})]})]}),p.deletedDebits.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:["D\xe9bitos eliminados (",p.deleted,")"]}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:a.jsx("ul",{className:"space-y-2 text-sm",children:p.deletedDebits.map(e=>(0,a.jsxs)("li",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-700",children:e.monthText||`Mes ${e.month||"?"}`}),a.jsx("span",{className:"font-medium text-gray-900",children:(0,o.xG)(e.amount)})]},e.id))})})]}),p.skippedDebits.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:["D\xe9bitos omitidos (",p.skipped,")"]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:a.jsx("ul",{className:"space-y-2 text-sm",children:p.skippedDebits.map(e=>(0,a.jsxs)("li",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-700",children:e.monthText||`Mes ${e.month||"?"}`}),a.jsx("span",{className:"font-medium text-gray-900",children:(0,o.xG)(e.amount)})]}),a.jsx("p",{className:"text-xs text-yellow-700",children:e.reason})]},e.id))})})]})]})]}),(0,a.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3 bg-gray-50",children:[a.jsx("button",{onClick:D,disabled:h,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:p?"Cerrar":"Cancelar"}),!p&&!f&&a.jsx("button",{onClick:w,disabled:h,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Revirtiendo..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(E.Z,{className:"w-4 h-4"}),"Revertir Cuotas"]})})]})]})}):null}function S(e){let t=String(e||"").toUpperCase();return"DEBIT"===t||"DEBE"===t?"DEBIT":"CREDIT"===t||"HABER"===t?"CREDIT":"DEBIT"}function A(){let e=(0,n.useParams)(),[t,s]=(0,l.useState)(null),[h,f]=(0,l.useState)([]),[N,v]=(0,l.useState)([]),[C,E]=(0,l.useState)([]),[A,P]=(0,l.useState)([]),[$,L]=(0,l.useState)(!0),[M,F]=(0,l.useState)(null),[G,R]=(0,l.useState)(!1),[O,Z]=(0,l.useState)(!1),[B,H]=(0,l.useState)(!1),[Y,_]=(0,l.useState)(1),[z,U]=(0,l.useState)(10),[q,J]=(0,l.useState)([]),[V,W]=(0,l.useState)(!0),[X,K]=(0,l.useState)([]),[Q,ee]=(0,l.useState)(!0),[et,es]=(0,l.useState)(!1),[ea,er]=(0,l.useState)([]),[ei,el]=(0,l.useState)(!1),[en,eo]=(0,l.useState)(""),[ed,ec]=(0,l.useState)(""),[ex,em]=(0,l.useState)(1),[eh,eu]=(0,l.useState)(10),[ep,eg]=(0,l.useState)(!1),[eb,ey]=(0,l.useState)(!1),[ej,ef]=(0,l.useState)(!1),[eN,ev]=(0,l.useState)(""),[ew,eC]=(0,l.useState)({nombres:"",apellidos:"",ci:"",parentesco:"",nacimiento:"",email:"",telefono:""}),[eE,eD]=(0,l.useState)(!1),[eS,eA]=(0,l.useState)(null),[ek,eI]=(0,l.useState)({fecha:"",concepto:"",tipo:"DEBIT",monto:"",observaciones:"",vencimiento:""}),[eT,eP]=(0,l.useState)(!1),[e$,eL]=(0,l.useState)(!1),[eM,eF]=(0,l.useState)(null),[eG,eR]=(0,l.useState)({fecha:"",concepto:"",formaPago:"",numeroRecibo:"",monto:"",cobradorId:"",observaciones:""}),[eO,eZ]=(0,l.useState)(!1),[eB,eH]=(0,l.useState)([]),[eY,e_]=(0,l.useState)(!0),[ez,eU]=(0,l.useState)(""),[eq,eJ]=(0,l.useState)(""),[eV,eW]=(0,l.useState)("ALL"),[eX,eK]=(0,l.useState)("ALL"),[eQ,e0]=(0,l.useState)(""),[e2,e1]=(0,l.useState)(1),[e5,e3]=(0,l.useState)(50),[e4,e6]=(0,l.useState)(!1),[e7,e8]=(0,l.useState)(!1),[e9,te]=(0,l.useState)(!1),[tt,ts]=(0,l.useState)(null),[ta,tr]=(0,l.useState)([]),[ti,tl]=(0,l.useState)(!1),[tn,to]=(0,l.useState)(!1),[td,tc]=(0,l.useState)(null),[tx,tm]=(0,l.useState)({serviceId:"",price:"",periodicity:"MONTHLY",nextChargeDate:"",notes:""}),[th,tu]=(0,l.useState)(!1),[tp,tg]=(0,l.useState)("");async function tb(){try{let[t,a,r]=await Promise.all([i.L.authenticatedFetch(`/api/members/${e.id}`),i.L.authenticatedFetch("/api/services"),i.L.authenticatedFetch(`/api/payments?memberId=${e.id}`)]),[l,n,o]=await Promise.all([t.json(),a.json(),r.json()]);s(l),f(Array.isArray(n)?n:[]),v(Array.isArray(o)?o:[]),_(1)}catch(e){console.error("Error loading member data:",e)}finally{L(!1)}}async function ty(e){try{let t=await i.L.authenticatedFetch(`/api/members/${encodeURIComponent(e)}/subscriptions`);if(!t.ok){if(404===t.status){P([]);return}throw Error(await t.text())}let s=await t.json();P(Array.isArray(s)?s:Array.isArray(s?.items)?s.items:[])}catch(e){console.error("No se pudieron cargar suscripciones",e),P([])}}async function tj(e){try{let t=await i.L.authenticatedFetch(`/api/members/${e}/familiares`),s=t.headers.get("content-type")||"";if(!t.ok){let e=await t.text();throw Error(`HTTP ${t.status} - ${e.slice(0,200)}`)}if(!s.includes("application/json")){let e=await t.text();throw Error(`Respuesta no JSON - ${e.slice(0,200)}`)}let a=await t.json();J(Array.isArray(a)?a:[])}catch(e){console.error("Error loading family members:",e),J([])}finally{W(!1)}}async function tf(e){e_(!0);try{let a=await i.L.authenticatedFetch(`/api/members/${e}/movements?pageSize=1000`);a.ok||(a=await i.L.authenticatedFetch(`/api/movements?memberId=${encodeURIComponent(e)}`));let r=a.headers.get("content-type")||"";if(!a.ok){let e=r.includes("application/json")?await a.json():await a.text();throw Error("string"==typeof e?e:e?.msg||`HTTP ${a.status}`)}if(!r.includes("application/json")){let e=await a.text();throw Error(`Respuesta no JSON - ${e.slice(0,200)}`)}let l=await a.json(),n=(Array.isArray(l)?l:Array.isArray(l?.items)?l.items:[]).map((t,s)=>({id:String(t.id??`${e}-${t.fecha??t.date??Date.now()}-${s}`),memberId:String(t.memberId??e),fecha:t.fecha??t.date??t.createdAt??new Date().toISOString(),concepto:t.concepto??t.description??"",tipo:S(t.tipo??t.type??""),monto:Number(t.monto??t.amount??0),origen:t.origen??t.source??void 0,refId:t.refId??t.referenceId??void 0,observaciones:t.observaciones??t.notes??"",paidAmount:Number(t.paidAmount??0),status:t.status,vencimiento:t.vencimiento??t.dueDate??void 0,allocations:t.allocations??void 0})).filter(e=>""!==e.concepto),o=await i.L.authenticatedFetch(`/api/payments?memberId=${encodeURIComponent(e)}`),d=o.headers.get("content-type")||"",c=[];if(o.ok&&d.includes("application/json")){let e=await o.json();c=Array.isArray(e)?e:[]}let x=c.map((t,s)=>({id:`pay-${t.id??`${e}-${t.fecha}-${s}`}`,memberId:e,fecha:t.fecha?new Date(t.fecha).toISOString():new Date().toISOString(),concepto:t.concepto&&String(t.concepto).trim()||`Pago${t.formaPago?" "+t.formaPago:""}${t.numeroRecibo?` • Recibo ${t.numeroRecibo}`:""}`,tipo:"CREDIT",monto:Number(t.monto)||0,origen:"PAGO",refId:t.id,observaciones:t.observaciones||""})),m=[...n,...x];function t(e){let t=new Date(e.fecha).toISOString().slice(0,10);return"PAGO"===e.origen&&e.refId?`PAGO:${e.refId}`:`MOV:${t}:${Number(e.monto)}:${e.concepto}:${e.tipo}:${e.id}`}function s(e){let t=0;return"PAGO"===e.origen&&(t+=2),e.observaciones&&e.observaciones.trim()&&(t+=1),t}let h=new Map;for(let e of m){let a=t(e),r=h.get(a);(!r||s(e)>s(r))&&h.set(a,e)}let u=Array.from(h.values());if("m1"===e){console.log("\n=== DEBUG DEDUPLICACI\xd3N ==="),console.log(`Movimientos antes deduplicaci\xf3n: ${m.length}`),console.log(`Movimientos despu\xe9s deduplicaci\xf3n: ${u.length}`),console.log("\nMovimientos eliminados por deduplicaci\xf3n:");let e=new Set(u.map(e=>e.id));m.filter(t=>!e.has(t.id)).forEach(e=>{console.log(`- ${e.fecha} | ${e.tipo} | ${e.monto} | ${e.concepto} | key: ${t(e)}`)})}u.sort((e,t)=>new Date(e.fecha).getTime()-new Date(t.fecha).getTime()),eH(u)}catch(e){console.error("No se pudo cargar movimientos",e),eH([])}finally{e_(!1)}}async function tN(e){tl(!0),ts(e),te(!0),tr([]);try{let t=eB.filter(t=>"CREDIT"===t.tipo&&Array.isArray(t.allocations)&&t.allocations.some(t=>t.debitId===e.id)).map(t=>{let s=t.allocations?.find(t=>t.debitId===e.id);return{id:t.id,fecha:t.fecha,concepto:t.concepto,monto:t.monto,allocatedAmount:s?.amount||0,tipo:"CREDIT"}}),s=[];for(let t of N){let a=await i.L.authenticatedFetch(`/api/payments/${t.id}`);if(a.ok){let t=await a.json();if(Array.isArray(t.allocations)){let a=t.allocations.find(t=>t.debitId===e.id);a&&s.push({id:t.id,fecha:t.fecha,concepto:t.concepto,monto:t.monto,allocatedAmount:a.amount||0,formaPago:t.formaPago,numeroRecibo:t.numeroRecibo,tipo:"PAYMENT"})}}}let a=[...t,...s].sort((e,t)=>new Date(e.fecha).getTime()-new Date(t.fecha).getTime()),r=[];for(let e of a){let t=r.find(t=>t.concepto===e.concepto&&t.fecha===e.fecha&&t.monto===e.monto&&t.allocatedAmount===e.allocatedAmount);if(t){if("PAYMENT"===e.tipo&&"PAYMENT"!==t.tipo){let s=r.indexOf(t);r[s]=e}}else r.push(e)}tr(r)}catch(e){console.error("Error al cargar cr\xe9ditos relacionados:",e),tr([])}finally{tl(!1)}}async function tv(e){ee(!0);try{let t=await i.L.authenticatedFetch(`/api/members/${e}/attachments`);if(!t.ok){let e=await t.text();throw Error(`HTTP ${t.status} - ${e.slice(0,200)}`)}let s=await t.json(),a=(Array.isArray(s)?s:Array.isArray(s?.items)?s.items:[]).map(e=>({id:e.id,memberId:e.memberId,name:e.name??e.nombre??e.filename??"archivo",type:e.type??e.mime??e.mimetype??"",size:Number(e.size)||0,url:e.url,uploadedAt:e.uploadedAt??e.fecha??e.createdAt??new Date().toISOString()}));K(a),em(1)}catch(e){console.error("No se pudo cargar adjuntos",e),K([])}finally{ee(!1)}}function tw(e){let t=[...e].sort((e,t)=>new Date(e.fecha).getTime()-new Date(t.fecha).getTime()),s=0,a=t.map(e=>("DEBIT"===e.tipo?s+=e.monto:s-=e.monto,{...e,saldo:s})),r=t.filter(e=>"DEBIT"===e.tipo).reduce((e,t)=>e+t.monto,0),i=t.filter(e=>"CREDIT"===e.tipo).reduce((e,t)=>e+t.monto,0);return{withRunning:a,totalDebe:r,totalHaber:i,saldo:r-i}}let{withRunning:tC,totalDebe:tE,totalHaber:tD,saldo:tS}=tw((0,l.useMemo)(()=>eB.filter(e=>{if("DEBIT"===e.tipo&&"REFINANCIADO"===e.status)return!1;let t="ALL"===eV||e.tipo===eV,s="ALL"===eX||e.status===eX,a=!eQ||(e.concepto||"").toLowerCase().includes(eQ.toLowerCase())||(e.observaciones||"").toLowerCase().includes(eQ.toLowerCase()),r=!0,i=!0;return ez&&(r=new Date(e.fecha)>=new Date(ez)),eq&&(i=new Date(e.fecha)<=new Date(eq+"T23:59:59")),t&&s&&a&&r&&i}),[eB,eV,eX,eQ,ez,eq])),tA=Math.max(1,Math.ceil(tC.length/e5)),tk=Math.min(e2,tA),tI=(tk-1)*e5,tT=tI+e5,tP=tC.slice(tI,tT),{transporteDebe:t$,transporteHaber:tL,transporteSaldo:tM,transporteAnterior:tF}=(0,l.useMemo)(()=>{let e=tC.slice(0,tI),t=e.reduce((e,t)=>e+("DEBIT"===t.tipo?t.monto:0),0),s=e.reduce((e,t)=>e+("CREDIT"===t.tipo?t.monto:0),0),a=tP.reduce((e,t)=>e+("DEBIT"===t.tipo?t.monto:0),0),r=tP.reduce((e,t)=>e+("CREDIT"===t.tipo?t.monto:0),0);return{transporteDebe:t+a,transporteHaber:s+r,transporteSaldo:t+a-s-r,transporteAnterior:{debe:t,haber:s,saldo:t-s}}},[tC,tI,tP]),{saldo:tG}=(0,l.useMemo)(()=>tw(eB),[eB]),tR=(0,l.useMemo)(()=>eB.filter(e=>"DEBIT"===S(e.tipo)&&("PENDIENTE"===e.status||"PARCIAL"===e.status)).reduce((e,t)=>e+Math.max(0,t.monto-(t.paidAmount||0)),0),[eB]),tO=(0,l.useMemo)(()=>t&&eB?"SUSPENDIDO"===t.estado?"SUSPENDIDO":function(e){let t=new Date;t.setHours(0,0,0,0);let s=e.filter(e=>"DEBIT"===S(e.tipo)&&Number(e.monto||0)-Number(e.paidAmount||0)>0);if(0===s.length)return"AL_DIA";for(let e of s)if(e.vencimiento){let s=new Date(e.vencimiento);if(s.setHours(0,0,0,0),s<t)return"ATRASADO"}return"AL_DIA"}(eB):t?.estado||"AL_DIA",[eB,t]);function tZ(e){eA(e),eI({fecha:e.fecha.slice(0,10),concepto:e.concepto,tipo:e.tipo,monto:(0,o.m9)(String(e.monto)),observaciones:e.observaciones||"",vencimiento:(e.vencimiento||"").slice(0,10)}),eD(!0)}function tB(){eD(!1),eA(null)}async function tH(){if("DEBIT"===ek.tipo&&ek.vencimiento&&ek.fecha){let e=new Date(ek.fecha);if(new Date(ek.vencimiento)<e){alert("La fecha de vencimiento no puede ser menor a la fecha del movimiento."),eP(!1);return}}if(t&&eS){eP(!0);try{let e=ek.fecha;eS&&e===eS.fecha.slice(0,10)&&(e=eS.fecha.slice(0,10));let s={fecha:e,concepto:ek.concepto,tipo:ek.tipo,monto:(0,o.sU)(ek.monto||""),observaciones:ek.observaciones};if("DEBIT"===ek.tipo){let e=ek.vencimiento||null;if(e&&/^\d{2}\/\d{2}\/\d{4}$/.test(e)){let[t,s,a]=e.split("/");e=`${a}-${s}-${t}`}s.vencimiento=e}console.log("PATCH vencimiento:",s.vencimiento),console.log("PATCH payload completo:",JSON.stringify(s,null,2)),console.log("editForm original:",JSON.stringify(ek,null,2));let a=await i.L.authenticatedFetch(`/api/members/${t.id}/movements/${eS.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(404===a.status&&(a=await i.L.authenticatedFetch(`/api/movements/${eS.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})),!a.ok){let e="Error al guardar",t="";try{t=await a.text();let s=JSON.parse(t);s.msg&&(e=s.msg.includes("Movimiento no encontrado")?"El movimiento no existe o fue eliminado.":s.msg.includes("Tipo inv\xe1lido")?"El tipo de movimiento no es v\xe1lido.":s.msg.includes("Vencimiento inv\xe1lido")||s.msg.includes("Fecha inv\xe1lida")?"La fecha ingresada no es v\xe1lida. Usa formato DD/MM/YYYY o YYYY-MM-DD.":s.msg)}catch{e=t||e}alert(e),console.error("Guardar movimiento:",e);return}await tf(t.id),tB()}catch(e){alert("No se pudo guardar el movimiento"),console.error(e)}finally{eP(!1)}}}async function tY(e){if(t&&confirm("\xbfEliminar movimiento?"))try{let s=!1;for(;;){let a=`/api/movements/${encodeURIComponent(e)}`+(s?"?cascade=true":""),r=await i.L.authenticatedFetch(a,{method:"DELETE"});if(r.ok){await tf(t.id);return}if(409!==r.status||s){let e=await r.json().catch(()=>({}));throw Error(e.msg||"Error al eliminar")}{let e=(await r.json()).relatedCredits||[],t="Este d\xe9bito tiene pagos relacionados:\n";if(e.forEach((e,s)=>{t+=`
${s+1}. ${e.fecha?new Date(e.fecha).toLocaleDateString("es-PY"):""} - ${e.concepto||""} - Gs.${(e.monto||0).toLocaleString("es-PY")}`}),t+="\n\nSi contin\xfaas, se eliminar\xe1n tambi\xe9n estos pagos. \xbfDeseas continuar?",!window.confirm(t))return;s=!0}}}catch(e){alert("No se pudo eliminar el movimiento"),console.error(e)}}async function t_(e){try{var t;let s=await i.L.authenticatedFetch(`/api/payments/${e}`);if(!s.ok)throw Error(await s.text());t=await s.json(),eF(t),eR({fecha:(t.fecha||"").slice(0,10),concepto:t.concepto||"",formaPago:t.formaPago||"",numeroRecibo:t.numeroRecibo||"",monto:(0,o.m9)(String(t.monto||"")),cobradorId:t.cobradorId||"",observaciones:t.observaciones||""}),eL(!0)}catch(e){alert("No se pudo cargar el pago"),console.error(e)}}function tz(){eL(!1),eF(null)}async function tU(){if(eM){eZ(!0);try{let s=function(e){if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;if(/^\d{2}\/\d{2}\/\d{4}$/.test(e)){let[t,s,a]=e.split("/");return`${a}-${s.padStart(2,"0")}-${t.padStart(2,"0")}`}if(/^\d{2}-\d{2}-\d{4}$/.test(e)){let[t,s,a]=e.split("-");return`${a}-${s.padStart(2,"0")}-${t.padStart(2,"0")}`}return e}(eG.fecha);console.log("Fecha original:",eG.fecha),console.log("Fecha normalizada:",s),s=s.slice(0,10);let a={...eG,fecha:s,monto:(0,o.sU)(eG.monto||"")};console.log("Payload a enviar:",a);let r=await i.L.authenticatedFetch(`/api/payments/${eM.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw Error(await r.text());await tb();let l=t?.id||e.id;await tf(l),tz()}catch(e){alert("No se pudo guardar el pago"),console.error(e)}finally{eZ(!1)}}}async function tq(s){if(confirm("\xbfEliminar pago?"))try{let a=await i.L.authenticatedFetch(`/api/payments/${s}`,{method:"DELETE"});if(!a.ok)throw Error(await a.text());await tb();let r=t?.id||e.id;await tf(r)}catch(e){alert("No se pudo eliminar el pago"),console.error(e)}}function tJ(){to(!1),tc(null),tg("")}async function tV(){if(!t||!td)return;if(!tx.serviceId){tg("Selecciona un servicio.");return}let e=parseFloat(tx.price);if(isNaN(e)||e<=0){tg("El precio debe ser un n\xfamero mayor a cero.");return}if(!tx.nextChargeDate){tg("La fecha de pr\xf3ximo cobro es requerida.");return}tu(!0),tg("");try{let s={serviceId:tx.serviceId,price:e,periodicity:tx.periodicity,nextChargeDate:tx.nextChargeDate,notes:tx.notes},a=await i.L.authenticatedFetch(`/api/members/${t.id}/subscriptions/${td.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){let e=await a.text();throw Error(e||"Error al actualizar suscripci\xf3n")}await ty(t.id),tg("Suscripci\xf3n actualizada correctamente."),setTimeout(()=>{tu(!1),tJ()},1e3)}catch(e){console.error("Error al editar suscripci\xf3n:",e),tg(e?.message||"No se pudo actualizar la suscripci\xf3n."),tu(!1)}}async function tW(e){if(!t)return;let s=h.find(t=>t.id===e.serviceId)?.nombre||"Servicio desconocido";if(confirm(`\xbfEst\xe1s seguro de que quieres cancelar la suscripci\xf3n a "${s}"?

Esta acci\xf3n no se puede deshacer y la suscripci\xf3n se eliminar\xe1 completamente del listado.`))try{let s=await i.L.authenticatedFetch(`/api/members/${t.id}/subscriptions/${e.id}`,{method:"DELETE"});if(!s.ok){let e=await s.text();throw Error(e||"Error al cancelar suscripci\xf3n")}await ty(t.id),alert("Suscripci\xf3n cancelada y eliminada correctamente.")}catch(e){console.error("Error al cancelar suscripci\xf3n:",e),alert(`No se pudo cancelar la suscripci\xf3n: ${e?.message||"Error desconocido"}`)}}function tX(){es(!1)}async function tK(){if(t){if(!ea.length){eo("Seleccion\xe1 al menos un archivo.");return}el(!0),eo("");try{for(let e of ea){let s=new FormData;s.append("file",e);let a=await i.L.authenticatedFetch(`/api/members/${t.id}/attachments`,{method:"POST",body:s});if(!a.ok){let e=await a.text();throw Error(e)}}await tv(t.id),eo("Adjunto(s) subido(s) correctamente."),setTimeout(()=>{el(!1),tX()},600)}catch(e){console.error(e),eo(e?.message||"No se pudo subir el/los adjunto(s)."),el(!1)}}}async function tQ(e){if(t&&confirm("\xbfEliminar adjunto?"))try{let s=await i.L.authenticatedFetch(`/api/members/${t.id}/attachments?attachmentId=${encodeURIComponent(e)}`,{method:"DELETE"}),a=s.headers.get("content-type")||"";if(!s.ok){let e=a.includes("application/json")?await s.json():await s.text();throw Error("string"==typeof e?e:e?.msg||`HTTP ${s.status}`)}await tv(t.id)}catch(e){console.error("No se pudo eliminar adjunto",e),alert("No se pudo eliminar adjunto")}}function t0(){ey(!1),eC({nombres:"",apellidos:"",ci:"",parentesco:"",nacimiento:"",email:"",telefono:""}),ev("")}async function t2(){if(t){ef(!0),ev("");try{if(!ew.nombres.trim()||!ew.apellidos.trim()||!ew.ci.trim()){ev("Nombres, apellidos y CI son obligatorios");return}let e=await i.L.authenticatedFetch(`/api/members/${t.id}/familiares`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ew)});if(!e.ok){let t=await e.text();throw Error(t)}await tj(t.id),await new Promise(e=>setTimeout(e,200)),await t5(t.id),ev("Familiar agregado correctamente"),setTimeout(()=>{t0()},1500)}catch(e){console.error("Error adding family member:",e),ev(`Error: ${e?.message||"No se pudo agregar el familiar"}`)}finally{ef(!1)}}}async function t1(e,s){if(t&&confirm(`\xbfEliminar a ${s} de la familia?`))try{let s=await i.L.authenticatedFetch(`/api/families/${e}`,{method:"DELETE"});if(!s.ok){let e=await s.text();throw Error(e)}await tj(t.id),await new Promise(e=>setTimeout(e,200)),await t5(t.id)}catch(e){console.error("Error deleting family member:",e),alert(`Error: ${e?.message||"No se pudo eliminar el familiar"}`)}}async function t5(e){if(t)try{let a=await i.L.authenticatedFetch(`/api/members/${e}/familiares`);if(!a.ok){console.error("No se pudo obtener familiares para actualizar categor\xeda");return}let r=await a.json(),l=Array.isArray(r)?r.length:0;console.log(`� Conteo de familiares: ${l}, Categor\xeda actual: ${t.categoria}`);let n=t.categoria;if(0===l&&"Familiar"===t.categoria?n="Individual":l>0&&"Individual"===t.categoria&&(n="Familiar"),n!==t.categoria){console.log(`🔄 Actualizando categor\xeda: ${t.categoria} → ${n}`);let a=await i.L.authenticatedFetch(`/api/members/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({categoria:n})});if(!a.ok){let e=await a.text();throw console.error(`❌ Error en API:`,e),Error(e)}s(e=>e?{...e,categoria:n}:null),console.log(`✅ Categor\xeda actualizada autom\xe1ticamente a: ${n}`)}else console.log("No se requiere cambio de categor\xeda")}catch(e){console.error("Error updating member category:",e)}}let t3=Math.max(1,Math.ceil(N.length/z)),t4=Math.min(Y,t3),t6=N.slice((t4-1)*z,(t4-1)*z+z),t7=(0,l.useMemo)(()=>{let e=ed.trim().toLowerCase();return e?X.filter(t=>(t.name||"").toLowerCase().includes(e)):X},[X,ed]),t8=Math.max(1,Math.ceil(t7.length/eh)),t9=Math.min(ex,t8),se=t7.slice((t9-1)*eh,(t9-1)*eh+eh);if($)return a.jsx(r.Z,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})});if(!t)return a.jsx(r.Z,{children:(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-500",children:"Socio no encontrado"}),a.jsx(j.default,{href:"/admin/socios",className:"text-primary-600 hover:text-primary-800 mt-4 inline-block",children:"← Volver a Socios"})]})});let st=h.filter(e=>t.servicios.includes(e.id)),ss=N[0];function sa(e){let t=function(e){if("DEBIT"!==e.tipo)return"—";if("PENDIENTE"===e.status||"PARCIAL"===e.status||"CANCELADO"===e.status)return e.status;if("REFINANCIADO"===e.status)return"REFINANCIADO";let t=Number(e.paidAmount||0),s=Number(e.monto||0);return t<=0?"PENDIENTE":t>=s?"CANCELADO":"PARCIAL"}(e);return"—"===t?a.jsx("span",{className:"text-gray-400",children:"—"}):a.jsx("span",{className:`px-2 py-0.5 rounded-full border text-xs font-medium ${{PENDIENTE:"bg-yellow-100 text-yellow-800 border-yellow-200",PARCIAL:"bg-blue-100 text-blue-800 border-blue-200",CANCELADO:"bg-green-100 text-green-800 border-green-200",REFINANCIADO:"bg-gray-200 text-gray-600 border-gray-300"}[t]}`,children:t})}return(0,a.jsxs)(r.Z,{children:[(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsxs)("div",{className:"px-6 py-4",children:[(0,a.jsxs)("nav",{className:"flex items-center text-sm text-gray-500 mb-3",children:[a.jsx(j.default,{href:"/admin",className:"hover:text-gray-700",children:"Panel"}),a.jsx("span",{className:"mx-2",children:"/"}),a.jsx(j.default,{href:"/admin/socios",className:"hover:text-gray-700",children:"Socios"}),a.jsx("span",{className:"mx-2",children:"/"}),(0,a.jsxs)("span",{className:"text-gray-900 font-medium",children:[t.nombres," ",t.apellidos]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(j.default,{href:"/admin/socios",className:"p-1.5 hover:bg-gray-100 rounded-md",children:a.jsx(d.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-xl font-semibold text-gray-900",children:[t.nombres," ",t.apellidos]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[t.codigo," • ",t.subcategoria]})]}),a.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium border ${"AL_DIA"===tO?"bg-green-50 text-green-700 border-green-200":"ATRASADO"===tO?"bg-red-50 text-red-700 border-red-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:"AL_DIA"===tO?"Al D\xeda":"ATRASADO"===tO?"Atrasado":"Suspendido"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(j.default,{href:`/admin/socios/${t.id}/editar`,className:"bg-blue-600 text-white px-3 py-1.5 rounded-md hover:bg-blue-700 flex items-center gap-1.5 text-sm",children:[a.jsx(c.Z,{className:"w-3.5 h-3.5"}),"Editar"]})})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-10 gap-4",children:[(0,a.jsxs)("div",{className:"xl:col-span-7 space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[a.jsx(x.Z,{className:"w-4 h-4 mr-2 text-gray-500"}),"Informaci\xf3n del Socio"]})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Datos Personales"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Nombres"}),a.jsx("div",{className:"text-sm font-medium",children:t.nombres})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Apellidos"}),a.jsx("div",{className:"text-sm font-medium",children:t.apellidos})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"C\xe9dula"}),a.jsx("div",{className:"text-sm font-medium",children:t.ci})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"RUC"}),a.jsx("div",{className:"text-sm font-medium",children:t.ruc||"-"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Informaci\xf3n Personal"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Nacimiento"}),a.jsx("div",{className:"text-sm font-medium",children:t.nacimiento?(0,o.p6)(t.nacimiento):"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Nacionalidad"}),a.jsx("div",{className:"text-sm font-medium",children:t.nacionalidad||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Fecha de Alta"}),a.jsx("div",{className:"text-sm font-medium",children:(0,o.p6)(t.alta)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Categor\xeda"}),a.jsx("div",{className:"text-sm font-medium",children:t.categoria})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Contacto"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Tel\xe9fono"}),a.jsx("div",{className:"text-sm font-medium",children:t.telefono||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Celular"}),a.jsx("div",{className:"text-sm font-medium",children:t.celular||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Email"}),a.jsx("div",{className:"text-sm font-medium",children:t.email||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Direcci\xf3n"}),a.jsx("div",{className:"text-sm font-medium",children:t.direccion||"-"})]})]})]})]}),t.datosLaborales&&(0,a.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-100",children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Datos Laborales"}),a.jsx("div",{className:"text-sm font-medium mt-1",children:t.datosLaborales})]})]})]}),M&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[a.jsx(m.Z,{className:"w-4 h-4 mr-2 text-gray-500"}),"Estado de Cuota Social"]})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Estado Actual"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Estado"}),(0,a.jsxs)("div",{className:`text-sm font-medium flex items-center gap-2 ${"up-to-date"===M.currentStatus?"text-green-700":"behind"===M.currentStatus?"text-red-700":"text-gray-700"}`,children:[a.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${"up-to-date"===M.currentStatus?"bg-green-500":"behind"===M.currentStatus?"bg-red-500":"bg-gray-400"}`}),"up-to-date"===M.currentStatus?"Al d\xeda":"behind"===M.currentStatus?"Atrasado":"Desconocido"]})]}),M.monthsBehind>0&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Meses atrasados"}),(0,a.jsxs)("div",{className:"text-sm font-medium text-red-700",children:[M.monthsBehind," mes",1!==M.monthsBehind?"es":""]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"\xdaltimo Pago"}),a.jsx("div",{className:"space-y-2",children:(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Mes pagado"}),a.jsx("div",{className:"text-sm font-medium",children:M.lastPaidMonthText||"Sin registros"})]})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Pr\xf3ximo Pago"}),a.jsx("div",{className:"space-y-2",children:(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Mes sugerido"}),a.jsx("div",{className:"text-sm font-medium text-blue-700",children:M.suggestedPaymentMonth})]})})]})]}),t&&("Socio"===t.subcategoria||"Socio Patrimonial"===t.subcategoria)&&a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Gesti\xf3n Anual"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Generar o revertir cuotas de todo el a\xf1o"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>R(!0),className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Generar Cuotas Anuales"}),a.jsx("button",{onClick:()=>Z(!0),className:"px-3 py-1.5 text-xs bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Revertir Cuotas"})]})]})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between",children:(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[a.jsx(u,{className:"w-4 h-4 mr-2 text-gray-500"}),"Suscripciones Activas"]})}),a.jsx("div",{className:"p-4",children:0===A.length?(0,a.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[a.jsx(u,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),a.jsx("p",{className:"text-sm",children:"No hay suscripciones activas"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Las suscripciones se crean desde “A\xf1adir servicio”"})]}):a.jsx("div",{className:"space-y-2",children:A.map(e=>{let t=h.find(t=>t.id===e.serviceId),s=t?.nombre||"Servicio desconocido",r="ACTIVE"===e.status?"bg-green-100 text-green-700":"PAUSED"===e.status?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700",i="ACTIVE"===e.status?"Activa":"PAUSED"===e.status?"Pausada":"Desconocido";return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border border-gray-100 hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-md flex items-center justify-center",children:a.jsx(u,{className:"w-3 h-3 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium",children:s}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${r}`,children:i})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-0.5",children:[(0,a.jsxs)("span",{children:[(0,o.xG)(e.price||0)," • ","MONTHLY"===e.periodicity?"Mensual":"Anual"]}),(0,a.jsxs)("span",{children:["Vencimiento: ",e.nextChargeDate?(0,o.p6)(e.nextChargeDate):"-"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx("button",{className:"px-2 py-1 text-xs border border-blue-200 text-blue-600 rounded hover:bg-blue-50 transition-colors",onClick:()=>{let t;return tc(e),t="",void(e.nextChargeDate&&(t=e.nextChargeDate.split("T")[0]),tm({serviceId:e.serviceId,price:(e.price||0).toString(),periodicity:e.periodicity||"MONTHLY",nextChargeDate:t,notes:e.notes||""}),tg(""),to(!0))},title:"Editar suscripci\xf3n",children:"Editar"}),a.jsx("button",{className:"px-2 py-1 text-xs border border-red-200 text-red-600 rounded hover:bg-red-50 transition-colors",onClick:()=>tW(e),title:"Cancelar y eliminar suscripci\xf3n",children:"Cancelar"})]})]},e.id)})})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[a.jsx(m.Z,{className:"w-4 h-4 mr-2 text-gray-500"}),"Historial de Pagos"]})}),a.jsx("div",{className:"p-4",children:N.length>0?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-500",children:"Fecha"}),a.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-500",children:"Concepto"}),a.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-500",children:"Forma Pago"}),a.jsx("th",{className:"text-right py-2 px-2 text-xs font-medium text-gray-500",children:"Monto"}),a.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-500",children:"Recibo"})]})}),a.jsx("tbody",{children:t6.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[a.jsx("td",{className:"py-2 px-2 text-sm",children:(0,o.p6)(e.fecha)}),a.jsx("td",{className:"py-2 px-2 text-sm",children:e.concepto}),a.jsx("td",{className:"py-2 px-2 text-sm capitalize",children:e.formaPago}),a.jsx("td",{className:"py-2 px-2 text-right font-medium text-sm",children:(0,o.xG)(e.monto)}),a.jsx("td",{className:"py-2 px-2 text-sm",children:e.numeroRecibo||"-"})]},e.id))})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["P\xe1gina ",t4," de ",t3," • ",N.length," pagos"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("select",{value:z,onChange:e=>{U(Number(e.target.value)),_(1)},className:"px-2 py-1 border rounded text-xs",children:[a.jsx("option",{value:5,children:"5"}),a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:20,children:"20"})]}),a.jsx("button",{onClick:()=>_(e=>Math.max(1,e-1)),className:"px-2 py-1 border rounded hover:bg-gray-50 text-xs",disabled:t4<=1,children:"‹"}),a.jsx("button",{onClick:()=>_(e=>Math.min(t3,e+1)),className:"px-2 py-1 border rounded hover:bg-gray-50 text-xs",disabled:t4>=t3,children:"›"})]})]})]}):a.jsx("div",{className:"text-gray-500 text-center py-6 text-sm",children:"No hay pagos registrados"})})]})]}),(0,a.jsxs)("div",{className:"xl:col-span-3 space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"p-4 text-center",children:[(()=>{let e=function(e){if(!e)return"";let t=String(e);return/^https?:\/\//i.test(t)?t:t.startsWith("/")?t:`/${t}`}(t.foto),s=e?`${e}${e.includes("?")?"&":"?"}v=1`:"";return s&&!B?a.jsx("img",{src:s,alt:`${t.nombres} ${t.apellidos}`,className:"w-20 h-20 rounded-full mx-auto object-cover mb-3 border-2 border-gray-200",referrerPolicy:"no-referrer",onError:()=>H(!0)}):a.jsx("div",{className:"w-20 h-20 rounded-full mx-auto bg-gray-100 border-2 border-gray-200 flex items-center justify-center mb-3",children:a.jsx(x.Z,{className:"w-10 h-10 text-gray-400"})})})(),(0,a.jsxs)("h4",{className:"font-medium text-sm text-gray-900",children:[t.nombres," ",t.apellidos]}),a.jsx("p",{className:"text-xs text-gray-500",children:t.codigo})]}),(0,a.jsxs)("div",{className:"border-t border-gray-100 p-3 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Deuda Total"}),a.jsx("span",{className:`text-sm font-medium ${tR>0?"text-red-600":"text-green-600"}`,children:tR>0?(0,o.xG)(tR):(0,o.xG)(0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Servicios"}),a.jsx("span",{className:"text-sm font-medium text-blue-600",children:st.length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"\xdaltimo Pago"}),a.jsx("span",{className:"text-xs font-medium",children:ss?(0,o.p6)(ss.fecha):"Sin pagos"})]}),tG<0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Saldo a favor"}),a.jsx("span",{className:"text-xs font-medium text-green-600",children:(0,o.xG)(Math.abs(tG))})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2 text-gray-500"}),"Familiares"]}),a.jsx("button",{type:"button",onClick:function(){console.log("\uD83D\uDD0D openFamilyModal llamado"),console.log("\uD83E\uDDF9 Modales existentes antes de abrir:",document.querySelectorAll(".fixed.inset-0").length),eC({nombres:"",apellidos:"",ci:"",parentesco:"",nacimiento:"",email:"",telefono:""}),ev(""),ey(!0),console.log("\uD83D\uDCC4 showAddFamilyModal establecido a true")},className:"p-1 hover:bg-gray-100 rounded",title:"Agregar Familiar",children:a.jsx(g.Z,{className:"w-3 h-3 text-gray-500"})})]}),a.jsx("div",{className:"p-3",children:V?a.jsx("div",{className:"text-gray-500 text-xs",children:"Cargando..."}):q.length>0?(0,a.jsxs)("div",{className:"space-y-2",children:[q.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"text-xs font-medium truncate",children:[e.nombres," ",e.apellidos]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["CI: ",e.ci]}),e.parentesco&&a.jsx("div",{className:"text-xs text-gray-400",children:e.parentesco})]}),a.jsx("button",{onClick:()=>t1(e.id,`${e.nombres} ${e.apellidos}`),className:"px-1.5 py-0.5 text-xs border border-red-300 text-red-600 rounded hover:bg-red-50 flex-shrink-0",title:"Eliminar familiar",children:"\xd7"})]},e.id)),q.length>3&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center pt-2 border-t border-gray-100",children:["+",q.length-3," m\xe1s"]}),a.jsx(j.default,{href:`/admin/familiares?socio=${e.id}`,className:"block text-center text-xs text-blue-600 hover:text-blue-700 mt-2 pt-2 border-t border-gray-100",children:"Ver todos"})]}):a.jsx("div",{className:"text-gray-500 text-xs text-center py-2",children:"No hay familiares asociados"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Adjuntos"}),a.jsx("button",{onClick:function(){es(!0),er([]),eo("")},className:"p-1 hover:bg-gray-100 rounded",title:"Subir adjuntos",children:a.jsx(g.Z,{className:"w-3 h-3 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"space-y-2 mb-3",children:[a.jsx("input",{value:ed,onChange:e=>{ec(e.target.value),em(1)},placeholder:"Buscar adjunto…",className:"px-2 py-1 border rounded w-full text-xs"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Filas:"}),(0,a.jsxs)("select",{value:eh,onChange:e=>{eu(Number(e.target.value)),em(1)},className:"px-2 py-1 border rounded text-xs",children:[a.jsx("option",{value:5,children:"5"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"}),a.jsx("option",{value:200,children:"200"})]})]})]}),Q?a.jsx("div",{className:"text-gray-500 text-xs",children:"Cargando..."}):0===t7.length?a.jsx("div",{className:"text-gray-500 text-xs text-center py-2",children:ed?"No se encontraron adjuntos":"Sin adjuntos"}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"space-y-2",children:se.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 p-2 bg-gray-50 rounded border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs font-medium truncate",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(e.size/1024).toFixed(1)," KB • ",new Date(e.uploadedAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[a.jsx("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"px-2 py-1 text-xs border rounded hover:bg-gray-50",children:"Ver"}),a.jsx("button",{onClick:()=>tQ(e.id),className:"px-2 py-1 text-xs border border-red-300 text-red-600 rounded hover:bg-red-50",children:"\xd7"})]})]},e.id))}),t8>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["P\xe1gina ",t9," de ",t8," • ",t7.length," adjuntos"]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>em(e=>Math.max(1,e-1)),disabled:t9<=1,className:"px-2 py-1 border rounded hover:bg-gray-50 text-xs disabled:opacity-50",children:"‹"}),a.jsx("button",{onClick:()=>em(e=>Math.min(t8,e+1)),disabled:t9>=t8,className:"px-2 py-1 border rounded hover:bg-gray-50 text-xs disabled:opacity-50",children:"›"})]})]})]})]})]})]})]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Gesti\xf3n de movimientos"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Editar o eliminar d\xe9bitos y cr\xe9ditos"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>e6(!0),className:"px-2 py-1 text-xs rounded border hover:bg-gray-50",children:"Editar D\xe9bitos"}),a.jsx("button",{onClick:()=>e8(!0),className:"px-2 py-1 text-xs rounded border hover:bg-gray-50",children:"Editar Cr\xe9ditos"})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[a.jsx(b.Z,{className:"w-4 h-4 mr-2 text-gray-500"}),"Estado de cuenta (Movimientos)"]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:I,className:"px-2 py-1 text-xs border rounded hover:bg-gray-50",title:"Exportar Excel",children:"\uD83D\uDCCA Excel"}),a.jsx("button",{onClick:T,className:"px-2 py-1 text-xs border rounded hover:bg-gray-50",title:"Exportar PDF",children:"\uD83D\uDCC4 PDF"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-end gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Desde"}),a.jsx("input",{type:"date",value:ez,onChange:e=>{eU(e.target.value),e1(1)},className:"px-2 py-1 border rounded text-xs"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Hasta"}),a.jsx("input",{type:"date",value:eq,onChange:e=>{eJ(e.target.value),e1(1)},className:"px-2 py-1 border rounded text-xs"})]}),(0,a.jsxs)("select",{value:eV,onChange:e=>{eW(e.target.value),e1(1)},className:"px-2 py-1 border rounded text-xs",children:[a.jsx("option",{value:"ALL",children:"Todos"}),a.jsx("option",{value:"DEBIT",children:"Debe"}),a.jsx("option",{value:"CREDIT",children:"Haber"})]}),(0,a.jsxs)("select",{value:eX,onChange:e=>{eK(e.target.value),e1(1)},className:"px-2 py-1 border rounded text-xs",children:[a.jsx("option",{value:"ALL",children:"Todos estados"}),a.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),a.jsx("option",{value:"PARCIAL",children:"Parcial"}),a.jsx("option",{value:"CANCELADO",children:"Cancelado"})]}),a.jsx("input",{type:"text",value:eQ,onChange:e=>{e0(e.target.value),e1(1)},placeholder:"Buscar...",className:"px-2 py-1 border rounded text-xs flex-1 min-w-0"}),a.jsx("button",{onClick:function(){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),s=new Date(e.getFullYear(),e.getMonth()+1,0);eU(t.toISOString().slice(0,10)),eJ(s.toISOString().slice(0,10)),e1(1)},className:"px-2 py-1 border rounded hover:bg-gray-50 text-xs",children:"Mes actual"}),a.jsx("button",{onClick:function(){let e=new Date,t=new Date(e.getFullYear(),0,1),s=new Date(e.getFullYear(),11,31);eU(t.toISOString().slice(0,10)),eJ(s.toISOString().slice(0,10)),e1(1)},className:"px-2 py-1 border rounded hover:bg-gray-50 text-xs",children:"Este a\xf1o"}),a.jsx("button",{onClick:function(){eU(""),eJ(""),eW("ALL"),eK("ALL"),e0(""),e1(1)},className:"px-2 py-1 border rounded hover:bg-gray-50 text-xs",children:"Limpiar"})]})]}),a.jsx("div",{className:"p-4",children:eY?a.jsx("div",{className:"text-gray-500 py-6 text-center text-sm",children:"Cargando movimientos..."}):0===tC.length?a.jsx("div",{className:"text-gray-500 text-center py-6 text-sm",children:"Sin movimientos"}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-500",children:"Fecha"}),a.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-500",children:"Concepto"}),a.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-500",children:"Observaciones"}),a.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-500",children:"Estado"}),a.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-500",children:"Vence"}),a.jsx("th",{className:"text-right py-2 px-2 text-xs font-medium text-gray-500",children:"Debe"}),a.jsx("th",{className:"text-right py-2 px-2 text-xs font-medium text-gray-500",children:"Haber"}),a.jsx("th",{className:"text-right py-2 px-2 text-xs font-medium text-gray-500",children:"Saldo"}),a.jsx("th",{className:"text-center py-2 px-2 text-xs font-medium text-gray-500",children:"Acciones"})]})}),(0,a.jsxs)("tbody",{children:[tk>1&&tA>1&&(0,a.jsxs)("tr",{className:"bg-yellow-50 border-b border-yellow-200",children:[a.jsx("td",{className:"py-1.5 px-2 font-medium text-yellow-700 text-xs",children:"—"}),a.jsx("td",{className:"py-1.5 px-2 font-medium text-yellow-700 text-xs",children:"TRANSPORTE"}),a.jsx("td",{className:"py-1.5 px-2 font-medium text-yellow-700 text-xs",children:"—"}),a.jsx("td",{className:"py-1.5 px-2 font-medium text-yellow-700 text-xs",children:"—"}),a.jsx("td",{className:"py-1.5 px-2 font-medium text-yellow-700 text-xs",children:"—"}),a.jsx("td",{className:"py-1.5 px-2 text-right font-medium text-yellow-700 text-xs",children:tF.debe>0?(0,o.xG)(tF.debe):"-"}),a.jsx("td",{className:"py-1.5 px-2 text-right font-medium text-yellow-700 text-xs",children:tF.haber>0?(0,o.xG)(tF.haber):"-"}),a.jsx("td",{className:"py-1.5 px-2 text-right font-bold text-yellow-800 text-xs",children:(0,o.xG)(tF.saldo)}),a.jsx("td",{className:"py-1.5 px-2 text-center font-medium text-yellow-700 text-xs",children:"—"})]}),tP.map(e=>{let t="DEBIT"===e.tipo&&Number(e.paidAmount||0)>0;return(0,a.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-1.5 px-2 text-xs",children:(0,o.p6)(e.fecha)}),a.jsx("td",{className:"py-1.5 px-2 text-xs",children:e.concepto}),a.jsx("td",{className:"py-1.5 px-2 text-xs",children:e.observaciones||"—"}),a.jsx("td",{className:"py-1.5 px-2 text-xs",children:sa(e)}),a.jsx("td",{className:"py-1.5 px-2 text-xs",children:"DEBIT"===e.tipo&&e.vencimiento?(0,o.p6)(e.vencimiento):"—"}),a.jsx("td",{className:"py-1.5 px-2 text-right text-xs",children:"DEBIT"===e.tipo?(0,o.xG)(e.monto):"-"}),a.jsx("td",{className:"py-1.5 px-2 text-right text-xs",children:"CREDIT"===e.tipo?(0,o.xG)(e.monto):"-"}),a.jsx("td",{className:"py-1.5 px-2 text-right font-medium text-xs",children:(0,o.xG)(e.saldo??0)}),a.jsx("td",{className:"py-1.5 px-2 text-center text-xs",children:t?(0,a.jsxs)("button",{onClick:()=>tN(e),className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 border border-blue-200 rounded hover:bg-blue-100 transition-colors",title:"Ver pagos relacionados",children:[a.jsx(m.Z,{className:"w-3 h-3"}),a.jsx("span",{className:"text-xs",children:"Ver"})]}):"DEBIT"===e.tipo?a.jsx("span",{className:"text-gray-400 text-xs",children:"Sin pagos"}):a.jsx("span",{className:"text-gray-300",children:"—"})})]},e.id)})]}),(0,a.jsxs)("tfoot",{children:[tA>1&&(0,a.jsxs)("tr",{className:"bg-blue-50 border-t border-blue-200",children:[a.jsx("td",{colSpan:5,className:"py-2 px-2 text-right font-medium text-blue-700 text-xs",children:"Subtotal (Transporte)"}),a.jsx("td",{className:"py-2 px-2 text-right font-medium text-blue-700 text-xs",children:(0,o.xG)(t$)}),a.jsx("td",{className:"py-2 px-2 text-right font-medium text-blue-700 text-xs",children:(0,o.xG)(tL)}),a.jsx("td",{className:"py-2 px-2 text-right font-bold text-blue-800 text-xs",children:(0,o.xG)(tM)}),a.jsx("td",{className:"py-2 px-2"})]}),(0,a.jsxs)("tr",{className:"bg-gray-50 border-t-2 border-gray-300",children:[a.jsx("td",{colSpan:5,className:"py-2 px-2 text-right font-semibold text-xs",children:"Totales"}),a.jsx("td",{className:"py-2 px-2 text-right font-semibold text-xs",children:(0,o.xG)(t$)}),a.jsx("td",{className:"py-2 px-2 text-right font-semibold text-xs",children:(0,o.xG)(tL)}),a.jsx("td",{className:"py-2 px-2 text-right font-bold text-xs",children:(0,o.xG)(tM)}),a.jsx("td",{className:"py-2 px-2"})]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["P\xe1gina ",tk," de ",tA," • ",tC.length," movimientos"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs",children:"Filas:"}),(0,a.jsxs)("select",{value:e5,onChange:e=>{e3(Number(e.target.value)),e1(1)},className:"px-2 py-1 border rounded text-xs",children:[a.jsx("option",{value:20,children:"20"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"}),a.jsx("option",{value:200,children:"200"})]}),a.jsx("button",{onClick:()=>e1(e=>Math.max(1,e-1)),className:"px-2 py-1 border rounded hover:bg-gray-50 text-xs",disabled:tk<=1,children:"‹"}),a.jsx("button",{onClick:()=>e1(e=>Math.min(tA,e+1)),className:"px-2 py-1 border rounded hover:bg-gray-50 text-xs",disabled:tk>=tA,children:"›"})]})]})]})})]}),t.observaciones&&a.jsx("div",{className:"bg-white rounded-lg shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Observaciones"}),a.jsx("p",{className:"text-gray-700",children:t.observaciones})]})})]}),ep&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Asociar Familiar"}),a.jsx("button",{onClick:()=>eg(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar",children:a.jsx(y.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded text-sm",children:[(0,a.jsxs)("div",{className:"font-medium",children:["Socio titular: ",t.nombres," ",t.apellidos]}),(0,a.jsxs)("div",{className:"text-gray-600",children:["C\xf3digo: ",t.codigo]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombres *"}),a.jsx("input",{type:"text",value:ew.nombres,onChange:e=>eC(t=>({...t,nombres:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ej. Ana Mar\xeda"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellidos *"}),a.jsx("input",{type:"text",value:ew.apellidos,onChange:e=>eC(t=>({...t,apellidos:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ej. G\xf3mez Duarte"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CI *"}),a.jsx("input",{type:"text",value:ew.ci,onChange:e=>eC(t=>({...t,ci:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"1234567"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parentesco"}),a.jsx("input",{type:"text",value:ew.parentesco,onChange:e=>eC(t=>({...t,parentesco:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Hija, Esposo, etc."})]})]}),eN&&a.jsx("div",{className:"mt-3 text-sm",children:a.jsx("span",{className:eN.toLowerCase().includes("correct")?"text-green-600":"text-red-600",children:eN})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>eg(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:t2,disabled:ej,className:`px-4 py-2 rounded-lg text-white ${ej?"bg-primary-400":"bg-primary-500 hover:bg-primary-600"}`,children:ej?"Guardando…":"Guardar"})]})]})}),et&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Subir adjuntos"}),a.jsx("button",{onClick:tX,className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar",children:a.jsx(y.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("input",{type:"file",multiple:!0,onChange:e=>er(Array.from(e.target.files||[])),className:"block w-full text-sm text-gray-700"}),ea.length>0&&a.jsx("div",{className:"grid grid-cols-3 gap-2",children:ea.slice(0,9).map((e,t)=>{let s=e.type?.startsWith("image/");return a.jsx("div",{className:"border rounded p-1 h-20 flex items-center justify-center overflow-hidden",title:e.name,children:s?a.jsx("img",{src:URL.createObjectURL(e),alt:e.name,className:"object-cover w-full h-full"}):a.jsx("span",{className:"text-xs text-gray-600 text-center px-1",children:e.name})},t)})}),en&&a.jsx("div",{className:`text-sm ${en.includes("correct")?"text-green-600":"text-red-600"}`,children:en})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:tX,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:tK,disabled:ei,className:`px-4 py-2 rounded-lg text-white ${ei?"bg-primary-400":"bg-primary-600 hover:bg-primary-700"}`,children:ei?"Subiendo…":"Guardar"})]})]})}),eE&&eS&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[70]",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Editar movimiento"}),a.jsx("button",{onClick:tB,className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar",children:a.jsx(y.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Fecha"}),a.jsx("input",{type:"date",value:ek.fecha,onChange:e=>eI(t=>({...t,fecha:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Tipo"}),(0,a.jsxs)("select",{value:ek.tipo,onChange:e=>eI(t=>({...t,tipo:e.target.value})),className:"w-full px-3 py-2 border rounded",children:[a.jsx("option",{value:"DEBIT",children:"Debe"}),a.jsx("option",{value:"CREDIT",children:"Haber"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm mb-1",children:"Concepto"}),a.jsx("input",{type:"text",value:ek.concepto,onChange:e=>eI(t=>({...t,concepto:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),"DEBIT"===ek.tipo&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm mb-1",children:"Fecha de vencimiento"}),a.jsx("input",{type:"date",value:ek.vencimiento,onChange:e=>eI(t=>({...t,vencimiento:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm mb-1",children:"Monto"}),a.jsx("input",{type:"text",value:ek.monto,onChange:e=>eI(t=>({...t,monto:(0,o.m9)(e.target.value)})),className:"w-full px-3 py-2 border rounded"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm mb-1",children:"Observaciones"}),a.jsx("input",{type:"text",value:ek.observaciones,onChange:e=>eI(t=>({...t,observaciones:e.target.value})),className:"w-full px-3 py-2 border rounded",placeholder:"Texto libre"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:tB,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:tH,disabled:eT,className:`px-4 py-2 rounded-lg text-white ${eT?"bg-primary-400":"bg-primary-600 hover:bg-primary-700"}`,children:eT?"Guardando…":"Guardar"})]})]})}),e$&&eM&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[70]",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Editar pago"}),a.jsx("button",{onClick:tz,className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar",children:a.jsx(y.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Fecha"}),a.jsx("input",{type:"date",value:eG.fecha,onChange:e=>eR(t=>({...t,fecha:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Monto"}),a.jsx("input",{type:"text",inputMode:"numeric",value:(0,o.m9)(eG.monto?.toString()||""),onChange:e=>{let t=(0,o.m9)(e.target.value);eR(e=>({...e,monto:(0,o.sU)(t).toString()}))},className:"w-full px-3 py-2 border rounded"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm mb-1",children:"Concepto"}),a.jsx("input",{type:"text",value:eG.concepto,onChange:e=>eR(t=>({...t,concepto:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Forma de pago"}),a.jsx("input",{type:"text",value:eG.formaPago,onChange:e=>eR(t=>({...t,formaPago:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"N\xb0 Recibo"}),a.jsx("input",{type:"text",value:eG.numeroRecibo,onChange:e=>eR(t=>({...t,numeroRecibo:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Cobrador"}),(0,a.jsxs)("select",{value:eG.cobradorId,onChange:e=>eR(t=>({...t,cobradorId:e.target.value})),className:"w-full px-3 py-2 border rounded",children:[a.jsx("option",{value:"",children:"Seleccionar"}),C.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.nombres," ",e.apellidos,e.codigo?` • ${e.codigo}`:""]},e.id))]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm mb-1",children:"Observaciones"}),a.jsx("input",{type:"text",value:eG.observaciones,onChange:e=>eR(t=>({...t,observaciones:e.target.value})),className:"w-full px-3 py-2 border rounded"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:tz,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:tU,disabled:eO,className:`px-4 py-2 rounded-lg text-white ${eO?"bg-primary-400":"bg-primary-600 hover:bg-primary-700"}`,children:eO?"Guardando…":"Guardar"})]})]})}),e4&&a.jsx(k,{open:e4,onClose:()=>e6(!1),type:"DEBIT",memberId:t.id,allMovements:eB,onChanged:async()=>{await tf(t.id)},onEditMovement:tZ,onDeleteMovement:tY,onEditPaymentById:t_,onDeletePaymentById:tq}),e7&&a.jsx(k,{open:e7,onClose:()=>e8(!1),type:"CREDIT",memberId:t.id,allMovements:eB,onChanged:async()=>{await tf(t.id)},onEditMovement:tZ,onDeleteMovement:tY,onEditPaymentById:t_,onDeletePaymentById:tq}),tn&&td&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[65]",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Editar Suscripci\xf3n"}),a.jsx("button",{onClick:tJ,className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar",children:a.jsx(y.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[a.jsx("div",{className:"font-medium",children:h.find(e=>e.id===td.serviceId)?.nombre||"Servicio desconocido"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Estado: ","ACTIVE"===td.status?"Activa":"Pausada"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm mb-1 font-medium",children:["Servicio ",a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:tx.serviceId,onChange:e=>tm(t=>({...t,serviceId:e.target.value})),className:"w-full px-3 py-2 border rounded",children:[a.jsx("option",{value:"",children:"Seleccionar servicio"}),h.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.nombre," - ",(0,o.xG)(e.precio)]},e.id))]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm mb-1 font-medium",children:["Precio ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:tx.price?(0,o.m9)(tx.price):"",onChange:e=>{let t=(0,o.sU)(e.target.value);tm(e=>({...e,price:String(t)}))},placeholder:"0",className:"w-full px-3 py-2 border rounded"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1 font-medium",children:"Periodicidad"}),(0,a.jsxs)("select",{value:tx.periodicity,onChange:e=>tm(t=>({...t,periodicity:e.target.value})),className:"w-full px-3 py-2 border rounded",children:[a.jsx("option",{value:"MONTHLY",children:"Mensual"}),a.jsx("option",{value:"ANNUAL",children:"Anual"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm mb-1 font-medium",children:["Pr\xf3ximo cobro ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:tx.nextChargeDate,onChange:e=>tm(t=>({...t,nextChargeDate:e.target.value})),className:"w-full px-3 py-2 border rounded"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Notas"}),a.jsx("textarea",{value:tx.notes,onChange:e=>tm(t=>({...t,notes:e.target.value})),placeholder:"Notas adicionales...",rows:3,className:"w-full px-3 py-2 border rounded"})]}),tp&&a.jsx("div",{className:`text-sm ${tp.includes("correctamente")?"text-green-600":"text-red-600"}`,children:tp})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:tJ,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",disabled:th,children:"Cancelar"}),a.jsx("button",{onClick:tV,disabled:th||!tx.serviceId||!tx.price||!tx.nextChargeDate,className:`px-4 py-2 rounded-lg text-white ${!th&&tx.serviceId&&tx.price&&tx.nextChargeDate?"bg-blue-600 hover:bg-blue-700":"bg-gray-400"}`,children:th?"Guardando…":"Guardar cambios"})]})]})}),eb&&a.jsx("div",{id:"family-modal-overlay",className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[65]",children:(0,a.jsxs)("div",{id:"family-modal-content",className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Agregar Familiar"}),a.jsx("button",{onClick:t0,className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar",children:a.jsx(y.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm mb-1 font-medium",children:["Nombres ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:ew.nombres,onChange:e=>eC(t=>({...t,nombres:e.target.value})),className:"w-full px-3 py-2 border rounded",placeholder:"Nombres del familiar"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm mb-1 font-medium",children:["Apellidos ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:ew.apellidos,onChange:e=>eC(t=>({...t,apellidos:e.target.value})),className:"w-full px-3 py-2 border rounded",placeholder:"Apellidos del familiar"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm mb-1 font-medium",children:["CI ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:ew.ci,onChange:e=>eC(t=>({...t,ci:e.target.value})),className:"w-full px-3 py-2 border rounded",placeholder:"C\xe9dula de identidad"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1 font-medium",children:"Parentesco"}),(0,a.jsxs)("select",{value:ew.parentesco,onChange:e=>eC(t=>({...t,parentesco:e.target.value})),className:"w-full px-3 py-2 border rounded",children:[a.jsx("option",{value:"",children:"Seleccionar parentesco"}),a.jsx("option",{value:"C\xf3nyuge",children:"C\xf3nyuge"}),a.jsx("option",{value:"Hijo/a",children:"Hijo/a"}),a.jsx("option",{value:"Padre",children:"Padre"}),a.jsx("option",{value:"Madre",children:"Madre"}),a.jsx("option",{value:"Hermano/a",children:"Hermano/a"}),a.jsx("option",{value:"Otro",children:"Otro"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1 font-medium",children:"Fecha de nacimiento"}),a.jsx("input",{type:"date",value:ew.nacimiento||"",onChange:e=>eC(t=>({...t,nacimiento:e.target.value})),className:"w-full px-3 py-2 border rounded",placeholder:"Fecha de nacimiento"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1 font-medium",children:"Email"}),a.jsx("input",{type:"email",value:ew.email||"",onChange:e=>eC(t=>({...t,email:e.target.value})),className:"w-full px-3 py-2 border rounded",placeholder:"Email del familiar"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm mb-1 font-medium",children:"Tel\xe9fono"}),a.jsx("input",{type:"text",value:ew.telefono||"",onChange:e=>eC(t=>({...t,telefono:e.target.value})),className:"w-full px-3 py-2 border rounded",placeholder:"Tel\xe9fono del familiar"})]}),eN&&a.jsx("div",{className:`text-sm ${eN.includes("correctamente")?"text-green-600":"text-red-600"}`,children:eN})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:t0,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",disabled:ej,children:"Cancelar"}),a.jsx("button",{onClick:t2,disabled:ej||!ew.nombres.trim()||!ew.apellidos.trim()||!ew.ci.trim(),className:`px-4 py-2 rounded-lg text-white ${!ej&&ew.nombres.trim()&&ew.apellidos.trim()&&ew.ci.trim()?"bg-blue-600 hover:bg-blue-700":"bg-gray-400"}`,children:ej?"Guardando…":"Agregar Familiar"})]})]})}),e9&&tt&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[65]",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Pagos Relacionados al D\xe9bito"}),a.jsx("button",{onClick:()=>te(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar",children:a.jsx(y.Z,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Fecha del D\xe9bito"}),a.jsx("div",{className:"text-sm font-medium",children:(0,o.p6)(tt.fecha)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Estado"}),a.jsx("div",{className:"text-sm font-medium",children:sa(tt)})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Concepto"}),a.jsx("div",{className:"text-sm font-medium",children:tt.concepto})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Monto Total"}),a.jsx("div",{className:"text-sm font-medium",children:(0,o.xG)(tt.monto)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Monto Pagado"}),a.jsx("div",{className:"text-sm font-medium text-green-600",children:(0,o.xG)(tt.paidAmount||0)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Saldo Pendiente"}),a.jsx("div",{className:"text-sm font-medium text-red-600",children:(0,o.xG)(Math.max(0,tt.monto-(tt.paidAmount||0)))})]}),tt.vencimiento&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Vencimiento"}),a.jsx("div",{className:"text-sm font-medium",children:(0,o.p6)(tt.vencimiento)})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold mb-3 flex items-center",children:[a.jsx(m.Z,{className:"w-4 h-4 mr-2"}),"Cr\xe9ditos y Pagos Asignados (",ta.length,")"]}),ti?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-2"}),"Cargando pagos relacionados..."]}):0===ta.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No se encontraron pagos relacionados a este d\xe9bito."}):a.jsx("div",{className:"space-y-2",children:ta.map((e,t)=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-500",children:["#",t+1]}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${"PAYMENT"===e.tipo?"bg-green-100 text-green-700 border border-green-200":"bg-blue-100 text-blue-700 border border-blue-200"}`,children:"PAYMENT"===e.tipo?"Pago":"Cr\xe9dito"})]}),a.jsx("div",{className:"text-sm font-medium mb-1",children:e.concepto}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsxs)("div",{children:["Fecha: ",(0,o.p6)(e.fecha)]}),e.formaPago&&(0,a.jsxs)("div",{children:["Forma de pago: ",e.formaPago]}),e.numeroRecibo&&(0,a.jsxs)("div",{children:["Recibo: ",e.numeroRecibo]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto Total"}),a.jsx("div",{className:"text-sm font-medium",children:(0,o.xG)(e.monto)}),(0,a.jsxs)("div",{className:"text-xs text-green-600 font-medium mt-1",children:["Asignado: ",(0,o.xG)(e.allocatedAmount)]})]})]})},e.id))}),!ti&&ta.length>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-semibold",children:"Total Asignado"}),a.jsx("span",{className:"text-lg font-bold text-green-600",children:(0,o.xG)(ta.reduce((e,t)=>e+t.allocatedAmount,0))})]})})]}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:()=>te(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Cerrar"})})]})}),t&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(w,{open:G,onClose:()=>R(!1),memberId:t.id,memberName:`${t.nombres} ${t.apellidos}`,memberCode:t.codigo,onSuccess:()=>{tb(),tf(t.id)}}),a.jsx(D,{open:O,onClose:()=>Z(!1),memberId:t.id,memberName:`${t.nombres} ${t.apellidos}`,memberCode:t.codigo,onSuccess:()=>{tb(),tf(t.id)}})]})]})}function k({open:e,onClose:t,type:s,memberId:r,allMovements:i,onChanged:n,onEditMovement:d,onDeleteMovement:c,onEditPaymentById:x,onDeletePaymentById:m}){let[h,u]=(0,l.useState)(""),[p,g]=(0,l.useState)(1),[b,y]=(0,l.useState)(10),j=(0,l.useMemo)(()=>i.filter(e=>e.tipo===s).filter(e=>!h||(e.concepto||"").toLowerCase().includes(h.toLowerCase())||(e.observaciones||"").toLowerCase().includes(h.toLowerCase())).sort((e,t)=>new Date(t.fecha).getTime()-new Date(e.fecha).getTime()),[i,s,h]),f=Math.max(1,Math.ceil(j.length/b)),N=Math.min(p,f),v=j.slice((N-1)*b,(N-1)*b+b);return e?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:["Gestionar ","DEBIT"===s?"D\xe9bitos":"Cr\xe9ditos"]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar",children:"✕"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3 gap-2",children:[a.jsx("input",{value:h,onChange:e=>{u(e.target.value),g(1)},placeholder:"Buscar concepto u observaci\xf3n…",className:"px-3 py-2 border rounded w-full"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm",children:"Filas:"}),(0,a.jsxs)("select",{value:b,onChange:e=>{y(Number(e.target.value)),g(1)},className:"px-2 py-1 border rounded",children:[a.jsx("option",{value:5,children:"5"}),a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:20,children:"20"})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full table-auto",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-2 px-2",children:"Fecha"}),a.jsx("th",{className:"text-left py-2 px-2",children:"Concepto"}),a.jsx("th",{className:"text-right py-2 px-2",children:"Monto"}),a.jsx("th",{className:"text-left py-2 px-2",children:"Observaciones"}),a.jsx("th",{className:"text-right py-2 px-2",children:"Acciones"})]})}),(0,a.jsxs)("tbody",{children:[v.map(e=>(0,a.jsxs)("tr",{className:"border-b",children:[a.jsx("td",{className:"py-2 px-2",children:(0,o.p6)(e.fecha)}),a.jsx("td",{className:"py-2 px-2",children:e.concepto}),a.jsx("td",{className:"py-2 px-2 text-right",children:(0,o.xG)(e.monto)}),a.jsx("td",{className:"py-2 px-2",children:e.observaciones||"—"}),a.jsx("td",{className:"py-2 px-2",children:"PAGO"===e.origen&&e.refId?(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{onClick:()=>x(e.refId),className:"px-2 py-1 border rounded hover:bg-gray-50",title:"Editar",children:"Editar"}),a.jsx("button",{onClick:()=>m(e.refId),className:"px-2 py-1 border border-red-300 text-red-600 rounded hover:bg-red-50",title:"Eliminar",children:"Eliminar"})]}):(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{onClick:()=>d(e),className:"px-2 py-1 border rounded hover:bg-gray-50",title:"Editar movimiento",children:"Editar"}),a.jsx("button",{onClick:()=>c(e.id),className:"px-2 py-1 border border-red-300 text-red-600 rounded hover:bg-red-50",title:"Eliminar movimiento",children:"Eliminar"})]})})]},e.id)),0===v.length&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"py-6 text-center text-gray-500",children:"Sin movimientos"})})]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["P\xe1gina ",N," de ",f," • ",j.length," movs"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>g(e=>Math.max(1,e-1)),disabled:N<=1,className:"px-2 py-1 border rounded hover:bg-gray-50",children:"Anterior"}),a.jsx("button",{onClick:()=>g(e=>Math.min(f,e+1)),disabled:N>=f,className:"px-2 py-1 border rounded hover:bg-gray-50",children:"Siguiente"})]})]})]})}):null}async function I(){let e=window.__mv_ctx;if(!e||!e.withRunning){alert("No hay datos para exportar.");return}let{utils:t,writeFile:a}=await s.e(5603).then(s.bind(s,25603)),r=[["ESTADO DE CUENTA"],[],["Nombre y Apellido:",`${e.member?.nombres??""} ${e.member?.apellidos??""}`],["Nro de Socio:",e.member?.codigo??""],["C\xe9dula:",e.member?.ci??""],[]],i=e.withRunning.map(e=>({Fecha:(0,o.p6)(e.fecha),Concepto:e.concepto,Observaciones:e.observaciones||"",Estado:"DEBIT"===e.tipo?e.status||(0>=Number(e.paidAmount||0)?"PENDIENTE":Number(e.paidAmount||0)>=Number(e.monto||0)?"CANCELADO":"PARCIAL"):"—",Vence:"DEBIT"===e.tipo&&e.vencimiento?(0,o.p6)(e.vencimiento):"—",Debe:"DEBIT"===e.tipo?(e.monto||0).toLocaleString("es-PY",{minimumFractionDigits:0,maximumFractionDigits:0}):"",Haber:"CREDIT"===e.tipo?(e.monto||0).toLocaleString("es-PY",{minimumFractionDigits:0,maximumFractionDigits:0}):"",Saldo:(e.saldo??0).toLocaleString("es-PY",{minimumFractionDigits:0,maximumFractionDigits:0})}));i.push({},{Concepto:"Totales",Debe:e.totalDebe.toLocaleString("es-PY",{minimumFractionDigits:0,maximumFractionDigits:0}),Haber:e.totalHaber.toLocaleString("es-PY",{minimumFractionDigits:0,maximumFractionDigits:0}),Saldo:e.saldo.toLocaleString("es-PY",{minimumFractionDigits:0,maximumFractionDigits:0})});let l=t.aoa_to_sheet(r);t.sheet_add_json(l,i,{origin:-1,skipHeader:!1});let n=t.book_new();t.book_append_sheet(n,l,"EstadoCuenta"),a(n,`estado-cuenta-${e.member?.codigo??""}-${(0,o.Ji)()}.xlsx`)}async function T(){let e=window.__mv_ctx;if(!e||!e.withRunning){alert("No hay datos para exportar.");return}let t=await s.e(6180).then(s.t.bind(s,16180,23)),a=await s.e(3240).then(s.t.bind(s,53240,23)),r=t.default||t,i=a.default||a;r.vfs=i.vfs;let l=[[{text:"Fecha",bold:!0},{text:"Concepto",bold:!0},{text:"Observaciones",bold:!0},{text:"Estado",bold:!0},{text:"Vence",bold:!0},{text:"Debe",bold:!0,alignment:"right"},{text:"Haber",bold:!0,alignment:"right"},{text:"Saldo",bold:!0,alignment:"right"}]];e.withRunning.forEach(e=>{let t="DEBIT"===e.tipo?e.status||(0>=Number(e.paidAmount||0)?"PENDIENTE":Number(e.paidAmount||0)>=Number(e.monto||0)?"CANCELADO":"PARCIAL"):"—";l.push([{text:(0,o.p6)(e.fecha)},{text:e.concepto},{text:e.observaciones||""},{text:t},{text:"DEBIT"===e.tipo&&e.vencimiento?(0,o.p6)(e.vencimiento):"—"},{text:"DEBIT"===e.tipo?(0,o.xG)(e.monto):"-",alignment:"right"},{text:"CREDIT"===e.tipo?(0,o.xG)(e.monto):"-",alignment:"right"},{text:(0,o.xG)(e.saldo??0),alignment:"right"}])}),l.push([{text:"Totales",colSpan:5,alignment:"right",bold:!0},{},{},{},{},{text:(0,o.xG)(e.totalDebe),alignment:"right",bold:!0},{text:(0,o.xG)(e.totalHaber),alignment:"right",bold:!0},{text:(0,o.xG)(e.saldo),alignment:"right",bold:!0}]);let n={pageSize:"A4",pageOrientation:"landscape",pageMargins:[30,30,30,40],defaultStyle:{fontSize:8},content:[{text:"Estado de Cuenta",style:"header"},{text:`${e.member?.nombres??""} ${e.member?.apellidos??""} • ${e.member?.codigo??""}`,margin:[0,0,0,10]},{table:{headerRows:1,widths:["auto","*","*","auto","auto","auto","auto","auto"],body:l},layout:"lightHorizontalLines"}],styles:{header:{fontSize:12,bold:!0,margin:[0,0,0,8]}}};r.createPdf(n).download(`estado-cuenta-${e.member?.codigo??""}-${new Date().toISOString().slice(0,10)}.pdf`)}},60068:(e,t,s)=>{"use strict";s.d(t,{D2:()=>a,LJ:()=>i,_4:()=>l,tF:()=>r});let a={name:"America/Asuncion",offsetHours:-3,description:"Paraguay (UTC-3)"};function r(){let e=new Date,t=Object.fromEntries(new Intl.DateTimeFormat("en-CA",{timeZone:a.name,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(e).map(e=>[e.type,e.value]));return new Date(parseInt(t.year),parseInt(t.month)-1,parseInt(t.day),parseInt(t.hour),parseInt(t.minute),parseInt(t.second))}function i(e){if(e){let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${a}`}{let e=new Date;return new Intl.DateTimeFormat("en-CA",{timeZone:a.name,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}}function l(e,t=!1){let s;if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){let[t,a,r]=e.split("-").map(Number);s=new Date(t,a-1,r)}else s=new Date(e)}else s=e;if(t)return s.toLocaleString("es-PY",{timeZone:a.name,day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});if(!("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)))return s.toLocaleDateString("es-PY",{timeZone:a.name,day:"2-digit",month:"2-digit",year:"numeric"});{let[t,s,a]=e.split("-");return`${a.padStart(2,"0")}/${s.padStart(2,"0")}/${t}`}}},77863:(e,t,s)=>{"use strict";s.d(t,{Fw:()=>l,Ji:()=>n,m9:()=>o,p6:()=>i,sQ:()=>c,sU:()=>d,xG:()=>r});var a=s(60068);function r(e){return new Intl.NumberFormat("es-PY",{style:"currency",currency:"PYG",minimumFractionDigits:0}).format(e)}function i(e){return(0,a._4)(e,!1)}function l(e){let t=(0,a.tF)(),s=new Date(new Date(e).getTime()+108e5),r=t.getUTCFullYear()-s.getUTCFullYear(),i=t.getUTCMonth()-s.getUTCMonth();return(i<0||0===i&&t.getUTCDate()<s.getUTCDate())&&r--,r}function n(){return(0,a.LJ)()}function o(e){let t=e.replace(/\D/g,"");return t?t.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function d(e){return parseInt(e.replace(/\./g,""))||0}function c(e){return Math.round(e)}},86333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},37358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},28916:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},36283:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},70003:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},98091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},79635:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},24061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},94019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},10343:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`C:\Garden\app\admin\socios\[id]\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,4471,6837,8750],()=>s(57298));module.exports=a})();