(()=>{var e={};e.id=6928,e.ids=[6928],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},86880:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(67828),r(11506),r(35866);var s=r(23191),t=r(88716),i=r(37922),o=r.n(i),l=r(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(a,n);let d=["",{children:["admin",{children:["socios",{children:["[id]",{children:["editar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,67828)),"C:\\Garden\\app\\admin\\socios\\[id]\\editar\\page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Garden\\app\\admin\\socios\\[id]\\editar\\page.tsx"],u="/admin/socios/[id]/editar/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/admin/socios/[id]/editar/page",pathname:"/admin/socios/[id]/editar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},97416:(e,a,r)=>{Promise.resolve().then(r.bind(r,89065))},89065:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>u});var s=r(10326),t=r(64447),i=r(67269),o=r(17577),l=r(35047),n=r(86333),d=r(63685),c=r(90434);function u(){let e=(0,l.useParams)(),a=(0,l.useRouter)(),[r,u]=(0,o.useState)(!1),[m,x]=(0,o.useState)(!0),[g,p]=(0,o.useState)(""),[h,b]=(0,o.useState)(!1),[f,y]=(0,o.useState)(null),[j,v]=(0,o.useState)(""),[N,w]=(0,o.useState)({nombres:"",apellidos:"",ci:"",ruc:"",categoria:"Individual",subcategoria:"Socio",direccion:"",telefono:"",celular:"",email:"",nacimiento:"",nacionalidad:"Paraguaya",datosLaborales:"",alta:"",estado:"AL_DIA",foto:"",observaciones:"",aplicarCuotaIngreso:!1}),C=async e=>{if(!e||0===e.trim().length||!f||e.trim()===f.ci){v("");return}try{let a=await i.L.authenticatedFetch(`/api/members?ci=${encodeURIComponent(e.trim())}`),r=await a.json();if(a.ok&&Array.isArray(r)&&r.length>0){let a=r.filter(e=>e.id!==f.id);if(a.length>0){let r=a[0];v(`Ya existe un ${"NO SOCIO"===r.subcategoria?"no-socio":"socio"} registrado con la CI ${e}: ${r.nombres} ${r.apellidos} (${r.codigo})`)}else v("")}else v("")}catch(e){console.error("Error validating CI:",e),v("")}},k=async r=>{if(r.preventDefault(),p(""),j){p("Por favor, corrija los errores antes de continuar.");return}u(!0);try{let r=await i.L.authenticatedFetch(`/api/members/${e.id}`,{method:"PATCH",body:JSON.stringify(N)}),s=await r.json();r.ok?a.push(`/admin/socios/${e.id}`):p(s.msg||"Error al actualizar socio")}catch(e){p("Error de conexi\xf3n")}finally{u(!1)}},S=async e=>{let a=e.target.files?.[0];if(a){if(!["image/jpeg","image/png","image/webp","image/gif"].includes(a.type)){p("El archivo debe ser una imagen (jpg, png, webp, gif).");return}if(a.size>8388608){p("La imagen no puede superar 8MB.");return}b(!0),p("");try{let e=URL.createObjectURL(a);w(a=>({...a,foto:e}))}catch{}try{let e=new FormData;e.append("file",a);let r=new AbortController,s=setTimeout(()=>r.abort(),3e4),t=await i.L.authenticatedFetch("/api/uploads",{method:"POST",body:e,signal:r.signal});clearTimeout(s);let o={};try{o=await t.json()}catch{throw Error("Respuesta inv\xe1lida del servidor")}if(!t.ok||!o?.ok||!o?.path)throw Error(o?.msg||"No se pudo subir la foto");w(e=>({...e,foto:o.path}))}catch(e){e?.name==="AbortError"?p("La subida tard\xf3 demasiado. Intentalo de nuevo."):p(e?.message||"Error al subir la foto")}finally{b(!1)}}};return m?s.jsx(t.Z,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):f?s.jsx(t.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx(c.default,{href:`/admin/socios/${e.id}`,className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(n.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Editar Socio"}),s.jsx("p",{className:"text-gray-600",children:"Modifica la informaci\xf3n del socio"})]})]}),g&&s.jsx("div",{className:`p-4 rounded-lg ${g.includes("Error")?"bg-red-50 text-red-800 border border-red-200":"bg-green-50 text-green-800 border border-green-200"}`,children:g}),s.jsx("div",{className:"bg-white rounded-lg shadow",children:(0,s.jsxs)("form",{onSubmit:k,className:"p-6 space-y-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n Personal"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombres *"}),s.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.nombres,onChange:e=>w(a=>({...a,nombres:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellidos *"}),s.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.apellidos,onChange:e=>w(a=>({...a,apellidos:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C\xe9dula de Identidad *"}),s.jsx("input",{type:"text",required:!0,className:`w-full px-3 py-1.5 border rounded-md focus:outline-none focus:ring-2 ${j?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500"}`,value:N.ci,onChange:e=>{let a=e.target.value;w(e=>({...e,ci:a})),setTimeout(()=>C(a),500)},onBlur:e=>C(e.target.value)}),j&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:j})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RUC"}),s.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.ruc,onChange:e=>w(a=>({...a,ruc:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Nacimiento"}),s.jsx("input",{type:"date",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.nacimiento,onChange:e=>w(a=>({...a,nacimiento:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nacionalidad"}),s.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.nacionalidad,onChange:e=>w(a=>({...a,nacionalidad:e.target.value}))})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Categorizaci\xf3n"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categor\xeda *"}),(0,s.jsxs)("select",{required:!0,className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.categoria,onChange:e=>w(a=>({...a,categoria:e.target.value})),children:[s.jsx("option",{value:"Individual",children:"Individual"}),s.jsx("option",{value:"Familiar",children:"Familiar"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategor\xeda *"}),(0,s.jsxs)("select",{required:!0,className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.subcategoria,onChange:e=>w(a=>({...a,subcategoria:e.target.value})),children:[s.jsx("option",{value:"Socio",children:"Socio"}),s.jsx("option",{value:"Socio Patrimonial",children:"Socio Patrimonial"}),s.jsx("option",{value:"Socio Vitalicio",children:"Socio Vitalicio"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado *"}),(0,s.jsxs)("select",{required:!0,className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.estado,onChange:e=>w(a=>({...a,estado:e.target.value})),children:[s.jsx("option",{value:"AL_DIA",children:"Al D\xeda"}),s.jsx("option",{value:"ATRASADO",children:"Atrasado"}),s.jsx("option",{value:"SUSPENDIDO",children:"Suspendido"})]})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n de Contacto"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direcci\xf3n"}),s.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.direccion,onChange:e=>w(a=>({...a,direccion:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono"}),s.jsx("input",{type:"tel",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.telefono,onChange:e=>w(a=>({...a,telefono:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Celular"}),s.jsx("input",{type:"tel",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.celular,onChange:e=>w(a=>({...a,celular:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.email,onChange:e=>w(a=>({...a,email:e.target.value}))})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n Adicional"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-start",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Alta *"}),s.jsx("input",{type:"date",required:!0,className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.alta,onChange:e=>w(a=>({...a,alta:e.target.value}))})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Datos Laborales"}),s.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.datosLaborales,onChange:e=>w(a=>({...a,datosLaborales:e.target.value}))})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),s.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:N.observaciones,onChange:e=>w(a=>({...a,observaciones:e.target.value}))})]}),(0,s.jsxs)("div",{className:"md:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Foto"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"hidden",id:"photo-upload",disabled:h}),(0,s.jsxs)("label",{htmlFor:"photo-upload",className:"flex items-center gap-2 px-3 py-1.5 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50 disabled:opacity-50 text-sm",children:[s.jsx(d.Z,{className:"w-4 h-4"}),h?"Subiendo...":"Cambiar Foto"]})]}),N.foto&&s.jsx("img",{src:N.foto,alt:"Preview",className:"w-10 h-10 rounded-full object-cover mt-2"})]}),(0,s.jsxs)("div",{className:"md:col-span-6",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[s.jsx("input",{type:"checkbox",checked:N.aplicarCuotaIngreso,onChange:e=>w(a=>({...a,aplicarCuotaIngreso:e.target.checked})),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Aplicar Cuota de Ingreso (Gs. 15.000.000)"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Se crear\xe1 autom\xe1ticamente un d\xe9bito por la cuota de ingreso al guardar los cambios"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[s.jsx(c.default,{href:`/admin/socios/${e.id}`,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:r||!!j,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Guardando...":"Guardar Cambios"})]})]})})]})}):s.jsx(t.Z,{children:(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-500",children:"Socio no encontrado"}),s.jsx(c.default,{href:"/admin/socios",className:"text-primary-600 hover:text-primary-800 mt-4 inline-block",children:"â† Volver a Socios"})]})})}},86333:(e,a,r)=>{"use strict";r.d(a,{Z:()=>s});let s=(0,r(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},63685:(e,a,r)=>{"use strict";r.d(a,{Z:()=>s});let s=(0,r(76557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},67828:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Garden\app\admin\socios\[id]\editar\page.tsx#default`)}};var a=require("../../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),s=a.X(0,[8948,4471,6837,8750],()=>r(86880));module.exports=s})();