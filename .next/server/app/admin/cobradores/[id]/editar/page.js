(()=>{var e={};e.id=2443,e.ids=[2443],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7649:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>l}),a(31899),a(11506),a(35866);var s=a(23191),o=a(88716),t=a(37922),i=a.n(t),n=a(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(r,d);let l=["",{children:["admin",{children:["cobradores",{children:["[id]",{children:["editar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,31899)),"C:\\Garden\\app\\admin\\cobradores\\[id]\\editar\\page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Garden\\app\\admin\\cobradores\\[id]\\editar\\page.tsx"],m="/admin/cobradores/[id]/editar/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/admin/cobradores/[id]/editar/page",pathname:"/admin/cobradores/[id]/editar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},53002:(e,r,a)=>{Promise.resolve().then(a.bind(a,73062))},73062:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>c});var s=a(10326),o=a(64447),t=a(67269),i=a(17577),n=a(35047),d=a(86333),l=a(90434);function c(){let e=(0,n.useParams)(),r=(0,n.useRouter)(),[a,c]=(0,i.useState)(!1),[m,u]=(0,i.useState)(!0),[x,p]=(0,i.useState)(""),[g,b]=(0,i.useState)(null),[h,f]=(0,i.useState)([]),[y,j]=(0,i.useState)({nombres:"",apellidos:"",ci:"",telefono:"",celular:"",direccion:"",email:"",tipoCobrador:"EXTERNO",comisionPorDefecto:"12.5",formasPago:["efectivo"],cuentaBanco:"",activo:!0}),v=h.some(r=>"CLUB"===r.tipoCobrador&&r.id!==e.id),N=e=>{j(r=>{let a=r.formasPago;return a.includes(e)?{...r,formasPago:a.length>1?a.filter(r=>r!==e):a}:{...r,formasPago:[...a,e]}})},C=async a=>{a.preventDefault(),p(""),c(!0);try{let a={...y,comisionPorDefecto:"EXTERNO"===y.tipoCobrador||"PROFESOR"===y.tipoCobrador?parseFloat(y.comisionPorDefecto):void 0},s=await t.L.authenticatedFetch(`/api/collectors/${e.id}`,{method:"PATCH",body:JSON.stringify(a)}),o=await s.json();s.ok?r.push(`/admin/cobradores/${e.id}`):p(o.msg||"Error al actualizar cobrador")}catch(e){p("Error de conexi\xf3n")}finally{c(!1)}};return m?s.jsx(o.Z,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):g?s.jsx(o.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx(l.default,{href:`/admin/cobradores/${e.id}`,className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(d.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Editar Cobrador"}),s.jsx("p",{className:"text-gray-600",children:"Modifica la informaci\xf3n del cobrador"})]})]}),x&&s.jsx("div",{className:`p-4 rounded-lg ${x.includes("Error")?"bg-red-50 text-red-800 border border-red-200":"bg-green-50 text-green-800 border border-green-200"}`,children:x}),s.jsx("div",{className:"bg-white rounded-lg shadow",children:(0,s.jsxs)("form",{onSubmit:C,className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n Personal"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombres *"}),s.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y.nombres,onChange:e=>j(r=>({...r,nombres:e.target.value})),disabled:"CLUB"===y.tipoCobrador}),"CLUB"===y.tipoCobrador&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"\uD83D\uDCCC Nombre predeterminado para cobrador institucional"})]}),"CLUB"!==y.tipoCobrador&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellidos *"}),s.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y.apellidos,onChange:e=>j(r=>({...r,apellidos:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C\xe9dula de Identidad *"}),s.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y.ci,onChange:e=>j(r=>({...r,ci:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y.email,onChange:e=>j(r=>({...r,email:e.target.value}))})]})]})]})]}),"CLUB"!==y.tipoCobrador&&(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n de Contacto"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono"}),s.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y.telefono,onChange:e=>j(r=>({...r,telefono:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Celular"}),s.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y.celular,onChange:e=>j(r=>({...r,celular:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direcci\xf3n"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y.direccion,onChange:e=>j(r=>({...r,direccion:e.target.value}))})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tipo de Cobrador y Comisiones"}),s.jsx("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Cobrador *"}),(0,s.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y.tipoCobrador,onChange:e=>j(r=>({...r,tipoCobrador:e.target.value})),children:[s.jsx("option",{value:"EXTERNO",children:"Externo"}),s.jsx("option",{value:"PROFESOR",children:"Profesor"}),(!v||"CLUB"===y.tipoCobrador)&&s.jsx("option",{value:"CLUB",children:"Garden Club"})]})]}),("EXTERNO"===y.tipoCobrador||"PROFESOR"===y.tipoCobrador)&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comisi\xf3n % *"}),s.jsx("input",{type:"number",required:"EXTERNO"===y.tipoCobrador||"PROFESOR"===y.tipoCobrador,min:"0",max:"100",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y.comisionPorDefecto,onChange:e=>j(r=>({...r,comisionPorDefecto:e.target.value})),placeholder:"12.5"})]})]})})]}),"CLUB"!==y.tipoCobrador&&(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n de Pago"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Formas de Pago Aceptadas * ",s.jsx("span",{className:"text-xs text-gray-500",children:"(Seleccione al menos una)"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:y.formasPago.includes("efectivo"),onChange:()=>N("efectivo"),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Efectivo"})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:y.formasPago.includes("transferencia"),onChange:()=>N("transferencia"),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Transferencia"})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:y.formasPago.includes("cheque"),onChange:()=>N("cheque"),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Cheque"})]})]}),0===y.formasPago.length&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Debe seleccionar al menos una forma de pago"})]}),y.formasPago.includes("transferencia")&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cuenta Bancaria"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y.cuentaBanco,onChange:e=>j(r=>({...r,cuentaBanco:e.target.value}))})]})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado"}),s.jsx("div",{children:(0,s.jsxs)("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:y.activo,onChange:e=>j(r=>({...r,activo:e.target.checked}))}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Cobrador Activo"})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[s.jsx(l.default,{href:`/admin/cobradores/${e.id}`,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50",children:a?"Guardando...":"Guardar Cambios"})]})]})})]})}):s.jsx(o.Z,{children:(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-500",children:"Cobrador no encontrado"}),s.jsx(l.default,{href:"/admin/cobradores",className:"text-primary-600 hover:text-primary-800 mt-4 inline-block",children:"← Volver a Cobradores"})]})})}},86333:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});let s=(0,a(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},31899:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`C:\Garden\app\admin\cobradores\[id]\editar\page.tsx#default`)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),s=r.X(0,[8948,4471,6837,8750],()=>a(7649));module.exports=s})();