(()=>{var e={};e.id=6488,e.ids=[6488],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},81249:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>l,routeModule:()=>x,tree:()=>d}),t(40363),t(11506),t(35866);var r=t(23191),s=t(88716),i=t(37922),n=t.n(i),c=t(95231),o={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>c[e]);t.d(a,o);let d=["",{children:["admin",{children:["servicios",{children:["[id]",{children:["espacios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,40363)),"C:\\Garden\\app\\admin\\servicios\\[id]\\espacios\\page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],l=["C:\\Garden\\app\\admin\\servicios\\[id]\\espacios\\page.tsx"],p="/admin/servicios/[id]/espacios/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/servicios/[id]/espacios/page",pathname:"/admin/servicios/[id]/espacios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},38506:(e,a,t)=>{Promise.resolve().then(t.bind(t,41157))},41157:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>g});var r=t(10326),s=t(64447),i=t(67269),n=t(17577),c=t(35047),o=t(77863),d=t(86333),l=t(83855),p=t(13027),m=t(85571),x=t(70003),u=t(98091),h=t(90434);function g(){let e=(0,c.useParams)(),a=(0,c.useRouter)(),t=e.id,[g,y]=(0,n.useState)(null),[v,f]=(0,n.useState)([]),[b,j]=(0,n.useState)(!0),[N,w]=(0,n.useState)(!1),[k,C]=(0,n.useState)(null),[E,P]=(0,n.useState)(!1),[Z,S]=(0,n.useState)({nombre:"",descripcion:"",precioBaseHora:"",garantia:"",capacidad:"",activo:!0});async function T(){try{let e=await i.L.authenticatedFetch(`/api/services/${t}`),r=await e.json();if(!e.ok||!r.permiteAgendamiento){a.push("/admin/servicios");return}y(r);let s=await i.L.authenticatedFetch("/api/venues"),n=await s.json();f(Array.isArray(n)?n:[])}catch(e){console.error("Error loading data:",e)}finally{j(!1)}}function D(e){e?(C(e),S({nombre:e.nombre,descripcion:e.descripcion||"",precioBaseHora:e.precioBaseHora.toString(),garantia:e.garantia.toString(),capacidad:e.capacidad.toString(),activo:e.activo})):(C(null),S({nombre:"",descripcion:"",precioBaseHora:"",garantia:"0",capacidad:"1",activo:!0})),w(!0)}function H(){w(!1),C(null),S({nombre:"",descripcion:"",precioBaseHora:"",garantia:"0",capacidad:"1",activo:!0})}async function A(){if(!Z.nombre||!Z.precioBaseHora){alert("Nombre y precio por hora son obligatorios");return}P(!0);try{let e={nombre:Z.nombre,descripcion:Z.descripcion,precioBaseHora:Number(Z.precioBaseHora),garantia:Number(Z.garantia)||0,capacidad:Number(Z.capacidad)||1,activo:Z.activo},a=k?`/api/venues/${k.id}`:"/api/venues",t=await i.L.authenticatedFetch(a,{method:k?"PATCH":"POST",body:JSON.stringify(e)}),r=await t.json();t.ok?(H(),await T()):alert(r.msg||"Error al guardar el espacio")}catch(e){console.error("Error saving venue:",e),alert("Error al guardar el espacio")}finally{P(!1)}}async function G(e,a){try{(await i.L.authenticatedFetch(`/api/venues/${e}`,{method:"PATCH",body:JSON.stringify({activo:!a})})).ok&&await T()}catch(e){console.error("Error toggling venue:",e)}}async function _(e,a){if(confirm(`\xbfEst\xe1s seguro de que quieres eliminar el espacio "${a}"?`))try{let a=await i.L.authenticatedFetch(`/api/venues/${e}`,{method:"DELETE"});if(a.ok)await T(),alert("Espacio eliminado correctamente");else{let e=await a.json();alert(e.msg||"Error al eliminar el espacio")}}catch(e){console.error("Error deleting venue:",e),alert("Error al eliminar el espacio")}}return b?r.jsx(s.Z,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):g?(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[r.jsx(h.default,{href:"/admin/servicios",className:"hover:text-primary-600",children:"Servicios"}),r.jsx("span",{children:"/"}),r.jsx("span",{className:"font-medium",children:g.nombre}),r.jsx("span",{children:"/"}),r.jsx("span",{children:"Espacios"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900",children:["Espacios para ",g.nombre]}),r.jsx("p",{className:"text-gray-600",children:"Administra los espacios f\xedsicos donde se puede reservar este servicio"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)(h.default,{href:"/admin/servicios",className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(d.Z,{className:"w-4 h-4"}),"Volver"]}),(0,r.jsxs)("button",{onClick:()=>D(),className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 flex items-center gap-2",children:[r.jsx(l.Z,{className:"w-4 h-4"}),"Nuevo Espacio"]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:v.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Espacios"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.filter(e=>e.activo).length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Espacios Activos"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:v.reduce((e,a)=>e+a.capacidad,0)}),r.jsx("div",{className:"text-sm text-gray-600",children:"Capacidad Total"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Espacio"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio/Hora"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Garant\xeda"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacidad"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.nombre}),e.descripcion&&r.jsx("div",{className:"text-sm text-gray-500",children:e.descripcion})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:(0,o.xG)(e.precioBaseHora)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:(0,o.xG)(e.garantia)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,r.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200",children:[e.capacidad," ",1===e.capacidad?"persona":"personas"]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsx("button",{onClick:()=>G(e.id,e.activo),className:`p-1 rounded transition-colors ${e.activo?"text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:e.activo?r.jsx(p.Z,{className:"w-6 h-6"}):r.jsx(m.Z,{className:"w-6 h-6"})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>D(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar espacio",children:r.jsx(x.Z,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>_(e.id,e.nombre),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar espacio",children:r.jsx(u.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})}),0===v.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-500 mb-4",children:"No hay espacios configurados para este servicio"}),(0,r.jsxs)("button",{onClick:()=>D(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-600 bg-primary-100 hover:bg-primary-200",children:[r.jsx(l.Z,{className:"w-4 h-4 mr-2"}),"Crear primer espacio"]})]})]})]}),N&&r.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-lg bg-white rounded-lg shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold",children:k?"Editar Espacio":"Nuevo Espacio"}),r.jsx("button",{onClick:H,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Espacio *"}),r.jsx("input",{type:"text",value:Z.nombre,onChange:e=>S(a=>({...a,nombre:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ej: Cancha de Tenis 1"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),r.jsx("textarea",{value:Z.descripcion,onChange:e=>S(a=>({...a,descripcion:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Descripci\xf3n opcional del espacio"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio por Hora (Gs.) *"}),r.jsx("input",{type:"number",value:Z.precioBaseHora,onChange:e=>S(a=>({...a,precioBaseHora:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"50000"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Garant\xeda (Gs.)"}),r.jsx("input",{type:"number",value:Z.garantia,onChange:e=>S(a=>({...a,garantia:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"100000"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacidad (personas)"}),r.jsx("input",{type:"number",min:"1",value:Z.capacidad,onChange:e=>S(a=>({...a,capacidad:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"4"})]}),r.jsx("div",{children:(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:Z.activo,onChange:e=>S(a=>({...a,activo:e.target.checked})),className:"w-4 h-4 text-primary-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Espacio activo"})]})})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 p-6 border-t",children:[r.jsx("button",{onClick:H,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),r.jsx("button",{onClick:A,disabled:E,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50",children:E?"Guardando...":k?"Actualizar":"Crear"})]})]})})]}):r.jsx(s.Z,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-500",children:"Servicio no encontrado o no permite agendamiento"}),r.jsx(h.default,{href:"/admin/servicios",className:"mt-4 text-primary-600 hover:underline",children:"Volver a Servicios"})]})})}},60068:(e,a,t)=>{"use strict";t.d(a,{D2:()=>r,LJ:()=>i,_4:()=>n,tF:()=>s});let r={name:"America/Asuncion",offsetHours:-3,description:"Paraguay (UTC-3)"};function s(){let e=new Date,a=Object.fromEntries(new Intl.DateTimeFormat("en-CA",{timeZone:r.name,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(e).map(e=>[e.type,e.value]));return new Date(parseInt(a.year),parseInt(a.month)-1,parseInt(a.day),parseInt(a.hour),parseInt(a.minute),parseInt(a.second))}function i(e){if(e){let a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${a}-${t}-${r}`}{let e=new Date;return new Intl.DateTimeFormat("en-CA",{timeZone:r.name,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}}function n(e,a=!1){let t;if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){let[a,r,s]=e.split("-").map(Number);t=new Date(a,r-1,s)}else t=new Date(e)}else t=e;if(a)return t.toLocaleString("es-PY",{timeZone:r.name,day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});if(!("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)))return t.toLocaleDateString("es-PY",{timeZone:r.name,day:"2-digit",month:"2-digit",year:"numeric"});{let[a,t,r]=e.split("-");return`${r.padStart(2,"0")}/${t.padStart(2,"0")}/${a}`}}},77863:(e,a,t)=>{"use strict";t.d(a,{Fw:()=>n,Ji:()=>c,m9:()=>o,p6:()=>i,sQ:()=>l,sU:()=>d,xG:()=>s});var r=t(60068);function s(e){return new Intl.NumberFormat("es-PY",{style:"currency",currency:"PYG",minimumFractionDigits:0}).format(e)}function i(e){return(0,r._4)(e,!1)}function n(e){let a=(0,r.tF)(),t=new Date(new Date(e).getTime()+108e5),s=a.getUTCFullYear()-t.getUTCFullYear(),i=a.getUTCMonth()-t.getUTCMonth();return(i<0||0===i&&a.getUTCDate()<t.getUTCDate())&&s--,s}function c(){return(0,r.LJ)()}function o(e){let a=e.replace(/\D/g,"");return a?a.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function d(e){return parseInt(e.replace(/\./g,""))||0}function l(e){return Math.round(e)}},86333:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},70003:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(76557).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},83855:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},85571:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(76557).Z)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]])},13027:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(76557).Z)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]])},98091:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(76557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},40363:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`C:\Garden\app\admin\servicios\[id]\espacios\page.tsx#default`)}};var a=require("../../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[8948,4471,6837,8750],()=>t(81249));module.exports=r})();