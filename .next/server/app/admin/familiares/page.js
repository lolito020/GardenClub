(()=>{var e={};e.id=6104,e.ids=[6104],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},65703:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),a(10787),a(11506),a(35866);var r=a(23191),s=a(88716),i=a(37922),n=a.n(i),l=a(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(t,c);let d=["",{children:["admin",{children:["familiares",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,10787)),"C:\\Garden\\app\\admin\\familiares\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Garden\\app\\admin\\familiares\\page.tsx"],m="/admin/familiares/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/familiares/page",pathname:"/admin/familiares",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},20911:(e,t,a)=>{Promise.resolve().then(a.bind(a,14136))},14136:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(10326),s=a(64447),i=a(67269),n=a(17577),l=a(77863),c=a(83855),d=a(88307),o=a(24061),m=a(67187),x=a(12714),u=a(70003),p=a(90434);function h(){async function e(e){if(window.confirm("\xbfSeguro que deseas eliminar este familiar?"))try{(await i.L.authenticatedFetch(`/api/families/${e}`,{method:"DELETE"})).ok?await b():alert("No se pudo eliminar el familiar")}catch(e){alert("Error al eliminar familiar"),console.error("Error deleting family:",e)}}let[t,a]=(0,n.useState)([]),[h,g]=(0,n.useState)(!0),[y,f]=(0,n.useState)(""),[j,v]=(0,n.useState)(""),[w,N]=(0,n.useState)("");async function b(){try{let e=await i.L.authenticatedFetch("/api/families"),t=await e.json();a(Array.isArray(t)?t:[])}catch(e){console.error("Error loading families:",e),a([])}finally{g(!1)}}async function k(e,t){try{(await i.L.authenticatedFetch(`/api/families/${e}`,{method:"PATCH",body:JSON.stringify({activo:!t})})).ok&&await b()}catch(e){console.error("Error toggling family member:",e)}}let C=t.filter(e=>{let t=e.nombres.toLowerCase().includes(y.toLowerCase())||e.apellidos.toLowerCase().includes(y.toLowerCase())||e.socioTitularName?.toLowerCase().includes(y.toLowerCase())||e.socioTitularCode?.toLowerCase().includes(y.toLowerCase())||e.ci&&e.ci.includes(y),a=!j||e.parentesco===j,r=!w||"activo"===w&&e.activo||"inactivo"===w&&!e.activo;return t&&a&&r}),Z=[...new Set(t.map(e=>e.parentesco))];return h?r.jsx(s.Z,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):r.jsx(s.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gesti\xf3n de Familiares"}),r.jsx("p",{className:"text-gray-600",children:"Administra los familiares de los socios del club"})]}),(0,r.jsxs)(p.default,{href:"/admin/familiares/nuevo",className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 flex items-center gap-2",children:[r.jsx(c.Z,{className:"w-4 h-4"}),"Nuevo Familiar"]})]}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Nombre, socio titular o CI...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:y,onChange:e=>f(e.target.value)})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parentesco"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:j,onChange:e=>v(e.target.value),children:[r.jsx("option",{value:"",children:"Todos"}),Z.map(e=>r.jsx("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:w,onChange:e=>N(e.target.value),children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"activo",children:"Activos"}),r.jsx("option",{value:"inactivo",children:"Inactivos"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>{f(""),v(""),N("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Limpiar Filtros"})})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-4",children:(0,r.jsxs)("span",{className:"text-base font-semibold text-gray-900",children:["Total Familiares: ",t.length]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Familiar"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Socio Titular"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parentesco"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nacimiento"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(t=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.foto?r.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:t.foto,alt:`${t.nombres} ${t.apellidos}`}):r.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[t.nombres.charAt(0),t.apellidos.charAt(0)]})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[t.nombres," ",t.apellidos]}),r.jsx("div",{className:"text-sm text-gray-500",children:t.ci?`CI: ${t.ci}`:"Sin CI"})]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.socioTitularName||"N/A"}),r.jsx("div",{className:"text-sm text-gray-500",children:t.socioTitularCode||"N/A"})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.parentesco})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:t.telefono||"-"}),r.jsx("div",{className:"text-sm text-gray-500",children:t.email||"-"})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.nacimiento?(0,l.p6)(t.nacimiento):"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsx("button",{onClick:()=>k(t.id,t.activo),className:`p-1 rounded ${t.activo?"text-green-600 hover:text-green-800":"text-gray-400 hover:text-gray-600"}`,children:t.activo?r.jsx(o.Z,{className:"w-5 h-5"}):r.jsx(m.Z,{className:"w-5 h-5"})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(p.default,{href:`/admin/familiares/${t.id}`,className:"text-primary-600 hover:text-primary-900 p-1",title:"Ver detalles",children:r.jsx(x.Z,{className:"w-4 h-4"})}),r.jsx(p.default,{href:`/admin/familiares/${t.id}/editar`,className:"text-gray-600 hover:text-gray-900 p-1",title:"Editar",children:r.jsx(u.Z,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>e(t.id),className:"text-red-600 hover:text-red-900 p-1",title:"Eliminar",children:r.jsx(m.Z,{className:"w-4 h-4"})})]})})]},t.id))})]})}),0===C.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-500",children:y||j||w?"No se encontraron familiares con los filtros aplicados":"No hay familiares registrados"}),!y&&!j&&!w&&(0,r.jsxs)(p.default,{href:"/admin/familiares/nuevo",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-600 bg-primary-100 hover:bg-primary-200",children:[r.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Registrar primer familiar"]})]})]})]})})}},60068:(e,t,a)=>{"use strict";a.d(t,{D2:()=>r,LJ:()=>i,_4:()=>n,tF:()=>s});let r={name:"America/Asuncion",offsetHours:-3,description:"Paraguay (UTC-3)"};function s(){let e=new Date,t=Object.fromEntries(new Intl.DateTimeFormat("en-CA",{timeZone:r.name,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(e).map(e=>[e.type,e.value]));return new Date(parseInt(t.year),parseInt(t.month)-1,parseInt(t.day),parseInt(t.hour),parseInt(t.minute),parseInt(t.second))}function i(e){if(e){let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${r}`}{let e=new Date;return new Intl.DateTimeFormat("en-CA",{timeZone:r.name,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}}function n(e,t=!1){let a;if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){let[t,r,s]=e.split("-").map(Number);a=new Date(t,r-1,s)}else a=new Date(e)}else a=e;if(t)return a.toLocaleString("es-PY",{timeZone:r.name,day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});if(!("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)))return a.toLocaleDateString("es-PY",{timeZone:r.name,day:"2-digit",month:"2-digit",year:"numeric"});{let[t,a,r]=e.split("-");return`${r.padStart(2,"0")}/${a.padStart(2,"0")}/${t}`}}},77863:(e,t,a)=>{"use strict";a.d(t,{Fw:()=>n,Ji:()=>l,m9:()=>c,p6:()=>i,sQ:()=>o,sU:()=>d,xG:()=>s});var r=a(60068);function s(e){return new Intl.NumberFormat("es-PY",{style:"currency",currency:"PYG",minimumFractionDigits:0}).format(e)}function i(e){return(0,r._4)(e,!1)}function n(e){let t=(0,r.tF)(),a=new Date(new Date(e).getTime()+108e5),s=t.getUTCFullYear()-a.getUTCFullYear(),i=t.getUTCMonth()-a.getUTCMonth();return(i<0||0===i&&t.getUTCDate()<a.getUTCDate())&&s--,s}function l(){return(0,r.LJ)()}function c(e){let t=e.replace(/\D/g,"");return t?t.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function d(e){return parseInt(e.replace(/\./g,""))||0}function o(e){return Math.round(e)}},12714:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},70003:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},83855:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88307:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},67187:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},24061:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},10787:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Garden\app\admin\familiares\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,4471,6837,8750],()=>a(65703));module.exports=r})();