(()=>{var e={};e.id=2289,e.ids=[2289],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},20770:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(23737),r(11506),r(35866);var s=r(23191),t=r(88716),l=r(37922),i=r.n(l),o=r(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(a,n);let d=["",{children:["admin",{children:["familiares",{children:["nuevo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,23737)),"C:\\Garden\\app\\admin\\familiares\\nuevo\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"C:\\Garden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Garden\\app\\admin\\familiares\\nuevo\\page.tsx"],u="/admin/familiares/nuevo/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/admin/familiares/nuevo/page",pathname:"/admin/familiares/nuevo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},90095:(e,a,r)=>{Promise.resolve().then(r.bind(r,41361))},41361:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>m});var s=r(10326),t=r(64447),l=r(67269),i=r(17577),o=r(35047),n=r(86333),d=r(88307),c=r(63685),u=r(90434);function m(){let e=(0,o.useRouter)(),[a,r]=(0,i.useState)(!1),[m,p]=(0,i.useState)(""),[x,g]=(0,i.useState)(!1),[h,b]=(0,i.useState)([]),[f,y]=(0,i.useState)(""),[v,j]=(0,i.useState)(null),[N,w]=(0,i.useState)(!1),[C,k]=(0,i.useState)({socioTitularId:"",nombres:"",apellidos:"",ci:"",parentesco:"",nacimiento:"",telefono:"",email:"",foto:""}),P=async a=>{a.preventDefault(),p(""),r(!0);try{let a=await l.L.authenticatedFetch("/api/families",{method:"POST",body:JSON.stringify(C)}),r=await a.json();a.ok?e.push("/admin/familiares"):p(r.msg||"Error al crear familiar")}catch(e){p("Error de conexi\xf3n")}finally{r(!1)}},S=async e=>{let a=e.target.files?.[0];if(a){g(!0);try{let e=new FormData;e.append("file",a);let r=await fetch("/api/uploads",{method:"POST",body:e}),s=await r.json();s.ok?k(e=>({...e,foto:s.path})):p("Error al subir la foto")}catch(e){p("Error al subir la foto")}finally{g(!1)}}},_=e=>{j(e),k(a=>({...a,socioTitularId:e.id})),w(!1),y("")},q=h.filter(e=>e.nombres.toLowerCase().includes(f.toLowerCase())||e.apellidos.toLowerCase().includes(f.toLowerCase())||e.codigo.toLowerCase().includes(f.toLowerCase())||e.ci.includes(f));return s.jsx(t.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx(u.default,{href:"/admin/familiares",className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(n.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Nuevo Familiar"}),s.jsx("p",{className:"text-gray-600",children:"Registra un nuevo familiar de socio"})]})]}),m&&s.jsx("div",{className:`p-4 rounded-lg ${m.includes("Error")?"bg-red-50 text-red-800 border border-red-200":"bg-green-50 text-green-800 border border-green-200"}`,children:m}),s.jsx("div",{className:"bg-white rounded-lg shadow",children:(0,s.jsxs)("form",{onSubmit:P,className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Socio Titular"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Socio Titular *"}),v?(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-gray-50",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium",children:[v.nombres," ",v.apellidos]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[v.codigo," • CI: ",v.ci]})]}),s.jsx("button",{type:"button",onClick:()=>{j(null),k(e=>({...e,socioTitularId:""}))},className:"text-red-600 hover:text-red-800 text-sm",children:"Cambiar"})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Buscar socio titular...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:f,onChange:e=>{y(e.target.value),w(e.target.value.length>0)},onFocus:()=>w(f.length>0)})]}),N&&q.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:q.slice(0,10).map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>_(e),className:"w-full text-left p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[(0,s.jsxs)("div",{className:"font-medium",children:[e.nombres," ",e.apellidos]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.codigo," • CI: ",e.ci]})]},e.id))})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci\xf3n Personal"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombres *"}),s.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:C.nombres,onChange:e=>k(a=>({...a,nombres:e.target.value})),placeholder:"Mar\xeda"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellidos *"}),s.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:C.apellidos,onChange:e=>k(a=>({...a,apellidos:e.target.value})),placeholder:"Gonz\xe1lez"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C\xe9dula de Identidad"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:C.ci,onChange:e=>k(a=>({...a,ci:e.target.value})),placeholder:"1234567"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parentesco *"}),(0,s.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:C.parentesco,onChange:e=>k(a=>({...a,parentesco:e.target.value})),children:[s.jsx("option",{value:"",children:"Seleccionar parentesco"}),["Esposo/a","Hijo/a","Padre/Madre","Hermano/a","Abuelo/a","Nieto/a","Otro"].map(e=>s.jsx("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Nacimiento"}),s.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:C.nacimiento,onChange:e=>k(a=>({...a,nacimiento:e.target.value}))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono"}),s.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:C.telefono,onChange:e=>k(a=>({...a,telefono:e.target.value})),placeholder:"0981-123456"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:C.email,onChange:e=>k(a=>({...a,email:e.target.value})),placeholder:"maria@email.com"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Foto del Familiar"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"hidden",id:"photo-upload",disabled:x}),(0,s.jsxs)("label",{htmlFor:"photo-upload",className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 disabled:opacity-50",children:[s.jsx(c.Z,{className:"w-4 h-4"}),x?"Subiendo...":"Subir Foto"]}),C.foto&&s.jsx("img",{src:C.foto,alt:"Preview",className:"w-12 h-12 rounded-full object-cover"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[s.jsx(u.default,{href:"/admin/familiares",className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:a||!v,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50",children:a?"Creando...":"Crear Familiar"})]})]})})]})})}},86333:(e,a,r)=>{"use strict";r.d(a,{Z:()=>s});let s=(0,r(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},88307:(e,a,r)=>{"use strict";r.d(a,{Z:()=>s});let s=(0,r(76557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},63685:(e,a,r)=>{"use strict";r.d(a,{Z:()=>s});let s=(0,r(76557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},23737:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Garden\app\admin\familiares\nuevo\page.tsx#default`)}};var a=require("../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),s=a.X(0,[8948,4471,6837,8750],()=>r(20770));module.exports=s})();